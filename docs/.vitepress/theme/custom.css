/**
 * 自定义样式：优化目录显示
 * 让长标题完整显示，不截断
 */

/* === 核心修复：让目录标题完整显示 === */

/* 1. 目录容器：移除宽度限制和溢出隐藏 */
.VPDocAside.has-aside {
  width: 280px !important;
  padding-left: 16px !important;
}

.VPDocAsideOutline {
  max-width: none !important;
  width: 100% !important;
}

/* 2. 目录链接：允许换行和完整显示 */
.VPDocAsideOutline .outline-link {
  display: block !important;
  white-space: normal !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  word-break: break-word !important;
  overflow: visible !important;
  text-overflow: clip !important;
  line-height: 1.5 !important;
  padding: 4px 0 !important;
  max-width: none !important;
  width: 100% !important;
}

/* 3. 目录标题文本：确保完整显示 */
.VPDocAsideOutline .outline-link .outline-title {
  white-space: normal !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  word-break: break-word !important;
  display: block !important;
  max-width: none !important;
  width: 100% !important;
}

/* 4. 目录项容器：移除限制 */
.VPDocAsideOutline .outline-item {
  margin: 2px 0 !important;
  max-width: none !important;
}

/* 5. 嵌套目录项：保持对齐但允许换行 */
.VPDocAsideOutline .root .outline-item {
  padding-left: 0 !important;
}

.VPDocAsideOutline .nested .outline-item {
  padding-left: 16px !important;
}

/* === 响应式：大屏幕增加宽度 === */

/* 大屏幕 (1440px+) */
@media (min-width: 1440px) {
  .VPDocAside.has-aside {
    width: 320px !important;
  }
}

/* 超大屏幕 (1920px+) */
@media (min-width: 1920px) {
  .VPDocAside.has-aside {
    width: 360px !important;
  }
}

/* === 额外优化：提升可读性 === */

/* 悬停效果保持 */
.VPDocAsideOutline .outline-link:hover {
  color: var(--vp-c-brand-1) !important;
}

/* 活动状态保持 */
.VPDocAsideOutline .outline-link.active {
  color: var(--vp-c-brand-1) !important;
  font-weight: 600 !important;
}

/* === 将 Python 代码块工具栏移到代码块上方 === */
/* 调整代码块容器为相对定位 */
div.language-python {
  position: relative !important;
  margin-top: 28px !important; /* 紧凑的上边距 */
  padding-top: 0 !important; /* 移除顶部内边距，避免代码被遮挡 */
}

/* 将工具栏移到代码块上方，紧凑设计 */
div.language-python > span.lang,
div.language-python > button,
div.language-python > .copy {
  position: absolute !important;
  top: -26px !important; /* 紧贴代码区域顶部 */
  z-index: 10 !important;
  height: 24px !important; /* 减半高度：从 32px -> 24px */
  line-height: 22px !important;
  padding: 0 8px !important; /* 减小内边距 */
  font-size: 12px !important; /* 稍微缩小字体 */
}

/* 调整各个按钮的水平位置 */
div.language-python > span.lang {
  left: 0 !important;
  top: -26px !important;
  padding: 2px 10px !important;
  background: var(--vp-c-bg) !important;
  border: 1px solid var(--vp-c-divider) !important;
  border-radius: 4px !important;
  font-size: 12px !important;
}

div.language-python > button.copy {
  right: 110px !important; /* 复制按钮位置 */
  top: -26px !important;
}

div.language-python > button:not(.copy) {
  right: 0 !important; /* 运行代码按钮在最右边 */
  top: -26px !important;
}

/* === Python 代码块样式：背景 + 字体 === */
/* 使用 VitePress 默认主题色，保持与其他代码块一致 */

/* 代码块背景色 - 使用 VitePress 主题变量 */
div.language-python {
  background: var(--vp-code-block-bg) !important;
}

/* 代码区域背景色 - 使用 VitePress 主题变量 */
div.language-python pre {
  background: var(--vp-code-block-bg) !important;
  margin: 0 !important;
  padding: 16px !important;
}

/* 确保行号容器不被遮挡 */
div.language-python .line-numbers-wrapper {
  padding-top: 16px !important;
  padding-bottom: 16px !important;
}

/* 代码字体样式 - 经典 Python 编程字体，保留 VitePress 语法高亮 */
div.language-python pre code,
div.language-python pre code span {
  /* 只设置字体相关属性，不覆盖颜色 */
  font-family: 'Fira Code', 'JetBrains Mono', 'Source Code Pro', 'Menlo', 'Monaco', 'Consolas', 'Courier New', monospace !important;
}

div.language-python pre code {
  font-size: 14px !important;
  line-height: 1.7 !important;
  letter-spacing: 0.02em !important; /* 字母间距，提高可读性 */
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

/* 不要覆盖 VitePress 的默认样式，让语法高亮生效 */
div.language-python pre code span {
  /* 保留 VitePress/Shiki 的语法高亮颜色 */
  /* 不设置 color, background 等属性 */
}

/* 悬停效果 - 使用 VitePress 主题色 */
div.language-python:hover {
  background: var(--vp-code-block-bg) !important;
  opacity: 0.95;
}

/* === Python 代码块编辑功能样式 === */
/* 编辑按钮悬停效果 */
.code-edit-btn:hover {
  opacity: 0.9 !important;
  transform: scale(1.05) !important;
  transition: all 0.2s !important;
}

/* 编辑模式下的代码块样式 */
div.language-python pre code[contenteditable="true"] {
  cursor: text !important;
  user-select: text !important;
}

/* 编辑模式下保留语法高亮样式 */
.code-content.editing code span {
  /* 保留所有 Shiki 生成的颜色和样式 */
  pointer-events: none; /* 防止 span 干扰编辑 */
}

/* === 左侧导航栏悬浮动态效果 === */

/* 导航链接基础样式 - 添加过渡动画 */
.VPSidebarItem .link,
.VPSidebarItem .text {
  transition: all 0.25s ease !important;
  border-radius: 6px !important;
  margin: 2px 0 !important;
}

/* 悬浮效果：背景色 + 左侧边框 + 轻微位移 */
.VPSidebarItem .link:hover {
  background: var(--vp-c-bg-soft) !important;
  padding-left: 12px !important;
  border-left: 3px solid var(--vp-c-brand-1) !important;
  color: var(--vp-c-brand-1) !important;
  transform: translateX(4px) !important;
}

/* 可折叠组标题的悬浮效果 */
.VPSidebarItem.collapsible > .item > .text:hover,
.VPSidebarItem.collapsible > .item > .indicator:hover + .text {
  color: var(--vp-c-brand-1) !important;
}

/* 活动状态保持高亮 */
.VPSidebarItem .link.active {
  background: var(--vp-c-brand-soft) !important;
  border-left: 3px solid var(--vp-c-brand-1) !important;
  color: var(--vp-c-brand-1) !important;
  font-weight: 600 !important;
}

/* 嵌套子项的悬浮效果 */
.VPSidebarItem.level-1 .link:hover,
.VPSidebarItem.level-2 .link:hover,
.VPSidebarItem.level-3 .link:hover {
  background: var(--vp-c-bg-soft) !important;
  color: var(--vp-c-brand-1) !important;
}

/* 折叠箭头图标动画 */
.VPSidebarItem .caret {
  transition: transform 0.3s ease !important;
}

.VPSidebarItem.collapsible:hover .caret {
  color: var(--vp-c-brand-1) !important;
}
