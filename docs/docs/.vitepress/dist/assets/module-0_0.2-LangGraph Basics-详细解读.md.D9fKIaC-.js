import{_ as a,c as i,o as n,ag as l}from"./chunks/framework.Cf3FQAeg.js";const o=JSON.parse('{"title":"LangChain Academy åŸºç¡€å…¥é—¨è¯¦ç»†è§£è¯»","description":"","frontmatter":{},"headers":[],"relativePath":"module-0/0.2-LangGraph Basics-è¯¦ç»†è§£è¯».md","filePath":"module-0/0.2-LangGraph Basics-è¯¦ç»†è§£è¯».md","lastUpdated":1760223716000}'),e={name:"module-0/0.2-LangGraph Basics-è¯¦ç»†è§£è¯».md"};function p(t,s,h,k,r,d){return n(),i("div",null,[...s[0]||(s[0]=[l(`<h1 id="langchain-academy-åŸºç¡€å…¥é—¨è¯¦ç»†è§£è¯»" tabindex="-1">LangChain Academy åŸºç¡€å…¥é—¨è¯¦ç»†è§£è¯» <a class="header-anchor" href="#langchain-academy-åŸºç¡€å…¥é—¨è¯¦ç»†è§£è¯»" aria-label="Permalink to &quot;LangChain Academy åŸºç¡€å…¥é—¨è¯¦ç»†è§£è¯»&quot;">â€‹</a></h1><h2 id="ğŸ“š-æ¦‚è¿°" tabindex="-1">ğŸ“š æ¦‚è¿° <a class="header-anchor" href="#ğŸ“š-æ¦‚è¿°" aria-label="Permalink to &quot;ğŸ“š æ¦‚è¿°&quot;">â€‹</a></h2><p>æœ¬æ–‡æ¡£è¯¦ç»†è§£è¯» <strong>LangChain Academy</strong> çš„åŸºç¡€å…¥é—¨æ¨¡å—ï¼ˆModule 0 - Basicsï¼‰ã€‚è¿™æ˜¯å­¦ä¹  LangGraph çš„ç¬¬ä¸€æ­¥ï¼Œå¸®åŠ©ä½ ç†è§£ LangChain ç”Ÿæ€ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ã€Chat Modelsï¼ˆèŠå¤©æ¨¡å‹ï¼‰çš„ä½¿ç”¨ï¼Œä»¥åŠåŸºç¡€å·¥å…·é›†æˆã€‚é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å°†æŒæ¡æ„å»º AI åº”ç”¨çš„åŸºç¡€çŸ¥è¯†ã€‚</p><h2 id="ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-langchain" tabindex="-1">ä»€ä¹ˆæ˜¯ LangChainï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-langchain" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ LangChainï¼Ÿ&quot;">â€‹</a></h3><p>LangChain æ˜¯ä¸€ä¸ªç”¨äºæ„å»º <strong>LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åº”ç”¨</strong> çš„å¼€å‘æ¡†æ¶ã€‚å®ƒæä¾›äº†ï¼š</p><ul><li><strong>æ¨¡å—åŒ–ç»„ä»¶</strong>ï¼šChat Modelsã€Promptsã€Toolsã€Memory ç­‰</li><li><strong>æ ‡å‡†åŒ–æ¥å£</strong>ï¼šç»Ÿä¸€çš„ APIï¼Œæ”¯æŒå¤šç§ LLM æä¾›å•†</li><li><strong>é“¾å¼ç»„åˆ</strong>ï¼šå°†å¤šä¸ªç»„ä»¶ç»„åˆæˆå¤æ‚çš„å·¥ä½œæµ</li></ul><h3 id="ä»€ä¹ˆæ˜¯-langgraph" tabindex="-1">ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-langgraph" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ&quot;">â€‹</a></h3><p>LangGraph æ˜¯ LangChain ç”Ÿæ€ç³»ç»Ÿä¸­çš„<strong>å›¾ç¼–æ’æ¡†æ¶</strong>ï¼Œä¸“é—¨ç”¨äºæ„å»º Agent å’Œå¤š Agent åº”ç”¨ã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p><ol><li><strong>å¾ªç¯æ”¯æŒï¼ˆCyclesï¼‰</strong>ï¼šæ”¯æŒå¸¦å¾ªç¯çš„å·¥ä½œæµï¼Œè€Œä¸ä»…ä»…æ˜¯ DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰</li><li><strong>ç²¾ç¡®æ§åˆ¶ï¼ˆControllabilityï¼‰</strong>ï¼šå¯ä»¥ç²¾ç¡®æ§åˆ¶ Agent çš„æ‰§è¡Œæµç¨‹</li><li><strong>çŠ¶æ€æŒä¹…åŒ–ï¼ˆPersistenceï¼‰</strong>ï¼šæ”¯æŒçŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤</li></ol><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-langgraph" tabindex="-1">ä¸ºä»€ä¹ˆéœ€è¦ LangGraphï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-langgraph" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆéœ€è¦ LangGraphï¼Ÿ&quot;">â€‹</a></h3><p>ä¼ ç»Ÿçš„ Agent æ¡†æ¶å­˜åœ¨é—®é¢˜ï¼š</p><ul><li>âŒ ç¼ºä¹å¯¹æ‰§è¡Œæµç¨‹çš„æ§åˆ¶</li><li>âŒ éš¾ä»¥å¤„ç†å¤æ‚çš„å†³ç­–é€»è¾‘</li><li>âŒ æ— æ³•å¯é åœ°æŠ•å…¥ç”Ÿäº§ç¯å¢ƒ</li></ul><p>LangGraph çš„è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>âœ… å°† Agent å·¥ä½œæµå»ºæ¨¡ä¸º<strong>çŠ¶æ€å›¾</strong></li><li>âœ… é€šè¿‡èŠ‚ç‚¹å’Œè¾¹ç²¾ç¡®æ§åˆ¶æ‰§è¡Œè·¯å¾„</li><li>âœ… æ”¯æŒäººå·¥ä»‹å…¥ã€é”™è¯¯æ¢å¤ç­‰ç”Ÿäº§çº§ç‰¹æ€§</li></ul><hr><h2 id="ğŸ“-è¯¾ç¨‹ç»“æ„" tabindex="-1">ğŸ“ è¯¾ç¨‹ç»“æ„ <a class="header-anchor" href="#ğŸ“-è¯¾ç¨‹ç»“æ„" aria-label="Permalink to &quot;ğŸ“ è¯¾ç¨‹ç»“æ„&quot;">â€‹</a></h2><p>LangChain Academy åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—èšç„¦ç‰¹å®šä¸»é¢˜ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>langchain-academy/</span></span>
<span class="line"><span>â”œâ”€â”€ module-0/        # åŸºç¡€å…¥é—¨ï¼ˆæœ¬æ•™ç¨‹ï¼‰</span></span>
<span class="line"><span>â”œâ”€â”€ module-1/        # LangGraph æ ¸å¿ƒæ¦‚å¿µ</span></span>
<span class="line"><span>â”œâ”€â”€ module-2/        # Agent æ¶æ„</span></span>
<span class="line"><span>â”œâ”€â”€ module-3/        # Multi-Agent ç³»ç»Ÿ</span></span>
<span class="line"><span>â”œâ”€â”€ module-4/        # é«˜çº§æ¨¡å¼ï¼ˆMap-Reduceã€Sub-graphs ç­‰ï¼‰</span></span>
<span class="line"><span>â””â”€â”€ ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ¯ä¸ªæ¨¡å—åŒ…å«ï¼š</p><ul><li><strong>Notebooks</strong>ï¼šäº¤äº’å¼æ•™ç¨‹ï¼ˆJupyter Notebookï¼‰</li><li><strong>Studio æ–‡ä»¶</strong>ï¼šå¯ä»¥åœ¨ LangGraph Studio ä¸­æ‰“å¼€çš„å›¾å®šä¹‰</li><li><strong>è§†é¢‘æ•™ç¨‹</strong>ï¼šé…å¥—è®²è§£è§†é¢‘</li></ul><hr><h2 id="ğŸ”§-ç¯å¢ƒé…ç½®è¯¦è§£" tabindex="-1">ğŸ”§ ç¯å¢ƒé…ç½®è¯¦è§£ <a class="header-anchor" href="#ğŸ”§-ç¯å¢ƒé…ç½®è¯¦è§£" aria-label="Permalink to &quot;ğŸ”§ ç¯å¢ƒé…ç½®è¯¦è§£&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…ä¾èµ–" tabindex="-1">1. å®‰è£…ä¾èµ– <a class="header-anchor" href="#_1-å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;1. å®‰è£…ä¾èµ–&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --quiet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain_openai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain_core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> langchain_community</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tavily-python</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ä¾èµ–è¯´æ˜ï¼š</strong></p><table tabindex="0"><thead><tr><th>åŒ…å</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>langchain_openai</code></td><td>OpenAI æ¨¡å‹é›†æˆï¼ˆChatGPTã€GPT-4 ç­‰ï¼‰</td></tr><tr><td><code>langchain_core</code></td><td>LangChain æ ¸å¿ƒç»„ä»¶ï¼ˆMessagesã€Runnables ç­‰ï¼‰</td></tr><tr><td><code>langchain_community</code></td><td>ç¤¾åŒºå·¥å…·ï¼ˆTavily æœç´¢ç­‰ï¼‰</td></tr><tr><td><code>tavily-python</code></td><td>Tavily æœç´¢å¼•æ“ SDK</td></tr></tbody></table><h3 id="_2-é…ç½®-api-å¯†é’¥" tabindex="-1">2. é…ç½® API å¯†é’¥ <a class="header-anchor" href="#_2-é…ç½®-api-å¯†é’¥" aria-label="Permalink to &quot;2. é…ç½® API å¯†é’¥&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os, getpass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _set_env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.environ.get(var):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        os.environ[var] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getpass.getpass(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">var</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_set_env(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Python çŸ¥è¯†ç‚¹ï¼šç¯å¢ƒå˜é‡ä¸å®‰å…¨æ€§</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.environ.get(var)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿”å›å€¼æˆ– None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰å…¨åœ°è·å–å¯†é’¥ï¼ˆè¾“å…¥æ—¶ä¸æ˜¾ç¤ºï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getpass.getpass(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">var</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç±»ä¼¼å¯†ç è¾“å…¥</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¾ç½®ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.environ[var] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;your-api-key&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Ÿ</strong></p><ul><li>ğŸ”’ <strong>å®‰å…¨æ€§</strong>ï¼šé¿å…å°†å¯†é’¥ç¡¬ç¼–ç åœ¨ä»£ç ä¸­</li><li>ğŸ”„ <strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥åœ¨ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒå¯†é’¥</li><li>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šéµå¾ª 12-Factor App åŸåˆ™</li></ul><hr><h2 id="ğŸ¤–-chat-models-è¯¦è§£" tabindex="-1">ğŸ¤– Chat Models è¯¦è§£ <a class="header-anchor" href="#ğŸ¤–-chat-models-è¯¦è§£" aria-label="Permalink to &quot;ğŸ¤– Chat Models è¯¦è§£&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-chat-model" tabindex="-1">ä»€ä¹ˆæ˜¯ Chat Modelï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-chat-model" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Chat Modelï¼Ÿ&quot;">â€‹</a></h3><p>Chat Model æ˜¯ä¸€ç§æ¥å—<strong>æ¶ˆæ¯åˆ—è¡¨</strong>ä½œä¸ºè¾“å…¥ï¼Œè¿”å›<strong>èŠå¤©æ¶ˆæ¯</strong>ä½œä¸ºè¾“å‡ºçš„æ¨¡å‹ã€‚ä¸ä¼ ç»Ÿçš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ä¸åŒï¼ŒChat Model ç†è§£å¯¹è¯çš„ä¸Šä¸‹æ–‡å’Œè§’è‰²ã€‚</p><h3 id="æ ¸å¿ƒç‰¹æ€§" tabindex="-1">æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#æ ¸å¿ƒç‰¹æ€§" aria-label="Permalink to &quot;æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>è¾“å…¥ï¼š[HumanMessage, AIMessage, SystemMessage, ...]</span></span>
<span class="line"><span>  â†“</span></span>
<span class="line"><span>Chat Model (å¦‚ )</span></span>
<span class="line"><span>  â†“</span></span>
<span class="line"><span>è¾“å‡ºï¼šAIMessage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="langchain-çš„-chat-model-é›†æˆ" tabindex="-1">LangChain çš„ Chat Model é›†æˆ <a class="header-anchor" href="#langchain-çš„-chat-model-é›†æˆ" aria-label="Permalink to &quot;LangChain çš„ Chat Model é›†æˆ&quot;">â€‹</a></h3><p>LangChain <strong>ä¸æ‰˜ç®¡æ¨¡å‹</strong>ï¼Œè€Œæ˜¯æä¾›ç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæä¾›å•†ï¼š</p><table tabindex="0"><thead><tr><th>æä¾›å•†</th><th>æ¨¡å‹ç¤ºä¾‹</th><th>é›†æˆåŒ…</th></tr></thead><tbody><tr><td>OpenAI</td><td>GPT-4, GPT-3.5</td><td><code>langchain_openai</code></td></tr><tr><td>Anthropic</td><td>Claude</td><td><code>langchain_anthropic</code></td></tr><tr><td>Google</td><td>Gemini</td><td><code>langchain_google_genai</code></td></tr><tr><td>Azure</td><td>Azure OpenAI</td><td><code>langchain_openai</code></td></tr></tbody></table><p><strong>å¥½å¤„ï¼š</strong></p><ul><li>ç»Ÿä¸€ APIï¼Œè½»æ¾åˆ‡æ¢æ¨¡å‹</li><li>æ¨¡å‹æ— å…³çš„åº”ç”¨è®¾è®¡</li><li>æ”¯æŒ 70+ æ¨¡å‹æä¾›å•†</li></ul><hr><h2 id="ğŸ’»-chat-model-å®æˆ˜" tabindex="-1">ğŸ’» Chat Model å®æˆ˜ <a class="header-anchor" href="#ğŸ’»-chat-model-å®æˆ˜" aria-label="Permalink to &quot;ğŸ’» Chat Model å®æˆ˜&quot;">â€‹</a></h2><h3 id="_1-åˆå§‹åŒ–-chat-model" tabindex="-1">1. åˆå§‹åŒ– Chat Model <a class="header-anchor" href="#_1-åˆå§‹åŒ–-chat-model" aria-label="Permalink to &quot;1. åˆå§‹åŒ– Chat Model&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ– GPT-4o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpt4o_chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ– GPT-3.5ï¼ˆæ›´ä¾¿å®œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpt35_chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo-0125&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>å…³é”®å‚æ•°è¯¦è§£ï¼š</strong></p><h4 id="model-æ¨¡å‹åç§°" tabindex="-1"><code>model</code>ï¼ˆæ¨¡å‹åç§°ï¼‰ <a class="header-anchor" href="#model-æ¨¡å‹åç§°" aria-label="Permalink to &quot;\`model\`ï¼ˆæ¨¡å‹åç§°ï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GPT-5 ç³»åˆ— - é«˜è´¨é‡ã€ä»·æ ¼å·²æ˜æ˜¾ä¸‹é™</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # æœ€æ–°ä¼˜åŒ–ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4-turbo&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # GPT-4 Turbo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GPT-3.5 ç³»åˆ— - ä¾¿å®œã€å¿«é€Ÿ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo-0125&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # GPT-3.5 æœ€æ–°ç‰ˆæœ¬</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p><ul><li>éœ€è¦é«˜è´¨é‡è¾“å‡º â†’ GPT-4</li><li>éœ€è¦é™ä½æˆæœ¬ â†’ GPT-3.5</li><li>éœ€è¦å¹³è¡¡ â†’ GPT-4oï¼ˆæœ¬è¯¾ç¨‹é»˜è®¤ï¼‰</li></ul><h4 id="temperature-æ¸©åº¦å‚æ•°" tabindex="-1"><code>temperature</code>ï¼ˆæ¸©åº¦å‚æ•°ï¼‰ <a class="header-anchor" href="#temperature-æ¸©åº¦å‚æ•°" aria-label="Permalink to &quot;\`temperature\`ï¼ˆæ¸©åº¦å‚æ•°ï¼‰&quot;">â€‹</a></h4><p>æ§åˆ¶è¾“å‡ºçš„<strong>éšæœºæ€§</strong>å’Œ<strong>åˆ›é€ æ€§</strong>ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">temperature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç¡®å®šæ€§è¾“å‡ºï¼ˆé€‚åˆäº‹å®æŸ¥è¯¢ã€ä»£ç ç”Ÿæˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">temperature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¹³è¡¡ï¼ˆé€‚åˆå¯¹è¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">temperature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æœ€å¤§åˆ›é€ æ€§ï¼ˆé€‚åˆåˆ›æ„å†™ä½œï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>ç¤ºä¾‹å¯¹æ¯”ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Temperature = 0 (æ¯æ¬¡è¾“å‡ºå‡ ä¹ç›¸åŒ)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½ã€‚&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Temperature = 1.0 (æ¯æ¬¡è¾“å‡ºä¸åŒ)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·´é»ï¼Œè¿™åº§æµªæ¼«ä¹‹éƒ½ï¼Œæ˜¯æ³•å›½çš„é¦–éƒ½ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ³•å›½çš„é¦–éƒ½æ˜¯ç¾ä¸½çš„å·´é»ã€‚&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h3 id="_2-è°ƒç”¨-chat-model" tabindex="-1">2. è°ƒç”¨ Chat Model <a class="header-anchor" href="#_2-è°ƒç”¨-chat-model" aria-label="Permalink to &quot;2. è°ƒç”¨ Chat Model&quot;">â€‹</a></h3><h4 id="æ–¹æ³•-1-ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡" tabindex="-1">æ–¹æ³• 1ï¼šä½¿ç”¨æ¶ˆæ¯å¯¹è±¡ <a class="header-anchor" href="#æ–¹æ³•-1-ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡" aria-label="Permalink to &quot;æ–¹æ³• 1ï¼šä½¿ç”¨æ¶ˆæ¯å¯¹è±¡&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HumanMessage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è°ƒç”¨æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gpt4o_chat.invoke([msg])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>è¾“å‡ºï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AIMessage(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello! How can I assist you today?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    response_metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;token_usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;completion_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prompt_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;total_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;model_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gpt-4o-2024-05-13&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;finish_reason&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;stop&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;run-d3c4bc85-ef14-49f6-ba7e-91bf455cffee-0&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>LangChain çŸ¥è¯†ç‚¹ï¼šæ¶ˆæ¯ç±»å‹</strong></p><table tabindex="0"><thead><tr><th>æ¶ˆæ¯ç±»å‹</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>HumanMessage</code></td><td>ç”¨æˆ·è¾“å…¥</td><td>ç”¨æˆ·çš„é—®é¢˜ã€æŒ‡ä»¤</td></tr><tr><td><code>AIMessage</code></td><td>AI å›å¤</td><td>æ¨¡å‹çš„å›ç­”</td></tr><tr><td><code>SystemMessage</code></td><td>ç³»ç»ŸæŒ‡ä»¤</td><td>è®¾å®š AI çš„è§’è‰²ã€è¡Œä¸º</td></tr><tr><td><code>FunctionMessage</code></td><td>å‡½æ•°è°ƒç”¨ç»“æœ</td><td>Tool æ‰§è¡Œçš„è¿”å›å€¼</td></tr></tbody></table><p><strong>æ¶ˆæ¯å¯¹è±¡ç»“æ„ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HumanMessage(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¶ˆæ¯å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lance&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å¯é€‰ï¼šå‘é€è€…åç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="æ–¹æ³•-2-ä½¿ç”¨å­—ç¬¦ä¸²-ç®€åŒ–å†™æ³•" tabindex="-1">æ–¹æ³• 2ï¼šä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆç®€åŒ–å†™æ³•ï¼‰ <a class="header-anchor" href="#æ–¹æ³•-2-ä½¿ç”¨å­—ç¬¦ä¸²-ç®€åŒ–å†™æ³•" aria-label="Permalink to &quot;æ–¹æ³• 2ï¼šä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆç®€åŒ–å†™æ³•ï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gpt4o_chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>å†…éƒ¨è½¬æ¢ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  â†’  HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p><ul><li>âœ… ç®€å•å•è½®å¯¹è¯</li><li>âŒ å¤šè½®å¯¹è¯ï¼ˆéœ€è¦ä¿ç•™å†å²ï¼‰</li></ul><hr><h3 id="_3-åˆ‡æ¢æ¨¡å‹" tabindex="-1">3. åˆ‡æ¢æ¨¡å‹ <a class="header-anchor" href="#_3-åˆ‡æ¢æ¨¡å‹" aria-label="Permalink to &quot;3. åˆ‡æ¢æ¨¡å‹&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GPT-4o å›å¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpt4o_chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># â†’ AIMessage(content=&#39;Hello! How can I assist you today?&#39;, ...)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GPT-3.5 å›å¤ï¼ˆä½¿ç”¨ç›¸åŒæ¥å£ï¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpt35_chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># â†’ AIMessage(content=&#39;Hello! How can I assist you today?&#39;, ...)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>ğŸ”„ ç»Ÿä¸€æ¥å£ï¼Œæ— éœ€ä¿®æ”¹ä»£ç </li><li>ğŸ’° çµæ´»åˆ‡æ¢ï¼Œä¼˜åŒ–æˆæœ¬</li><li>ğŸ§ª A/B æµ‹è¯•ä¸åŒæ¨¡å‹</li></ul><hr><h2 id="ğŸ”-æœç´¢å·¥å…·é›†æˆ-tavily" tabindex="-1">ğŸ” æœç´¢å·¥å…·é›†æˆï¼šTavily <a class="header-anchor" href="#ğŸ”-æœç´¢å·¥å…·é›†æˆ-tavily" aria-label="Permalink to &quot;ğŸ” æœç´¢å·¥å…·é›†æˆï¼šTavily&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-tavily" tabindex="-1">ä»€ä¹ˆæ˜¯ Tavilyï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-tavily" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Tavilyï¼Ÿ&quot;">â€‹</a></h3><p>Tavily æ˜¯ä¸€ä¸ª<strong>ä¸º LLM ä¼˜åŒ–çš„æœç´¢å¼•æ“</strong>ï¼Œæä¾›ï¼š</p><ul><li>ğŸ“Š ç»“æ„åŒ–æœç´¢ç»“æœ</li><li>âš¡ å¿«é€Ÿå“åº”ï¼ˆé’ˆå¯¹ RAG ä¼˜åŒ–ï¼‰</li><li>ğŸ’ é«˜è´¨é‡å†…å®¹ï¼ˆè¿‡æ»¤ä½è´¨é‡ç½‘é¡µï¼‰</li></ul><h3 id="é…ç½®-tavily-api" tabindex="-1">é…ç½® Tavily API <a class="header-anchor" href="#é…ç½®-tavily-api" aria-label="Permalink to &quot;é…ç½® Tavily API&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_set_env(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TAVILY_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>å…è´¹é¢åº¦ï¼š</strong></p><ul><li>æ–°ç”¨æˆ·èµ é€å…è´¹ credits</li><li>è¶³å¤Ÿå®Œæˆæœ¬è¯¾ç¨‹çš„å­¦ä¹ </li></ul><h3 id="ä½¿ç”¨-tavily-æœç´¢" tabindex="-1">ä½¿ç”¨ Tavily æœç´¢ <a class="header-anchor" href="#ä½¿ç”¨-tavily-æœç´¢" aria-label="Permalink to &quot;ä½¿ç”¨ Tavily æœç´¢&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.tools.tavily_search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–æœç´¢å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tavily_search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œæœç´¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">search_docs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tavily_search.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What is LangGraph?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.datacamp.com/tutorial/langgraph-tutorial&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;LangGraph is a library within the LangChain ecosystem designed to tackle these challenges head-on. LangGraph provides a framework for defining, coordinating, and executing multiple LLM agents (or chains) in a structured manner.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://langchain-ai.github.io/langgraph/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Overview LangGraph is a library for building stateful, multi-actor applications with LLMs, used to create agent and multi-agent workflows. Compared to other LLM frameworks, it offers these core benefits: cycles, controllability, and persistence.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.youtube.com/watch?v=nmDFSVRnr4Q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;LangGraph is an extension of LangChain enabling Multi-Agent conversation and cyclic chains.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>è¿”å›ç»“æ„ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¥æº URL</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # æå–çš„æ–‡æœ¬å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h2 id="ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" tabindex="-1">ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“ <a class="header-anchor" href="#ğŸ“-æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“" aria-label="Permalink to &quot;ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“&quot;">â€‹</a></h2><h3 id="langchain-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">LangChain æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#langchain-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;LangChain æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><h4 id="_1-runnable-æ¥å£" tabindex="-1">1. Runnable æ¥å£ <a class="header-anchor" href="#_1-runnable-æ¥å£" aria-label="Permalink to &quot;1. Runnable æ¥å£&quot;">â€‹</a></h4><p>æ‰€æœ‰ LangChain ç»„ä»¶ï¼ˆChat Modelsã€Toolsã€Chainsï¼‰éƒ½å®ç° <strong>Runnable æ¥å£</strong>ï¼š</p><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>invoke(input)</code></td><td>åŒæ­¥è°ƒç”¨</td><td>å•æ¬¡è¯·æ±‚</td></tr><tr><td><code>stream(input)</code></td><td>æµå¼è¾“å‡º</td><td>é•¿æ–‡æœ¬ç”Ÿæˆ</td></tr><tr><td><code>batch(inputs)</code></td><td>æ‰¹é‡è°ƒç”¨</td><td>å¹¶è¡Œå¤„ç†å¤šä¸ªè¾“å…¥</td></tr><tr><td><code>ainvoke(input)</code></td><td>å¼‚æ­¥è°ƒç”¨</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># invoke - ç­‰å¾…å®Œæ•´å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tell me a joke&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># stream - é€ token è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.stream(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tell me a joke&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk.content, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2-messages-æ¶ˆæ¯ç³»ç»Ÿ" tabindex="-1">2. Messagesï¼ˆæ¶ˆæ¯ç³»ç»Ÿï¼‰ <a class="header-anchor" href="#_2-messages-æ¶ˆæ¯ç³»ç»Ÿ" aria-label="Permalink to &quot;2. Messagesï¼ˆæ¶ˆæ¯ç³»ç»Ÿï¼‰&quot;">â€‹</a></h4><p>LangChain ä½¿ç”¨<strong>æ¶ˆæ¯å¯¹è±¡</strong>è€Œéçº¯æ–‡æœ¬ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ ä¸æ¨èï¼šçº¯æ–‡æœ¬</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What is the capital of France?&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… æ¨èï¼šæ¶ˆæ¯å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What is the capital of France?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>ğŸ“‹ ä¿ç•™å¯¹è¯å†å²</li><li>ğŸ­ åŒºåˆ†ä¸åŒè§’è‰²</li><li>ğŸ”§ æ”¯æŒå¤šæ¨¡æ€ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰</li></ul><h4 id="_3-æ¨¡å‹åˆå§‹åŒ–æœ€ä½³å®è·µ" tabindex="-1">3. æ¨¡å‹åˆå§‹åŒ–æœ€ä½³å®è·µ <a class="header-anchor" href="#_3-æ¨¡å‹åˆå§‹åŒ–æœ€ä½³å®è·µ" aria-label="Permalink to &quot;3. æ¨¡å‹åˆå§‹åŒ–æœ€ä½³å®è·µ&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âœ… åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–ä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ ä¸è¦åœ¨å¾ªç¯ä¸­é‡å¤åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ€§èƒ½æµªè´¹</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h3 id="python-æ ¸å¿ƒçŸ¥è¯†ç‚¹" tabindex="-1">Python æ ¸å¿ƒçŸ¥è¯†ç‚¹ <a class="header-anchor" href="#python-æ ¸å¿ƒçŸ¥è¯†ç‚¹" aria-label="Permalink to &quot;Python æ ¸å¿ƒçŸ¥è¯†ç‚¹&quot;">â€‹</a></h3><h4 id="_1-ç¯å¢ƒå˜é‡ç®¡ç†" tabindex="-1">1. ç¯å¢ƒå˜é‡ç®¡ç† <a class="header-anchor" href="#_1-ç¯å¢ƒå˜é‡ç®¡ç†" aria-label="Permalink to &quot;1. ç¯å¢ƒå˜é‡ç®¡ç†&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯»å–ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.environ.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¾ç½®ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.environ[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sk-...&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.environ:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API key is set&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ .env æ–‡ä»¶ï¼ˆéœ€è¦ python-dotenvï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OPENAI_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sk-xxx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TAVILY_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tvly-xxx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Python ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dotenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load_dotenv</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">load_dotenv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è‡ªåŠ¨åŠ è½½ .env æ–‡ä»¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-getpass-æ¨¡å—-å®‰å…¨è¾“å…¥" tabindex="-1">2. getpass æ¨¡å—ï¼ˆå®‰å…¨è¾“å…¥ï¼‰ <a class="header-anchor" href="#_2-getpass-æ¨¡å—-å®‰å…¨è¾“å…¥" aria-label="Permalink to &quot;2. getpass æ¨¡å—ï¼ˆå®‰å…¨è¾“å…¥ï¼‰&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getpass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸æ˜¾ç¤ºè¾“å…¥å†…å®¹ï¼ˆç±»ä¼¼å¯†ç è¾“å…¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getpass.getpass(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Enter password: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·è¾“å…¥æ—¶å±å¹•ä¸æ˜¾ç¤º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹æ¯”æ™®é€š input()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Enter username: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥å†…å®¹å¯è§</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-åˆ—è¡¨æ¨å¯¼å¼" tabindex="-1">3. åˆ—è¡¨æ¨å¯¼å¼ <a class="header-anchor" href="#_3-åˆ—è¡¨æ¨å¯¼å¼" aria-label="Permalink to &quot;3. åˆ—è¡¨æ¨å¯¼å¼&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœç´¢ç»“æœå¤„ç†ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">urls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># â†’ [&#39;https://...&#39;, &#39;https://...&#39;, ...]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰ä»·äºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">urls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    urls.append(doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1">ğŸ’¡ æœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ğŸ’¡ æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="_1-api-å¯†é’¥å®‰å…¨" tabindex="-1">1. API å¯†é’¥å®‰å…¨ <a class="header-anchor" href="#_1-api-å¯†é’¥å®‰å…¨" aria-label="Permalink to &quot;1. API å¯†é’¥å®‰å…¨&quot;">â€‹</a></h3><h4 id="âœ…-æ­£ç¡®åšæ³•" tabindex="-1">âœ… æ­£ç¡®åšæ³• <a class="header-anchor" href="#âœ…-æ­£ç¡®åšæ³•" aria-label="Permalink to &quot;âœ… æ­£ç¡®åšæ³•&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. ä½¿ç”¨ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.environ[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OPENAI_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sk-...&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. ä½¿ç”¨ .env æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPENAI_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xxx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - AWS Secrets Manager</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - HashiCorp Vault</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># - Azure Key Vault</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="âŒ-é”™è¯¯åšæ³•" tabindex="-1">âŒ é”™è¯¯åšæ³• <a class="header-anchor" href="#âŒ-é”™è¯¯åšæ³•" aria-label="Permalink to &quot;âŒ é”™è¯¯åšæ³•&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸è¦ç¡¬ç¼–ç åœ¨ä»£ç ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sk-xxxxxxxxxxxxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># âŒ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸è¦æäº¤åˆ° Git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># config.py</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sk-xxxxxxxxxxxxxxxx&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # âŒ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-æ¨¡å‹é€‰æ‹©ç­–ç•¥" tabindex="-1">2. æ¨¡å‹é€‰æ‹©ç­–ç•¥ <a class="header-anchor" href="#_2-æ¨¡å‹é€‰æ‹©ç­–ç•¥" aria-label="Permalink to &quot;2. æ¨¡å‹é€‰æ‹©ç­–ç•¥&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>æ¨èæ¨¡å‹</th><th>åŸå› </th></tr></thead><tbody><tr><td>äº‹å®æŸ¥è¯¢</td><td>GPT-4o</td><td>å‡†ç¡®æ€§é«˜</td></tr><tr><td>åˆ›æ„å†™ä½œ</td><td>GPT-4</td><td>è´¨é‡å¥½</td></tr><tr><td>ç®€å•åˆ†ç±»</td><td>GPT-3.5</td><td>æˆæœ¬ä½</td></tr><tr><td>ä»£ç ç”Ÿæˆ</td><td>GPT-4o</td><td>ä»£ç è´¨é‡é«˜</td></tr><tr><td>æ‰¹é‡å¤„ç†</td><td>GPT-3.5</td><td>æˆæœ¬ä¼˜åŒ–</td></tr></tbody></table><h3 id="_3-temperature-è®¾ç½®æŒ‡å—" tabindex="-1">3. Temperature è®¾ç½®æŒ‡å— <a class="header-anchor" href="#_3-temperature-è®¾ç½®æŒ‡å—" aria-label="Permalink to &quot;3. Temperature è®¾ç½®æŒ‡å—&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äº‹å®æ€§ä»»åŠ¡ - ä½ temperature</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚åˆï¼šæ•°å­¦ã€ç¿»è¯‘ã€æ•°æ®æå–</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›æ„ä»»åŠ¡ - é«˜ temperature</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚åˆï¼šæ•…äº‹åˆ›ä½œã€è¥é”€æ–‡æ¡ˆã€å¤´è„‘é£æš´</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¹³è¡¡ä»»åŠ¡ - ä¸­ç­‰ temperature</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€‚åˆï¼šå¯¹è¯ã€æ‘˜è¦ã€é—®ç­”</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-é”™è¯¯å¤„ç†" tabindex="-1">4. é”™è¯¯å¤„ç† <a class="header-anchor" href="#_4-é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;4. é”™è¯¯å¤„ç†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é”™è¯¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¤„ç†é”™è¯¯ï¼šé‡è¯•ã€é™çº§åˆ°å…¶ä»–æ¨¡å‹ç­‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>å¸¸è§é”™è¯¯ï¼š</strong></p><ul><li><code>AuthenticationError</code>ï¼šAPI å¯†é’¥é”™è¯¯</li><li><code>RateLimitError</code>ï¼šè¶…è¿‡é€Ÿç‡é™åˆ¶</li><li><code>APIError</code>ï¼šOpenAI æœåŠ¡é”™è¯¯</li></ul><hr><h2 id="ğŸš€-è¿›é˜¶æŠ€å·§" tabindex="-1">ğŸš€ è¿›é˜¶æŠ€å·§ <a class="header-anchor" href="#ğŸš€-è¿›é˜¶æŠ€å·§" aria-label="Permalink to &quot;ğŸš€ è¿›é˜¶æŠ€å·§&quot;">â€‹</a></h2><h3 id="_1-ä½¿ç”¨-systemmessage-è®¾å®šè§’è‰²" tabindex="-1">1. ä½¿ç”¨ SystemMessage è®¾å®šè§’è‰² <a class="header-anchor" href="#_1-ä½¿ç”¨-systemmessage-è®¾å®šè§’è‰²" aria-label="Permalink to &quot;1. ä½¿ç”¨ SystemMessage è®¾å®šè§’è‰²&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SystemMessage, HumanMessage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ Python æ•™å¸ˆï¼Œå–„äºç”¨ç®€å•çš„ä¾‹å­è§£é‡Šå¤æ‚æ¦‚å¿µã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(messages)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>æ•ˆæœï¼š</strong></p><ul><li>AI ä¼šä»¥æ•™å¸ˆçš„è§’è‰²å›ç­”</li><li>ä½¿ç”¨æ•™å­¦æ€§çš„è¯­è¨€å’Œç¤ºä¾‹</li></ul><h3 id="_2-æµå¼è¾“å‡ºä¼˜åŒ–ç”¨æˆ·ä½“éªŒ" tabindex="-1">2. æµå¼è¾“å‡ºä¼˜åŒ–ç”¨æˆ·ä½“éªŒ <a class="header-anchor" href="#_2-æµå¼è¾“å‡ºä¼˜åŒ–ç”¨æˆ·ä½“éªŒ" aria-label="Permalink to &quot;2. æµå¼è¾“å‡ºä¼˜åŒ–ç”¨æˆ·ä½“éªŒ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®Œæ•´è¾“å‡ºï¼ˆç”¨æˆ·ç­‰å¾…è¾ƒä¹…ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†™ä¸€ç¯‡å…³äº AI çš„æ–‡ç« &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰å¾… 10 ç§’åä¸€æ¬¡æ€§æ˜¾ç¤º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æµå¼è¾“å‡ºï¼ˆå®æ—¶åé¦ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.stream(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å†™ä¸€ç¯‡å…³äº AI çš„æ–‡ç« &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk.content, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">flush</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€ token æ˜¾ç¤º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-æœç´¢ç»“æœåå¤„ç†" tabindex="-1">3. æœç´¢ç»“æœåå¤„ç† <a class="header-anchor" href="#_3-æœç´¢ç»“æœåå¤„ç†" aria-label="Permalink to &quot;3. æœç´¢ç»“æœåå¤„ç†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æå–æ‰€æœ‰ URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">urls </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå¹¶æ‰€æœ‰å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">combined_content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.join([doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_docs])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç»“åˆæœç´¢ç»“æœç”Ÿæˆå›ç­”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŸºäºä»¥ä¸‹ä¿¡æ¯å›ç­”é—®é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">combined_content</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(messages)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h2 id="ğŸ“Š-æˆæœ¬ä¼˜åŒ–" tabindex="-1">ğŸ“Š æˆæœ¬ä¼˜åŒ– <a class="header-anchor" href="#ğŸ“Š-æˆæœ¬ä¼˜åŒ–" aria-label="Permalink to &quot;ğŸ“Š æˆæœ¬ä¼˜åŒ–&quot;">â€‹</a></h2><h3 id="token-ä½¿ç”¨ç»Ÿè®¡" tabindex="-1">Token ä½¿ç”¨ç»Ÿè®¡ <a class="header-anchor" href="#token-ä½¿ç”¨ç»Ÿè®¡" aria-label="Permalink to &quot;Token ä½¿ç”¨ç»Ÿè®¡&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ token ä½¿ç”¨æƒ…å†µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">metadata </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.response_metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;token_usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥ tokens: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prompt_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å‡º tokens: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;completion_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ€»è®¡ tokens: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;total_tokens&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>è¾“å…¥ tokens: 9</span></span>
<span class="line"><span>è¾“å‡º tokens: 9</span></span>
<span class="line"><span>æ€»è®¡ tokens: 18</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æˆæœ¬ä¼°ç®—" tabindex="-1">æˆæœ¬ä¼°ç®— <a class="header-anchor" href="#æˆæœ¬ä¼°ç®—" aria-label="Permalink to &quot;æˆæœ¬ä¼°ç®—&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¨¡å‹</th><th>è¾“å…¥ä»·æ ¼ï¼ˆ$/1M tokensï¼‰</th><th>è¾“å‡ºä»·æ ¼ï¼ˆ$/1M tokensï¼‰</th></tr></thead><tbody><tr><td>GPT-4o</td><td>$5.00</td><td>$15.00</td></tr><tr><td>GPT-3.5</td><td>$0.50</td><td>$1.50</td></tr></tbody></table><p><strong>è®¡ç®—ç¤ºä¾‹ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GPT-4o å¤„ç† 1000 tokens è¾“å…¥ + 1000 tokens è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># = $0.005 + $0.015 = $0.02ï¼ˆ2 åˆ†é’±ï¼‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h2 id="ğŸ¯-å®é™…åº”ç”¨æ¡ˆä¾‹" tabindex="-1">ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹ <a class="header-anchor" href="#ğŸ¯-å®é™…åº”ç”¨æ¡ˆä¾‹" aria-label="Permalink to &quot;ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹&quot;">â€‹</a></h2><h3 id="æ¡ˆä¾‹-1-ç®€å•é—®ç­”æœºå™¨äºº" tabindex="-1">æ¡ˆä¾‹ 1ï¼šç®€å•é—®ç­”æœºå™¨äºº <a class="header-anchor" href="#æ¡ˆä¾‹-1-ç®€å•é—®ç­”æœºå™¨äºº" aria-label="Permalink to &quot;æ¡ˆä¾‹ 1ï¼šç®€å•é—®ç­”æœºå™¨äºº&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_core.messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HumanMessage, AIMessage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯¹è¯å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> chat_bot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_input):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    history.append(HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user_input))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è°ƒç”¨æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(history)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ·»åŠ  AI å›å¤åˆ°å†å²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    history.append(response)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.content</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chat_bot(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chat_bot(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆ‘åˆšæ‰è¯´äº†ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èƒ½è®°ä½ä¸Šä¸‹æ–‡</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="æ¡ˆä¾‹-2-æœç´¢å¢å¼ºé—®ç­”-ç®€å•-rag" tabindex="-1">æ¡ˆä¾‹ 2ï¼šæœç´¢å¢å¼ºé—®ç­”ï¼ˆç®€å• RAGï¼‰ <a class="header-anchor" href="#æ¡ˆä¾‹-2-æœç´¢å¢å¼ºé—®ç­”-ç®€å•-rag" aria-label="Permalink to &quot;æ¡ˆä¾‹ 2ï¼šæœç´¢å¢å¼ºé—®ç­”ï¼ˆç®€å• RAGï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_community.tools.tavily_search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> langchain_openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> search_qa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(question):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 1. æœç´¢ç›¸å…³ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search.invoke(question)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.join([doc[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_results])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 2. ç»“åˆæœç´¢ç»“æœç”Ÿæˆç­”æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;åŸºäºä»¥ä¸‹ä¿¡æ¯å›ç­”é—®é¢˜ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ä¿¡æ¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">é—®é¢˜ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">question</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(prompt)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.content</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">answer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_qa(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LangGraph çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(answer)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="æ¡ˆä¾‹-3-å¤šæ¨¡å‹å¯¹æ¯”" tabindex="-1">æ¡ˆä¾‹ 3ï¼šå¤šæ¨¡å‹å¯¹æ¯” <a class="header-anchor" href="#æ¡ˆä¾‹-3-å¤šæ¨¡å‹å¯¹æ¯”" aria-label="Permalink to &quot;æ¡ˆä¾‹ 3ï¼šå¤šæ¨¡å‹å¯¹æ¯”&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;GPT-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4o&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;GPT-3.5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">question </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;è§£é‡Šé‡å­è®¡ç®—&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name, model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> models.items():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.invoke(question)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> çš„å›ç­”ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.content)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Token ä½¿ç”¨ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.response_metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;token_usage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h2 id="ğŸ”-å¸¸è§é—®é¢˜" tabindex="-1">ğŸ” å¸¸è§é—®é¢˜ <a class="header-anchor" href="#ğŸ”-å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;ğŸ” å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><h3 id="q1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²" tabindex="-1">Q1: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Ÿ <a class="header-anchor" href="#q1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²" aria-label="Permalink to &quot;Q1: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¶ˆæ¯å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Ÿ&quot;">â€‹</a></h3><p><strong>å­—ç¬¦ä¸²æ–¹å¼ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€å•ï¼Œä½†ä¸¢å¤±ä¸Šä¸‹æ–‡</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>æ¶ˆæ¯å¯¹è±¡æ–¹å¼ï¼š</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ æ˜¯åŠ©æ‰‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HumanMessage(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat.invoke(messages)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¿ç•™è§’è‰²ã€å†å²</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>ğŸ”„ æ”¯æŒå¤šè½®å¯¹è¯</li><li>ğŸ­ åŒºåˆ†ç³»ç»Ÿ/ç”¨æˆ·/AI è§’è‰²</li><li>ğŸ“Š æ›´å¥½çš„è°ƒè¯•å’Œæ—¥å¿—</li></ul><h3 id="q2-temperature-0-çœŸçš„å®Œå…¨ç¡®å®šå—" tabindex="-1">Q2: temperature=0 çœŸçš„å®Œå…¨ç¡®å®šå—ï¼Ÿ <a class="header-anchor" href="#q2-temperature-0-çœŸçš„å®Œå…¨ç¡®å®šå—" aria-label="Permalink to &quot;Q2: temperature=0 çœŸçš„å®Œå…¨ç¡®å®šå—ï¼Ÿ&quot;">â€‹</a></h3><p><strong>ä¸å®Œå…¨ç¡®å®šï¼</strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ChatOpenAI(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">temperature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç›¸åŒè¾“å…¥ï¼Œ99% æƒ…å†µè¾“å‡ºç›¸åŒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1+1=?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># â†’ &quot;2&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chat.invoke(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1+1=?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># â†’ &quot;2&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½†æ¨¡å‹æ›´æ–°æˆ–å…¶ä»–å› ç´ å¯èƒ½å¯¼è‡´å¾®å°å·®å¼‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä½•æ—¶ä½¿ç”¨ temperature=0ï¼Ÿ</strong></p><ul><li>âœ… éœ€è¦ä¸€è‡´æ€§çš„ä»»åŠ¡ï¼ˆæµ‹è¯•ã€è¯„ä¼°ï¼‰</li><li>âœ… äº‹å®æ€§å›ç­”</li><li>âŒ ä¸é€‚åˆåˆ›æ„ä»»åŠ¡</li></ul><h3 id="q3-å¦‚ä½•é€‰æ‹©-max-results" tabindex="-1">Q3: å¦‚ä½•é€‰æ‹© max_resultsï¼Ÿ <a class="header-anchor" href="#q3-å¦‚ä½•é€‰æ‹©-max-results" aria-label="Permalink to &quot;Q3: å¦‚ä½•é€‰æ‹© max_resultsï¼Ÿ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœç´¢ç»“æœæ•°é‡æƒè¡¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TavilySearchResults(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><table tabindex="0"><thead><tr><th>max_results</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>1-3</td><td>å¿«é€Ÿã€èšç„¦</td><td>å¯èƒ½é—æ¼ä¿¡æ¯</td></tr><tr><td>5-10</td><td>å…¨é¢</td><td>æˆæœ¬é«˜ã€å™ªéŸ³å¤š</td></tr><tr><td>10+</td><td>æœ€å…¨é¢</td><td>è¶…è¿‡ LLM ä¸Šä¸‹æ–‡é™åˆ¶</td></tr></tbody></table><p><strong>æ¨èï¼š</strong></p><ul><li>ç®€å•é—®é¢˜ï¼š3</li><li>å¤æ‚ç ”ç©¶ï¼š5-10</li><li>å¯¹æ¯”åˆ†æï¼š3-5</li></ul><hr><h2 id="ğŸ“–-æ‰©å±•é˜…è¯»" tabindex="-1">ğŸ“– æ‰©å±•é˜…è¯» <a class="header-anchor" href="#ğŸ“–-æ‰©å±•é˜…è¯»" aria-label="Permalink to &quot;ğŸ“– æ‰©å±•é˜…è¯»&quot;">â€‹</a></h2><ul><li><a href="https://python.langchain.com/" target="_blank" rel="noreferrer">LangChain å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://python.langchain.com/v0.2/docs/concepts/#chat-models" target="_blank" rel="noreferrer">Chat Models æ¦‚å¿µè¯¦è§£</a></li><li><a href="https://openai.com/api/pricing/" target="_blank" rel="noreferrer">OpenAI API å®šä»·</a></li><li><a href="https://tavily.com/" target="_blank" rel="noreferrer">Tavily æœç´¢ API</a></li><li><a href="https://langchain-ai.github.io/langgraph/" target="_blank" rel="noreferrer">LangGraph å®˜æ–¹æ–‡æ¡£</a></li></ul><hr><h2 id="ğŸ‰-ä¸‹ä¸€æ­¥" tabindex="-1">ğŸ‰ ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ğŸ‰-ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ğŸ‰ ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><p>æ­å–œä½ å®Œæˆäº† LangChain Academy åŸºç¡€æ¨¡å—ï¼ä½ å·²ç»æŒæ¡äº†ï¼š</p><p>âœ… LangChain å’Œ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µ âœ… Chat Models çš„åˆå§‹åŒ–å’Œè°ƒç”¨ âœ… æ¶ˆæ¯ç³»ç»Ÿçš„ä½¿ç”¨ âœ… æœç´¢å·¥å…·çš„é›†æˆ âœ… API å¯†é’¥å®‰å…¨ç®¡ç†</p><p><strong>æ¥ä¸‹æ¥å­¦ä¹ ï¼š</strong></p><ol><li><strong>Module 1</strong>ï¼šLangGraph æ ¸å¿ƒæ¦‚å¿µï¼ˆStateã€Graphã€Nodeã€Edgeï¼‰</li><li><strong>Module 2</strong>ï¼šæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Agent</li><li><strong>Module 4</strong>ï¼šé«˜çº§æ¨¡å¼ï¼ˆMap-Reduceã€Sub-graphsï¼‰</li></ol><p><strong>å®è·µå»ºè®®ï¼š</strong></p><ul><li>ğŸ”¨ åŠ¨æ‰‹ä¿®æ”¹ä»£ç ï¼Œå°è¯•ä¸åŒå‚æ•°</li><li>ğŸ§ª æµ‹è¯•ä¸åŒæ¨¡å‹çš„æ•ˆæœ</li><li>ğŸ“ è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•</li><li>ğŸ’¬ åŠ å…¥ç¤¾åŒºè®¨è®º</li></ul><hr><p><strong>æ€»ç»“</strong>ï¼šæœ¬æ¨¡å—æ˜¯ LangGraph å­¦ä¹ ä¹‹æ—…çš„èµ·ç‚¹ã€‚é€šè¿‡æŒæ¡ Chat Models å’Œå·¥å…·é›†æˆï¼Œä½ å·²ç»å…·å¤‡äº†æ„å»º AI åº”ç”¨çš„åŸºç¡€èƒ½åŠ›ã€‚è®°ä½ï¼šLangChain æä¾›<strong>ç»„ä»¶</strong>ï¼ŒLangGraph æä¾›<strong>ç¼–æ’</strong>ï¼Œä¸¤è€…ç»“åˆæ‰èƒ½æ„å»ºå¼ºå¤§çš„ Agent ç³»ç»Ÿï¼</p>`,194)])])}const g=a(e,[["render",p]]);export{o as __pageData,g as default};
