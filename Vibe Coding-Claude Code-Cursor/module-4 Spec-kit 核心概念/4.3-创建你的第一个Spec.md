# 4.3 åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Spec

## ğŸ¯ æœ¬ç« ç›®æ ‡

é€šè¿‡ 3 ä¸ªé€’è¿›å¼å®æˆ˜æ¡ˆä¾‹ï¼Œä½ å°†å­¦ä¼šï¼š
- âœ… ä»é›¶å¼€å§‹ä½¿ç”¨ Spec-kit åˆ›å»ºé¡¹ç›®
- âœ… ç¼–å†™é«˜è´¨é‡çš„è§„æ ¼è¯´æ˜ä¹¦ï¼ˆspec.mdï¼‰
- âœ… ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆï¼ˆplan.mdï¼‰å’Œä»»åŠ¡æ¸…å•ï¼ˆtasks.mdï¼‰
- âœ… ä½¿ç”¨ AI è‡ªåŠ¨å®ç°ä»£ç 

**å­¦ä¹ è·¯å¾„ï¼š**
```
æ¡ˆä¾‹ 1ï¼ˆ10 åˆ†é’Ÿï¼‰ â†’ ä¸ªäººä½œå“é›†ï¼ˆé™æ€ç½‘ç«™ï¼‰
   åŸºç¡€ï¼šä½“éªŒå®Œæ•´æµç¨‹

æ¡ˆä¾‹ 2ï¼ˆ30 åˆ†é’Ÿï¼‰ â†’ ç›¸å†Œç®¡ç†å™¨ï¼ˆå‰ç«¯åº”ç”¨ï¼‰
   è¿›é˜¶ï¼šæ¾„æ¸…æµç¨‹ + è´¨é‡éªŒè¯

æ¡ˆä¾‹ 3ï¼ˆ60 åˆ†é’Ÿï¼‰ â†’ å¾…åŠäº‹é¡¹ APIï¼ˆå…¨æ ˆåº”ç”¨ï¼‰
   é«˜çº§ï¼šå¥‘çº¦ä¼˜å…ˆ + å‰åç«¯ååŒ
```

---

## ğŸ“˜ æ¡ˆä¾‹ 1ï¼šä¸ªäººä½œå“é›†ç½‘ç«™ï¼ˆ10 åˆ†é’Ÿï¼‰

### é¡¹ç›®èƒŒæ™¯

**éœ€æ±‚ï¼š** åˆ›å»ºä¸€ä¸ªç®€å•çš„ä¸ªäººä½œå“é›†ç½‘ç«™ï¼Œå±•ç¤ºä½ çš„é¡¹ç›®ã€æŠ€èƒ½å’Œè”ç³»æ–¹å¼ã€‚

**æŠ€æœ¯çº¦æŸï¼š**
- é™æ€ç½‘ç«™ï¼ˆæ— æœåŠ¡å™¨ï¼‰
- ä¸ä½¿ç”¨å‰ç«¯æ¡†æ¶ï¼ˆçº¯ HTML/CSS/JavaScriptï¼‰
- æœ€å°ä¾èµ–

### Step 1: å®‰è£… Spec-kit

```bash
# æ–¹å¼ 1ï¼šæ°¸ä¹…å®‰è£…ï¼ˆæ¨èï¼‰
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git

# éªŒè¯å®‰è£…
specify --version

# æ–¹å¼ 2ï¼šä¸€æ¬¡æ€§ä½¿ç”¨ï¼ˆæ— éœ€å®‰è£…ï¼‰
uvx --from git+https://github.com/github/spec-kit.git specify init portfolio
```

### Step 2: åˆå§‹åŒ–é¡¹ç›®

```bash
# åˆ›å»ºé¡¹ç›®
specify init portfolio --ai claude

# è¿›å…¥é¡¹ç›®ç›®å½•
cd portfolio
```

**ç”Ÿæˆçš„ç»“æ„ï¼š**
```
portfolio/
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ commands/
â”‚       â”œâ”€â”€ speckit.constitution.md
â”‚       â”œâ”€â”€ speckit.specify.md
â”‚       â”œâ”€â”€ speckit.plan.md
â”‚       â”œâ”€â”€ speckit.tasks.md
â”‚       â””â”€â”€ ...
â”œâ”€â”€ .specify/
â”‚   â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ templates/
â”œâ”€â”€ specs/                    # å³å°†åˆ›å»º
â””â”€â”€ .gitignore
```

### Step 3: åˆ›å»ºå®ªæ³•ï¼ˆå¯é€‰ä½†æ¨èï¼‰

åœ¨ Claude Code ä¸­è¾“å…¥ï¼š
```
/speckit.constitution
```

**AI ä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼š**
```
Q: è¿™ä¸ªé¡¹ç›®æœ‰ä»€ä¹ˆä¸å¯åå•†çš„åŸåˆ™å—ï¼Ÿ

A: é™æ€ç½‘ç«™ï¼Œä¸ç”¨æœåŠ¡å™¨ï¼Œåªç”¨ HTML/CSS/JavaScriptï¼Œä¸ç”¨ä»»ä½•å‰ç«¯æ¡†æ¶
```

**ç”Ÿæˆçš„å®ªæ³•ï¼ˆ`.specify/memory/constitution.md`ï¼‰ï¼š**
```markdown
# Portfolio Constitution v1.0.0

## Article I: Static-First Architecture
æ‰€æœ‰åŠŸèƒ½å¿…é¡»åœ¨æµè§ˆå™¨ç«¯å®ç°ï¼Œç¦æ­¢æœåŠ¡å™¨ç«¯å¤„ç†ã€‚

Rationale: ç®€åŒ–éƒ¨ç½²ï¼Œé™ä½æˆæœ¬ï¼Œæå‡æ€§èƒ½
Compliance: æ‰€æœ‰ä»£ç å¿…é¡»æ˜¯å®¢æˆ·ç«¯ JavaScript

## Article II: Zero Framework Dependency
ç¦æ­¢ä½¿ç”¨å‰ç«¯æ¡†æ¶ï¼ˆReact, Vue, Angular ç­‰ï¼‰

Rationale: é•¿æœŸå¯ç»´æŠ¤æ€§ï¼Œå¿«é€ŸåŠ è½½
Compliance: ä»…ä½¿ç”¨åŸç”Ÿ Web APIs

## Article III: Minimal Dependencies
å¤–éƒ¨ä¾èµ–ä¸è¶…è¿‡ 1 ä¸ªï¼ˆä»…å…è®¸æ„å»ºå·¥å…·ï¼‰

Rationale: å‡å°‘ç»´æŠ¤è´Ÿæ‹…ï¼Œæå‡å®‰å…¨æ€§
Compliance: package.json ä¸­ dependencies å­—æ®µæœ€å¤š 1 é¡¹

## Constraints
- Performance: First Contentful Paint < 1 second
- Compatibility: æ”¯æŒç°ä»£æµè§ˆå™¨ï¼ˆChrome 90+, Firefox 88+, Safari 14+ï¼‰
- Deployment: å¯éƒ¨ç½²åˆ° GitHub Pages / Netlify / Vercel
```

### Step 4: ç¼–å†™è§„æ ¼è¯´æ˜

```bash
/speckit.specify ä¸ªäººä½œå“é›†ç½‘ç«™ï¼ŒåŒ…å«é¦–é¡µã€é¡¹ç›®å±•ç¤ºã€æŠ€èƒ½åˆ—è¡¨ã€è”ç³»æ–¹å¼
```

**AI ç”Ÿæˆçš„ `specs/001-portfolio/spec.md`ï¼š**

```markdown
# Feature: Personal Portfolio Website

**Feature Branch**: 001-portfolio
**Created**: 2025-01-15
**Status**: Draft

## User Scenarios

### P1: Homepage with Introduction
**Description**: è®¿å®¢æ‰“å¼€ç½‘ç«™æ—¶çœ‹åˆ°ä¸ªäººä»‹ç»ã€ç…§ç‰‡å’Œå¿«é€Ÿå¯¼èˆª

**Priority**: P1 (Critical)
**Priority Justification**: é¦–é¡µæ˜¯è®¿å®¢çš„ç¬¬ä¸€å°è±¡ï¼Œå†³å®šæ˜¯å¦ç»§ç»­æµè§ˆ

**Independent Test**: è®¿é—®ç½‘ç«™æ ¹ç›®å½•ï¼ŒéªŒè¯é¡µé¢åŠ è½½ä¸”æ˜¾ç¤ºå®Œæ•´å†…å®¹

**Acceptance Criteria**:
- Given è®¿å®¢è®¿é—®ç½‘ç«™æ ¹ URL
- When é¡µé¢åŠ è½½å®Œæˆ
- Then æ˜¾ç¤ºä¸ªäººç…§ç‰‡ã€å§“åã€èŒä½å’Œç®€ä»‹ï¼ˆ< 200 å­—ï¼‰
- And æ˜¾ç¤ºå¯¼èˆªèœå•ï¼ˆé¡¹ç›®ã€æŠ€èƒ½ã€è”ç³»ï¼‰
- And First Contentful Paint < 1 second

### P2: Projects Showcase
**Description**: å±•ç¤ºä»£è¡¨æ€§é¡¹ç›®ï¼ŒåŒ…å«æè¿°ã€æŠ€æœ¯æ ˆå’Œé“¾æ¥

**Priority**: P2 (Important)
**Priority Justification**: é¡¹ç›®å±•ç¤ºæ˜¯ä½œå“é›†çš„æ ¸å¿ƒä»·å€¼

**Acceptance Criteria**:
- Given è®¿å®¢ç‚¹å‡»"é¡¹ç›®"å¯¼èˆª
- When é¡¹ç›®é¡µé¢åŠ è½½
- Then æ˜¾ç¤ºè‡³å°‘ 3 ä¸ªé¡¹ç›®
- And æ¯ä¸ªé¡¹ç›®æ˜¾ç¤ºï¼šæ ‡é¢˜ã€æè¿°ã€æŠ€æœ¯æ ˆæ ‡ç­¾ã€é“¾æ¥ã€æˆªå›¾
- And ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°é¡¹ç›®è¯¦æƒ…æˆ– GitHub

### P3: Skills List
**Description**: åˆ†ç±»å±•ç¤ºæŠ€èƒ½ï¼ˆç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ã€å·¥å…·ï¼‰

**Priority**: P3 (Nice-to-have)

**Acceptance Criteria**:
- Given è®¿å®¢ç‚¹å‡»"æŠ€èƒ½"å¯¼èˆª
- When æŠ€èƒ½é¡µé¢åŠ è½½
- Then æ˜¾ç¤ºæŠ€èƒ½åˆ†ç±»ï¼ˆå‰ç«¯ã€åç«¯ã€å·¥å…·ï¼‰
- And æ¯ä¸ªæŠ€èƒ½æ˜¾ç¤ºç†Ÿç»ƒåº¦ï¼ˆåˆçº§/ä¸­çº§/é«˜çº§ï¼‰

### P4: Contact Form
**Description**: è®¿å®¢å¯ä»¥é€šè¿‡è¡¨å•å‘é€æ¶ˆæ¯

**Priority**: P3 (Nice-to-have)

**Acceptance Criteria**:
- Given è®¿å®¢åœ¨è”ç³»é¡µé¢
- When å¡«å†™å§“åã€é‚®ç®±ã€æ¶ˆæ¯å¹¶æäº¤
- Then æ˜¾ç¤ºæäº¤æˆåŠŸä¿¡æ¯
- And NEEDS CLARIFICATION: æ¶ˆæ¯å¦‚ä½•å‘é€ï¼Ÿï¼ˆæ— æœåŠ¡å™¨çº¦æŸï¼‰

## Requirements

### Functional Requirements
- FR-001: ç½‘ç«™ MUST åŠ è½½æ‰€æœ‰å†…å®¹åœ¨ 3 ç§’å†…ï¼ˆ3G ç½‘ç»œï¼‰
- FR-002: ç½‘ç«™ MUST å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯ã€å¹³æ¿ã€æ¡Œé¢ï¼‰
- FR-003: é¡¹ç›® MUST æ˜¾ç¤ºæŠ€æœ¯æ ˆæ ‡ç­¾
- FR-004: NEEDS CLARIFICATION: è”ç³»è¡¨å•æ¶ˆæ¯å¦‚ä½•å¤„ç†ï¼Ÿ

### Key Entities
- **Project**:
  - title: é¡¹ç›®æ ‡é¢˜
  - description: ç®€çŸ­æè¿°ï¼ˆ< 150 å­—ï¼‰
  - tech_stack: æŠ€æœ¯æ ˆåˆ—è¡¨
  - links: {github: URL, demo: URL}
  - image: æˆªå›¾ URL

- **Skill**:
  - name: æŠ€èƒ½åç§°
  - category: åˆ†ç±»ï¼ˆfrontend/backend/toolsï¼‰
  - proficiency: ç†Ÿç»ƒåº¦ï¼ˆbeginner/intermediate/advancedï¼‰

## Success Criteria
- SC-001: é¡µé¢åŠ è½½ First Contentful Paint < 1 second
- SC-002: æ‰€æœ‰å›¾ç‰‡ä¼˜åŒ–å < 200KB
- SC-003: Lighthouse Performance Score > 90
- SC-004: ç§»åŠ¨ç«¯å¯ç”¨æ€§å¾—åˆ† > 95

## Edge Cases
### Slow Network
- Scenario: ç”¨æˆ·åœ¨æ…¢é€Ÿç½‘ç»œç¯å¢ƒ
- Expected Behavior: æ˜¾ç¤ºåŠ è½½è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œå›¾ç‰‡æ‡’åŠ è½½

### Missing Data
- Scenario: æŸäº›é¡¹ç›®ç¼ºå°‘æˆªå›¾
- Expected Behavior: æ˜¾ç¤ºå ä½å›¾ï¼ˆplaceholderï¼‰

### Browser Compatibility
- Scenario: ç”¨æˆ·ä½¿ç”¨æ—§æµè§ˆå™¨
- Expected Behavior: æ˜¾ç¤º"è¯·å‡çº§æµè§ˆå™¨"æç¤º
```

### Step 5: æ¾„æ¸…é˜¶æ®µï¼ˆè§£å†³ NEEDS CLARIFICATIONï¼‰

```bash
/speckit.clarify
```

**AI æé—®ï¼š**
```
Question 1 of 2: Contact Form Message Handling

ç”±äºé¡¹ç›®å¿…é¡»æ˜¯é™æ€ç½‘ç«™ï¼ˆæ— æœåŠ¡å™¨ï¼‰ï¼Œè”ç³»è¡¨å•æ¶ˆæ¯å¦‚ä½•å¤„ç†ï¼Ÿ

Options:
A) ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆFormspree, Netlify Formsï¼‰
B) ä»…æ˜¾ç¤ºé‚®ç®±åœ°å€ï¼Œæ— å®é™…è¡¨å•
C) ä½¿ç”¨ mailto: é“¾æ¥æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯

Recommended: Aï¼ˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰- ç”¨æˆ·ä½“éªŒæœ€ä½³ï¼Œç¬¦åˆé™æ€æ¶æ„

Your choice: [A]
```

**AI æ›´æ–° spec.mdï¼š**
```markdown
- FR-004: è”ç³»è¡¨å• MUST ä½¿ç”¨ Formspree å‘é€æ¶ˆæ¯ï¼ˆå…è´¹ tierï¼‰
- Added Edge Case: Formspree é…é¢ç”¨å®Œ â†’ æ˜¾ç¤ºé™çº§åˆ° mailto: é“¾æ¥
```

### Step 6: æŠ€æœ¯æ–¹æ¡ˆ

```bash
/speckit.plan ç”¨ Vite ä½œä¸ºæ„å»ºå·¥å…·ï¼Œçº¯ HTML/CSS/JavaScriptï¼ŒFormspree å¤„ç†è¡¨å•
```

**ç”Ÿæˆ `specs/001-portfolio/plan.md`ï¼ˆèŠ‚é€‰ï¼‰ï¼š**

```markdown
# Implementation Plan: Personal Portfolio Website

## Technical Context
- **Language**: HTML5, CSS3, JavaScript (ES2020+)
- **Build Tool**: Vite 5.0+ï¼ˆä»…æ­¤ä¸€ä¸ªä¾èµ–ï¼‰
- **Styling**: CSS Grid + Flexboxï¼ˆæ—  CSS æ¡†æ¶ï¼‰
- **Form Handling**: Formspreeï¼ˆå…è´¹ tierï¼‰
- **Deployment**: GitHub Pages
- **Performance Goals**: FCP < 1s, Lighthouse > 90

## Constitution Check
âœ… Article I: Static-Firstï¼ˆæ‰€æœ‰é€»è¾‘åœ¨å®¢æˆ·ç«¯ï¼‰
âœ… Article II: Zero Frameworkï¼ˆæ—  React/Vueï¼‰
âœ… Article III: Minimal Dependenciesï¼ˆä»… Viteï¼‰

## Project Structure
```
portfolio/
â”œâ”€â”€ index.html
â”œâ”€â”€ projects.html
â”œâ”€â”€ skills.html
â”œâ”€â”€ contact.html
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ responsive.css
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js
â”‚   â””â”€â”€ form.js
â””â”€â”€ images/
    â”œâ”€â”€ profile.jpg
    â””â”€â”€ projects/
```

## Data Model
```javascript
// projects.jsï¼ˆé™æ€æ•°æ®ï¼‰
const projects = [
  {
    id: 1,
    title: "E-commerce Platform",
    description: "Full-stack online store with payment integration",
    tech_stack: ["React", "Node.js", "PostgreSQL"],
    links: {
      github: "https://github.com/user/ecommerce",
      demo: "https://demo.example.com"
    },
    image: "images/projects/ecommerce.png"
  },
  // ... more projects
];
```

## API Contract
N/Aï¼ˆé™æ€ç½‘ç«™ï¼Œæ— åç«¯ APIï¼‰

### External Service Integration
```javascript
// Formspree Integration
// Form action: https://formspree.io/f/{YOUR_FORM_ID}

<form action="https://formspree.io/f/abc123" method="POST">
  <input type="text" name="name" required>
  <input type="email" name="_replyto" required>
  <textarea name="message" required></textarea>
  <button type="submit">Send</button>
</form>
```
```

### Step 7: ä»»åŠ¡åˆ†è§£

```bash
/speckit.tasks
```

**ç”Ÿæˆ `specs/001-portfolio/tasks.md`ï¼ˆèŠ‚é€‰ï¼‰ï¼š**

```markdown
# Tasks: Personal Portfolio Website

## Phase 1: Setup
- [ ] T001 Initialize Vite project at /absolute/path/portfolio/
  Command: `npm create vite@latest . -- --template vanilla`

- [ ] T002 [P] Configure project structure at /absolute/path/portfolio/
  Create directories: css/, js/, images/, images/projects/

- [ ] T003 [P] Add .gitignore at /absolute/path/portfolio/.gitignore
  Ignore: node_modules/, dist/, .DS_Store

## Phase 2: Foundation
- [ ] T004 Create base HTML template at /absolute/path/portfolio/index.html
  Include: meta tags, viewport, semantic HTML5

- [ ] T005 Implement CSS Grid layout at /absolute/path/portfolio/css/style.css
  Sections: header, nav, main, footer

- [ ] T006 Add responsive styles at /absolute/path/portfolio/css/responsive.css
  Breakpoints: 768px (tablet), 480px (mobile)

## Phase 3: User Stories

### US1: Homepage with Introduction
- [ ] T007 [US1] Create hero section at /absolute/path/portfolio/index.html
  Content: Profile image, name, title, bio (< 200 words)

- [ ] T008 [P] [US1] Style hero section at /absolute/path/portfolio/css/style.css
  Layout: Centered, flexbox, profile image circle (200px)

- [ ] T009 [P] [US1] Add navigation at /absolute/path/portfolio/index.html
  Links: Projects, Skills, Contact

**CHECKPOINT**: Verify homepage loads < 1s, responsive on mobile

### US2: Projects Showcase
- [ ] T010 [US2] Create projects data at /absolute/path/portfolio/js/projects.js
  Data: Array of 3+ projects with all required fields

- [ ] T011 [US2] Build projects page at /absolute/path/portfolio/projects.html
  Layout: Grid of project cards

- [ ] T012 [P] [US2] Implement card component at /absolute/path/portfolio/js/main.js
  Function: renderProjectCard(project) â†’ HTML string

- [ ] T013 [US2] Add lazy loading for images at /absolute/path/portfolio/js/main.js
  Use: Intersection Observer API

**CHECKPOINT**: Verify all projects display, images lazy load

### US3: Skills List
- [ ] T014 [US3] Create skills page at /absolute/path/portfolio/skills.html
  Sections: Frontend, Backend, Tools

- [ ] T015 [P] [US3] Style skill tags at /absolute/path/portfolio/css/style.css
  Design: Colored tags with proficiency indicator

### US4: Contact Form
- [ ] T016 [US4] Integrate Formspree at /absolute/path/portfolio/contact.html
  Action: https://formspree.io/f/{YOUR_ID}

- [ ] T017 [P] [US4] Add form validation at /absolute/path/portfolio/js/form.js
  Validate: Email format, required fields

- [ ] T018 [US4] Implement success message at /absolute/path/portfolio/js/form.js
  Display: "Message sent!" modal

## Phase 4: Polish
- [ ] T019 Optimize images at /absolute/path/portfolio/images/
  Tools: ImageOptim, convert to WebP

- [ ] T020 Run Lighthouse audit
  Target: Performance > 90, Accessibility > 95

- [ ] T021 Add meta tags for SEO at /absolute/path/portfolio/index.html
  Include: description, keywords, og:image

- [ ] T022 Test on mobile devices
  Browsers: iOS Safari, Android Chrome
```

### Step 8: å®ç°

```bash
/speckit.implement
```

**AI ä¼šæŒ‰ç…§ tasks.md é¡ºåºè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼š**

1. **åˆå§‹åŒ–é¡¹ç›®**ï¼ˆT001-T003ï¼‰
2. **åˆ›å»ºåŸºç¡€å¸ƒå±€**ï¼ˆT004-T006ï¼‰
3. **å®ç°é¦–é¡µ**ï¼ˆT007-T009ï¼‰
4. **å®ç°é¡¹ç›®å±•ç¤º**ï¼ˆT010-T013ï¼‰
5. **å®ç°æŠ€èƒ½åˆ—è¡¨**ï¼ˆT014-T015ï¼‰
6. **å®ç°è”ç³»è¡¨å•**ï¼ˆT016-T018ï¼‰
7. **ä¼˜åŒ–å’Œæ‰“ç£¨**ï¼ˆT019-T022ï¼‰

**æœ€ç»ˆè¾“å‡ºï¼š**
```
portfolio/
â”œâ”€â”€ index.htmlï¼ˆé¦–é¡µï¼Œ175 è¡Œï¼‰
â”œâ”€â”€ projects.htmlï¼ˆé¡¹ç›®é¡µï¼Œ120 è¡Œï¼‰
â”œâ”€â”€ skills.htmlï¼ˆæŠ€èƒ½é¡µï¼Œ95 è¡Œï¼‰
â”œâ”€â”€ contact.htmlï¼ˆè”ç³»é¡µï¼Œ88 è¡Œï¼‰
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.cssï¼ˆä¸»æ ·å¼ï¼Œ230 è¡Œï¼‰
â”‚   â””â”€â”€ responsive.cssï¼ˆå“åº”å¼ï¼Œ85 è¡Œï¼‰
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.jsï¼ˆä¸»é€»è¾‘ï¼Œ150 è¡Œï¼‰
â”‚   â”œâ”€â”€ projects.jsï¼ˆæ•°æ®ï¼Œ60 è¡Œï¼‰
â”‚   â””â”€â”€ form.jsï¼ˆè¡¨å•éªŒè¯ï¼Œ45 è¡Œï¼‰
â””â”€â”€ images/
    â”œâ”€â”€ profile.jpg
    â””â”€â”€ projects/
        â”œâ”€â”€ project1.png
        â”œâ”€â”€ project2.png
        â””â”€â”€ project3.png
```

### Step 9: éªŒè¯

```bash
# æœ¬åœ°è¿è¡Œ
npm run dev

# æ‰“å¼€æµè§ˆå™¨
# http://localhost:5173

# è¿è¡Œ Lighthouse å®¡è®¡
# Chrome DevTools â†’ Lighthouse â†’ Generate Report

# éªŒè¯ç»“æœï¼š
# âœ… Performance: 95
# âœ… Accessibility: 98
# âœ… Best Practices: 100
# âœ… SEO: 92
```

### Step 10: éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# éƒ¨ç½²åˆ° GitHub Pages
git add .
git commit -m "Initial portfolio implementation"
git push origin main

# åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­å¯ç”¨ GitHub Pages
# Settings â†’ Pages â†’ Source: main branch / docs folder
```

---

## ğŸ“™ æ¡ˆä¾‹ 2ï¼šç›¸å†Œç®¡ç†å™¨ï¼ˆ30 åˆ†é’Ÿï¼‰

### é¡¹ç›®èƒŒæ™¯

**éœ€æ±‚ï¼š** åˆ›å»ºä¸€ä¸ªç›¸å†Œç®¡ç†å™¨ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºç›¸å†Œã€ä¸Šä¼ ç…§ç‰‡ã€æŸ¥çœ‹ç…§ç‰‡

**æŠ€æœ¯è¦æ±‚ï¼š**
- å‰ç«¯ï¼šReact 18 + TypeScript
- å­˜å‚¨ï¼šæµè§ˆå™¨ IndexedDB
- æ„å»ºï¼šVite

### å®Œæ•´æµç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼Œé‡ç‚¹çªå‡ºå·®å¼‚ï¼‰

#### Step 1-2: åˆå§‹åŒ–ï¼ˆåŒæ¡ˆä¾‹ 1ï¼‰

```bash
specify init photo-album --ai claude
cd photo-album
```

#### Step 3: å®ªæ³•

```bash
/speckit.constitution
```

```markdown
# Photo Album Constitution v1.0

## Article I: Offline-First Architecture
æ‰€æœ‰åŠŸèƒ½å¿…é¡»ç¦»çº¿å¯ç”¨ï¼ˆä½¿ç”¨ IndexedDBï¼‰

## Article II: TypeScript Mandatory
æ‰€æœ‰ä»£ç å¿…é¡»ä½¿ç”¨ TypeScriptï¼Œç±»å‹è¦†ç›–ç‡ > 95%

## Article III: Component-Driven UI
UI å¿…é¡»åŸºäºå¯å¤ç”¨ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶æœ‰å•å…ƒæµ‹è¯•

## Constraints
- Storage: æœ€å¤§ 50MB IndexedDB quota
- Performance: ç›¸å†ŒåŠ è½½ < 500ms
- UX: æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
```

#### Step 4: è§„æ ¼

```bash
/speckit.specify ç›¸å†Œç®¡ç†å™¨ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºç›¸å†Œã€ä¸Šä¼ ç…§ç‰‡ã€æŸ¥çœ‹ç¼©ç•¥å›¾ã€åˆ é™¤ç…§ç‰‡
```

**ç”Ÿæˆçš„ spec.md**ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰ï¼š

```markdown
## User Scenarios

### P1: Create Album
**Priority**: P1
**Acceptance Criteria**:
- Given ç”¨æˆ·åœ¨ä¸»é¡µ
- When ç‚¹å‡»"åˆ›å»ºç›¸å†Œ"
- Then å¼¹å‡ºè¡¨å•è¾“å…¥ç›¸å†Œåç§°
- And ä¿å­˜åç›¸å†Œæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- And ç›¸å†Œåˆ›å»ºè€—æ—¶ < 200ms

### P2: Upload Photos
**Priority**: P1
**Acceptance Criteria**:
- Given ç”¨æˆ·åœ¨ç›¸å†Œè¯¦æƒ…é¡µ
- When æ‹–æ‹½ç…§ç‰‡æ–‡ä»¶åˆ°ä¸Šä¼ åŒº
- Then æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ï¼ˆæ¯å¼ ç…§ç‰‡ï¼‰
- And ä¸Šä¼ å®Œæˆåæ˜¾ç¤ºç¼©ç•¥å›¾ï¼ˆ150x150pxï¼‰
- And æ”¯æŒ JPG, PNG, GIFï¼ˆæœ€å¤§ 5MB/å¼ ï¼‰

### P3: View Photos
**Priority**: P2
**Acceptance Criteria**:
- Given ç”¨æˆ·åœ¨ç›¸å†Œè¯¦æƒ…é¡µ
- When ç‚¹å‡»ç…§ç‰‡ç¼©ç•¥å›¾
- Then åœ¨æ¨¡æ€æ¡†ä¸­æ˜¾ç¤ºåŸå›¾
- And æ”¯æŒå·¦å³ç®­å¤´åˆ‡æ¢ç…§ç‰‡
- And æ˜¾ç¤ºç…§ç‰‡å…ƒæ•°æ®ï¼ˆæ–‡ä»¶åã€å¤§å°ã€ä¸Šä¼ æ—¶é—´ï¼‰

### NEEDS CLARIFICATION
- åˆ é™¤ç…§ç‰‡æ˜¯å¦éœ€è¦äºŒæ¬¡ç¡®è®¤ï¼Ÿ
- ç›¸å†Œæ•°é‡æœ‰é™åˆ¶å—ï¼Ÿ
```

#### Step 5: æ¾„æ¸…

```bash
/speckit.clarify
```

**Q1: åˆ é™¤ç…§ç‰‡ç¡®è®¤**
```
é€‰é¡¹ï¼š
A) éœ€è¦äºŒæ¬¡ç¡®è®¤ï¼ˆé˜²è¯¯åˆ ï¼‰
B) ç›´æ¥åˆ é™¤ï¼ˆå¿«é€Ÿæ“ä½œï¼‰
C) è½¯åˆ é™¤ + 30 å¤©æ¢å¤æœŸ

æ¨èï¼šA

ä½ çš„é€‰æ‹©ï¼šA

æ›´æ–°ï¼š
- FR-015: åˆ é™¤ç…§ç‰‡å¿…é¡»å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
- Edge Case: è¯¯åˆ  â†’ æ˜¾ç¤º Undo æç¤ºï¼ˆ5 ç§’ï¼‰
```

**Q2: ç›¸å†Œæ•°é‡é™åˆ¶**
```
æ¨èï¼š50 ä¸ªç›¸å†Œï¼ˆé¿å… IndexedDB è¿‡å¤§ï¼‰

ä½ çš„é€‰æ‹©ï¼š50

æ›´æ–°ï¼š
- FR-016: ç›¸å†Œæ•°é‡é™åˆ¶ 50 ä¸ª
- Edge Case: è¾¾åˆ°ä¸Šé™ â†’ æ˜¾ç¤º"è¯·åˆ é™¤æ—§ç›¸å†Œ"æç¤º
```

#### Step 6: æŠ€æœ¯æ–¹æ¡ˆ

```bash
/speckit.plan React 18 + TypeScript + Viteï¼Œç”¨ Dexie.js å°è£… IndexedDB
```

**ç”Ÿæˆçš„ plan.md**ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰ï¼š

```markdown
## Technical Context
- Language: TypeScript 5.0+
- Framework: React 18.2+
- State Management: Zustand 4.0
- Database: Dexie.js (IndexedDB wrapper)
- Build Tool: Vite 5.0
- Testing: Vitest + React Testing Library

## Data Model

```typescript
// src/types/index.ts
export interface Album {
  id: string;  // UUID
  name: string;
  created_at: number;  // Unix timestamp
  photo_count: number;
}

export interface Photo {
  id: string;
  album_id: string;
  filename: string;
  data: Blob;  // åŸå›¾
  thumbnail: Blob;  // ç¼©ç•¥å›¾ 150x150
  size: number;  // bytes
  uploaded_at: number;
}
```

## Database Schema (Dexie)

```typescript
// src/db.ts
import Dexie, { Table } from 'dexie';

export class PhotoAlbumDB extends Dexie {
  albums!: Table<Album>;
  photos!: Table<Photo>;

  constructor() {
    super('PhotoAlbumDB');
    this.version(1).stores({
      albums: 'id, name, created_at',
      photos: 'id, album_id, uploaded_at'
    });
  }
}

export const db = new PhotoAlbumDB();
```

## Component Structure

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ AlbumList.tsxï¼ˆç›¸å†Œåˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ AlbumCard.tsxï¼ˆå•ä¸ªç›¸å†Œå¡ç‰‡ï¼‰
â”‚   â”œâ”€â”€ PhotoUploader.tsxï¼ˆç…§ç‰‡ä¸Šä¼ ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ PhotoGrid.tsxï¼ˆç…§ç‰‡ç½‘æ ¼ï¼‰
â”‚   â”œâ”€â”€ PhotoModal.tsxï¼ˆç…§ç‰‡æŸ¥çœ‹å™¨ï¼‰
â”‚   â””â”€â”€ DeleteConfirmDialog.tsxï¼ˆåˆ é™¤ç¡®è®¤ï¼‰
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAlbums.tsï¼ˆç›¸å†Œæ“ä½œï¼‰
â”‚   â””â”€â”€ usePhotos.tsï¼ˆç…§ç‰‡æ“ä½œï¼‰
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ albumService.tsï¼ˆç›¸å†Œ CRUDï¼‰
â”‚   â””â”€â”€ photoService.tsï¼ˆç…§ç‰‡ CRUD + ç¼©ç•¥å›¾ç”Ÿæˆï¼‰
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.tsï¼ˆç±»å‹å®šä¹‰ï¼‰
â””â”€â”€ db.tsï¼ˆDexie æ•°æ®åº“ï¼‰
```

## Constitution Check
âœ… Article I: Offline-Firstï¼ˆIndexedDBï¼‰
âœ… Article II: TypeScriptï¼ˆæ‰€æœ‰æ–‡ä»¶ .ts/.tsxï¼‰
âœ… Article III: Component-Drivenï¼ˆ12 ä¸ªå¯å¤ç”¨ç»„ä»¶ï¼‰
```

#### Step 7: ä»»åŠ¡åˆ†è§£

```bash
/speckit.tasks
```

**tasks.md**ï¼ˆèŠ‚é€‰ï¼‰ï¼š

```markdown
## Phase 1: Setup
- [ ] T001 Initialize Vite + React + TypeScript project
- [ ] T002 [P] Install dependencies (Dexie, Zustand, React Testing Library)
- [ ] T003 [P] Configure TypeScript strict mode

## Phase 2: Foundation
- [ ] T004 Create Dexie database at /absolute/path/src/db.ts
- [ ] T005 Implement Album service at /absolute/path/src/services/albumService.ts
  Functions:
    - createAlbum(name: string): Promise<string>
    - getAlbums(): Promise<Album[]>
    - deleteAlbum(id: string): Promise<void>

- [ ] T006 Implement Photo service at /absolute/path/src/services/photoService.ts
  Functions:
    - uploadPhoto(albumId, file: File): Promise<string>
    - generateThumbnail(file: File): Promise<Blob>
    - getPhotos(albumId): Promise<Photo[]>
    - deletePhoto(id: string): Promise<void>

## Phase 3: User Stories

### US1: Create Album
- [ ] T007 [US1] Create AlbumList component at /absolute/path/src/components/AlbumList.tsx
  Props: none
  State: albums from useAlbums hook
  Render: Grid of AlbumCard components + "Create" button

- [ ] T008 [P] [US1] Create AlbumCard component at /absolute/path/src/components/AlbumCard.tsx
  Props: album: Album, onDelete: () => void
  Render: Album name, photo count, delete button

- [ ] T009 [US1] Implement useAlbums hook at /absolute/path/src/hooks/useAlbums.ts
  State management: Zustand store
  Methods: createAlbum, loadAlbums, deleteAlbum

- [ ] T010 [P] [US1] Write tests at /absolute/path/src/components/AlbumList.test.tsx
  Test cases:
    - renders empty state
    - renders album list
    - creates album on button click
    - deletes album with confirmation

**CHECKPOINT**: Create album, verify persists after refresh

### US2: Upload Photos (Drag & Drop)
- [ ] T011 [US2] Create PhotoUploader at /absolute/path/src/components/PhotoUploader.tsx
  Features:
    - Drag & drop zone
    - File input fallback
    - Upload progress per file
    - Validation (file type, size)

- [ ] T012 [P] [US2] Implement thumbnail generation at /absolute/path/src/services/photoService.ts
  Function: generateThumbnail(file): Promise<Blob>
  Logic:
    1. Create canvas 150x150
    2. Draw image with aspect ratio preserved
    3. Convert to Blob (JPEG, quality 0.8)

- [ ] T013 [US2] Create PhotoGrid at /absolute/path/src/components/PhotoGrid.tsx
  Props: photos: Photo[]
  Render: Grid of thumbnails (CSS Grid, 4 columns)

**CHECKPOINT**: Upload photos, verify thumbnails generated

### US3: View Photos
- [ ] T014 [US3] Create PhotoModal at /absolute/path/src/components/PhotoModal.tsx
  Props: photo: Photo, onClose, onNext, onPrev
  Features:
    - Full-size image
    - Left/right arrows
    - Metadata display
    - Keyboard navigation (â†/â†’/Esc)

## Phase 4: Polish
- [ ] T015 Add TypeScript coverage check
  Target: > 95% (no `any` types)

- [ ] T016 Implement error handling
  - IndexedDB quota exceeded â†’ show warning
  - File upload fails â†’ retry logic

- [ ] T017 Performance optimization
  - Lazy load photos (virtualization)
  - Debounce search input
  - Memoize thumbnail rendering
```

#### Step 8: å®ç°

```bash
/speckit.implement
```

AI æŒ‰ç…§ tasks é¡ºåºç”Ÿæˆæ‰€æœ‰ä»£ç ï¼ˆçº¦ 1,200 è¡Œ TypeScript/TSXï¼‰

#### Step 9: éªŒè¯

```bash
# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev

# æµ‹è¯•æµç¨‹ï¼š
# 1. åˆ›å»ºç›¸å†Œ "Vacation 2025"
# 2. æ‹–æ‹½ 5 å¼ ç…§ç‰‡ä¸Šä¼ 
# 3. éªŒè¯ç¼©ç•¥å›¾ç”Ÿæˆ
# 4. ç‚¹å‡»ç…§ç‰‡æŸ¥çœ‹å¤§å›¾
# 5. åˆ é™¤ 1 å¼ ç…§ç‰‡ï¼ˆéªŒè¯ç¡®è®¤å¯¹è¯æ¡†ï¼‰
# 6. åˆ·æ–°é¡µé¢ï¼ˆéªŒè¯æ•°æ®æŒä¹…åŒ–ï¼‰

# è¿è¡Œæµ‹è¯•
npm run test

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# ç»“æœï¼š
# âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ32 testsï¼‰
# âœ… TypeScript è¦†ç›–ç‡ 98%
# âœ… IndexedDB æ•°æ®æŒä¹…åŒ–
```

---

## ğŸ“• æ¡ˆä¾‹ 3ï¼šå¾…åŠäº‹é¡¹ APIï¼ˆ60 åˆ†é’Ÿï¼‰

### é¡¹ç›®èƒŒæ™¯

**éœ€æ±‚ï¼š** åˆ›å»ºä¸€ä¸ª RESTful API ç”¨äºç®¡ç†å¾…åŠäº‹é¡¹ï¼Œæ”¯æŒ CRUD æ“ä½œã€ä¼˜å…ˆçº§æ’åºã€æ ‡ç­¾è¿‡æ»¤

**æŠ€æœ¯æ ˆï¼š**
- åç«¯ï¼šPython FastAPI
- æ•°æ®åº“ï¼šPostgreSQL
- è®¤è¯ï¼šJWT
- æµ‹è¯•ï¼špytest

**é‡ç‚¹å­¦ä¹ ï¼š** å¥‘çº¦ä¼˜å…ˆå¼€å‘ï¼ˆContract-First Developmentï¼‰

### å®Œæ•´æµç¨‹ï¼ˆç®€åŒ–ï¼Œçªå‡ºå¥‘çº¦ä¼˜å…ˆï¼‰

#### Step 1-3: åˆå§‹åŒ– + å®ªæ³•ï¼ˆç•¥ï¼Œå‚è€ƒå‰é¢æ¡ˆä¾‹ï¼‰

#### Step 4: è§„æ ¼

```bash
/speckit.specify å¾…åŠäº‹é¡¹ APIï¼Œæ”¯æŒåˆ›å»ºä»»åŠ¡ã€æ ‡è®°å®Œæˆã€è®¾ç½®ä¼˜å…ˆçº§ã€æ·»åŠ æ ‡ç­¾ã€è¿‡æ»¤æŸ¥è¯¢
```

**spec.md**ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰ï¼š

```markdown
## User Scenarios

### P1: Create Task
**Acceptance Criteria**:
- Given ç”¨æˆ·å·²è®¤è¯
- When POST /api/tasks with {title, description, priority}
- Then è¿”å› 201 with task ID
- And ä»»åŠ¡ä¿å­˜åˆ°æ•°æ®åº“
- And å“åº”æ—¶é—´ < 100ms

### P2: Mark Task Complete
**Acceptance Criteria**:
- Given ä»»åŠ¡å­˜åœ¨ä¸”æœªå®Œæˆ
- When PATCH /api/tasks/{id} with {completed: true}
- Then è¿”å› 200 with updated task
- And completed_at timestamp æ›´æ–°

### P3: Filter Tasks by Tag
**Acceptance Criteria**:
- Given å¤šä¸ªä»»åŠ¡æœ‰ä¸åŒæ ‡ç­¾
- When GET /api/tasks?tags=work,urgent
- Then è¿”å›æ‰€æœ‰åŒ…å«"work"æˆ–"urgent"æ ‡ç­¾çš„ä»»åŠ¡
- And æŒ‰ä¼˜å…ˆçº§é™åºæ’åº

## Requirements
- FR-001: API MUST æ”¯æŒ JWT è®¤è¯
- FR-002: æ‰€æœ‰ç«¯ç‚¹ MUST è¿”å›æ ‡å‡†åŒ–é”™è¯¯æ ¼å¼
- FR-003: ä»»åŠ¡ MUST æœ‰ä¼˜å…ˆçº§ï¼ˆ1-5ï¼Œ1æœ€é«˜ï¼‰
- FR-004: æ ‡ç­¾ MUST æ”¯æŒå¤šä¸ªï¼ˆé€—å·åˆ†éš”ï¼‰

## Success Criteria
- SC-001: API å“åº”æ—¶é—´ < 200ms (P95)
- SC-002: æ”¯æŒ 1000 å¹¶å‘è¯·æ±‚
- SC-003: æµ‹è¯•è¦†ç›–ç‡ > 90%
```

#### Step 5: æŠ€æœ¯æ–¹æ¡ˆï¼ˆå¥‘çº¦ä¼˜å…ˆï¼‰

```bash
/speckit.plan FastAPI + PostgreSQL + JWT + pytestï¼Œå…ˆå®šä¹‰ OpenAPI å¥‘çº¦å†å®ç°
```

**plan.md**ï¼ˆé‡ç‚¹ï¼šAPI å¥‘çº¦ï¼‰ï¼š

```markdown
## Technical Context
- Language: Python 3.11+
- Framework: FastAPI 0.104+
- Database: PostgreSQL 15 + SQLAlchemy 2.0
- Authentication: JWT (PyJWT)
- Testing: pytest + httpx
- API Docs: Auto-generated from OpenAPI 3.0

## Phase 1: Designï¼ˆè®¾è®¡ä¼˜å…ˆï¼‰

### API Contractï¼ˆOpenAPI 3.0ï¼‰

**æ–‡ä»¶ï¼š** `specs/001-todo-api/contracts/api.yaml`

```yaml
openapi: 3.0.0
info:
  title: Todo API
  version: 1.0.0
  description: RESTful API for managing todo tasks

servers:
  - url: http://localhost:8000
    description: Development server

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Task:
      type: object
      required:
        - id
        - title
        - priority
        - completed
        - created_at
      properties:
        id:
          type: integer
          example: 42
        title:
          type: string
          minLength: 1
          maxLength: 200
          example: "Finish API documentation"
        description:
          type: string
          maxLength: 1000
          example: "Write comprehensive OpenAPI specs"
        priority:
          type: integer
          minimum: 1
          maximum: 5
          example: 1
        tags:
          type: array
          items:
            type: string
          example: ["work", "urgent"]
        completed:
          type: boolean
          example: false
        completed_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00Z"

    CreateTaskRequest:
      type: object
      required:
        - title
        - priority
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 1000
        priority:
          type: integer
          minimum: 1
          maximum: 5
          default: 3
        tags:
          type: array
          items:
            type: string

    UpdateTaskRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        priority:
          type: integer
          minimum: 1
          maximum: 5
        tags:
          type: array
          items:
            type: string
        completed:
          type: boolean

    Error:
      type: object
      required:
        - error
        - message
      properties:
        error:
          type: string
          example: "VALIDATION_ERROR"
        message:
          type: string
          example: "Invalid priority value"
        details:
          type: object

paths:
  /api/tasks:
    get:
      summary: List tasks
      operationId: listTasks
      tags: [Tasks]
      security:
        - BearerAuth: []
      parameters:
        - name: tags
          in: query
          schema:
            type: string
          description: Comma-separated tags (OR filter)
          example: "work,urgent"
        - name: completed
          in: query
          schema:
            type: boolean
          description: Filter by completion status
        - name: priority
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 5
          description: Filter by priority
        - name: sort
          in: query
          schema:
            type: string
            enum: [priority_desc, created_asc, created_desc]
            default: priority_desc
      responses:
        '200':
          description: List of tasks
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
                  total:
                    type: integer
                    example: 42
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      summary: Create task
      operationId: createTask
      tags: [Tasks]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTaskRequest'
      responses:
        '201':
          description: Task created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized

  /api/tasks/{task_id}:
    get:
      summary: Get task by ID
      operationId: getTask
      tags: [Tasks]
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Task details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '404':
          description: Task not found

    patch:
      summary: Update task
      operationId: updateTask
      tags: [Tasks]
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTaskRequest'
      responses:
        '200':
          description: Task updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '404':
          description: Task not found

    delete:
      summary: Delete task
      operationId: deleteTask
      tags: [Tasks]
      security:
        - BearerAuth: []
      parameters:
        - name: task_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Task deleted
        '404':
          description: Task not found
```

**å…³é”®ç‚¹ï¼šå¥‘çº¦ä¼˜å…ˆ**
```
1. å…ˆå®šä¹‰ OpenAPI å¥‘çº¦
2. å‰åç«¯åŸºäºå¥‘çº¦å¹¶è¡Œå¼€å‘
3. ç”¨å¥‘çº¦ç”Ÿæˆï¼š
   - API æ–‡æ¡£ï¼ˆè‡ªåŠ¨ï¼‰
   - ç±»å‹å®šä¹‰ï¼ˆPydantic modelsï¼‰
   - Mock æœåŠ¡å™¨ï¼ˆå‰ç«¯æµ‹è¯•ç”¨ï¼‰
   - é›†æˆæµ‹è¯•ï¼ˆéªŒè¯å®ç°ç¬¦åˆå¥‘çº¦ï¼‰
```

### Data Modelï¼ˆåŸºäºå¥‘çº¦ç”Ÿæˆï¼‰

```python
# src/models/task.py
from sqlalchemy import Column, Integer, String, Boolean, DateTime, ARRAY
from sqlalchemy.sql import func
from database import Base

class Task(Base):
    __tablename__ = 'tasks'

    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, nullable=False, index=True)  # From JWT
    title = Column(String(200), nullable=False)
    description = Column(String(1000), nullable=True)
    priority = Column(Integer, nullable=False, default=3)  # 1-5
    tags = Column(ARRAY(String), nullable=True, default=[])
    completed = Column(Boolean, nullable=False, default=False)
    completed_at = Column(DateTime, nullable=True)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())

    # Pydantic schemaï¼ˆç”¨äº FastAPI validationï¼‰
    class Config:
        from_attributes = True
```
```

#### Step 7: ä»»åŠ¡åˆ†è§£ï¼ˆå¥‘çº¦é©±åŠ¨ï¼‰

```markdown
## Phase 1: Setup
- [ ] T001 Initialize FastAPI project
- [ ] T002 [P] Create database schema migration
- [ ] T003 [P] Set up pytest with fixtures

## Phase 2: Contract Implementation
- [ ] T004 Generate Pydantic models from OpenAPI at /abs/path/src/schemas.py
  Tool: datamodel-code-generator --input api.yaml --output schemas.py

- [ ] T005 Create Task SQLAlchemy model at /abs/path/src/models/task.py
  Match OpenAPI schema fields

## Phase 3: Endpoints (Contract-Driven)

### Endpoint: POST /api/tasks
- [ ] T006 Write contract test at /abs/path/tests/test_create_task.py
  ```python
  def test_create_task_matches_contract():
      response = client.post("/api/tasks", json={...})
      assert response.status_code == 201
      # Validate response against OpenAPI schema
      validate_response(response.json(), "CreateTaskResponse")
  ```

- [ ] T007 Implement endpoint at /abs/path/src/api/tasks.py
  ```python
  @app.post("/api/tasks", response_model=TaskResponse, status_code=201)
  async def create_task(task: CreateTaskRequest, user=Depends(get_current_user)):
      # Implementation
  ```

**CHECKPOINT**: Contract test passes

### Endpoint: GET /api/tasks
- [ ] T008 Write contract test for list endpoint
- [ ] T009 Implement list with filtering

### Endpoint: PATCH /api/tasks/{id}
- [ ] T010 Write contract test for update
- [ ] T011 Implement update logic

## Phase 4: Contract Validation
- [ ] T012 Run OpenAPI validator against implementation
  Tool: openapi-spec-validator api.yaml

- [ ] T013 Generate API documentation
  Tool: FastAPI auto-generated docs at /docs
```

#### Step 8: å®ç°ï¼ˆä»£ç ç¤ºä¾‹ï¼‰

```python
# src/api/tasks.py
from fastapi import APIRouter, Depends, HTTPException, Query
from sqlalchemy.orm import Session
from typing import List, Optional
from src.schemas import TaskResponse, CreateTaskRequest, UpdateTaskRequest
from src.models.task import Task
from src.dependencies import get_db, get_current_user

router = APIRouter(prefix="/api", tags=["Tasks"])

@router.post("/tasks", response_model=TaskResponse, status_code=201)
async def create_task(
    task_data: CreateTaskRequest,
    db: Session = Depends(get_db),
    current_user: int = Depends(get_current_user)
):
    """
    Create a new task.

    Implements: POST /api/tasks from OpenAPI contract
    """
    task = Task(
        user_id=current_user,
        title=task_data.title,
        description=task_data.description,
        priority=task_data.priority or 3,
        tags=task_data.tags or []
    )
    db.add(task)
    db.commit()
    db.refresh(task)
    return task

@router.get("/tasks", response_model=dict)
async def list_tasks(
    tags: Optional[str] = Query(None, description="Comma-separated tags"),
    completed: Optional[bool] = None,
    priority: Optional[int] = Query(None, ge=1, le=5),
    sort: str = Query("priority_desc", regex="^(priority_desc|created_asc|created_desc)$"),
    db: Session = Depends(get_db),
    current_user: int = Depends(get_current_user)
):
    """
    List tasks with filtering.

    Implements: GET /api/tasks from OpenAPI contract
    """
    query = db.query(Task).filter(Task.user_id == current_user)

    # Filter by tags (OR logic)
    if tags:
        tag_list = [t.strip() for t in tags.split(",")]
        query = query.filter(Task.tags.overlap(tag_list))

    # Filter by completed status
    if completed is not None:
        query = query.filter(Task.completed == completed)

    # Filter by priority
    if priority:
        query = query.filter(Task.priority == priority)

    # Sorting
    if sort == "priority_desc":
        query = query.order_by(Task.priority.asc())  # 1 is highest
    elif sort == "created_asc":
        query = query.order_by(Task.created_at.asc())
    elif sort == "created_desc":
        query = query.order_by(Task.created_at.desc())

    tasks = query.all()
    return {"tasks": tasks, "total": len(tasks)}

@router.patch("/tasks/{task_id}", response_model=TaskResponse)
async def update_task(
    task_id: int,
    task_data: UpdateTaskRequest,
    db: Session = Depends(get_db),
    current_user: int = Depends(get_current_user)
):
    """
    Update task.

    Implements: PATCH /api/tasks/{task_id} from OpenAPI contract
    """
    task = db.query(Task).filter(
        Task.id == task_id,
        Task.user_id == current_user
    ).first()

    if not task:
        raise HTTPException(status_code=404, detail="Task not found")

    # Update fields
    for field, value in task_data.dict(exclude_unset=True).items():
        if field == "completed" and value:
            task.completed_at = func.now()
        setattr(task, field, value)

    db.commit()
    db.refresh(task)
    return task
```

#### Step 9: å¥‘çº¦éªŒè¯

```python
# tests/test_contract_compliance.py
import pytest
from fastapi.testclient import TestClient
from openapi_spec_validator import validate_spec
from openapi_spec_validator.readers import read_from_filename

def test_openapi_contract_valid():
    """éªŒè¯ OpenAPI å¥‘çº¦æœ¬èº«æ˜¯åˆæ³•çš„"""
    spec_dict, spec_url = read_from_filename('specs/001-todo-api/contracts/api.yaml')
    validate_spec(spec_dict)

def test_create_task_matches_contract(client: TestClient, auth_headers):
    """éªŒè¯å®ç°ç¬¦åˆå¥‘çº¦"""
    response = client.post(
        "/api/tasks",
        json={
            "title": "Test task",
            "description": "Test description",
            "priority": 1,
            "tags": ["work"]
        },
        headers=auth_headers
    )

    assert response.status_code == 201

    data = response.json()
    # éªŒè¯å“åº”ç»“æ„ç¬¦åˆ OpenAPI schema
    assert "id" in data
    assert "title" in data
    assert data["title"] == "Test task"
    assert data["priority"] == 1
    assert "created_at" in data

def test_list_tasks_filtering(client: TestClient, auth_headers):
    """éªŒè¯è¿‡æ»¤åŠŸèƒ½ç¬¦åˆå¥‘çº¦"""
    # Create test tasks
    client.post("/api/tasks", json={"title": "Work task", "tags": ["work"], "priority": 1}, headers=auth_headers)
    client.post("/api/tasks", json={"title": "Personal task", "tags": ["personal"], "priority": 3}, headers=auth_headers)

    # Filter by tag
    response = client.get("/api/tasks?tags=work", headers=auth_headers)
    assert response.status_code == 200
    data = response.json()
    assert data["total"] == 1
    assert data["tasks"][0]["tags"] == ["work"]

    # Filter by priority
    response = client.get("/api/tasks?priority=1", headers=auth_headers)
    assert response.status_code == 200
    assert response.json()["total"] == 1
```

#### Step 10: API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

```bash
# å¯åŠ¨æœåŠ¡å™¨
uvicorn main:app --reload

# è®¿é—®è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£
# http://localhost:8000/docsï¼ˆSwagger UIï¼‰
# http://localhost:8000/redocï¼ˆReDocï¼‰

# æ–‡æ¡£è‡ªåŠ¨åŸºäº OpenAPI å¥‘çº¦ç”Ÿæˆï¼Œä¸å®ç°ä¿æŒåŒæ­¥ï¼
```

---

## ğŸ“ ä¸‰ä¸ªæ¡ˆä¾‹çš„æ ¸å¿ƒå·®å¼‚

| ç»´åº¦ | æ¡ˆä¾‹ 1ï¼šä¸ªäººä½œå“é›† | æ¡ˆä¾‹ 2ï¼šç›¸å†Œç®¡ç†å™¨ | æ¡ˆä¾‹ 3ï¼šå¾…åŠ API |
|------|-------------------|-------------------|------------------|
| **å¤æ‚åº¦** | ç®€å• | ä¸­ç­‰ | é«˜ |
| **è€—æ—¶** | 10 åˆ†é’Ÿ | 30 åˆ†é’Ÿ | 60 åˆ†é’Ÿ |
| **é‡ç‚¹** | åŸºç¡€æµç¨‹ | æ¾„æ¸… + éªŒè¯ | å¥‘çº¦ä¼˜å…ˆ |
| **å®ªæ³•** | é™æ€ç½‘ç«™ | Offline-First + TypeScript | API æ€§èƒ½ + å®‰å…¨ |
| **æ¾„æ¸…** | 1 ä¸ªï¼ˆè¡¨å•å¤„ç†ï¼‰ | 2 ä¸ªï¼ˆåˆ é™¤ç¡®è®¤ã€æ•°é‡é™åˆ¶ï¼‰ | 0 ä¸ªï¼ˆéœ€æ±‚æ˜ç¡®ï¼‰ |
| **å¥‘çº¦** | æ—  | æ—  | OpenAPI 3.0 |
| **æµ‹è¯•** | Lighthouse | å•å…ƒæµ‹è¯• + E2E | å¥‘çº¦æµ‹è¯• |
| **æŠ€æœ¯æ ˆ** | HTML/CSS/JS | React + TS + IndexedDB | FastAPI + PostgreSQL |

---

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

### 1. ä»ç®€å•å¼€å§‹

```
ç¬¬ä¸€æ¬¡ç”¨ Spec-kitï¼Ÿ
   â†“
é€‰æ‹©æ¡ˆä¾‹ 1ï¼ˆä¸ªäººä½œå“é›†ï¼‰
   â†“
10 åˆ†é’Ÿä½“éªŒå®Œæ•´æµç¨‹
   â†“
å»ºç«‹ä¿¡å¿ƒåå°è¯•æ¡ˆä¾‹ 2ã€3
```

### 2. å®ªæ³•çš„ä»·å€¼

```
æœ‰å®ªæ³•ï¼š
  âœ… å›¢é˜Ÿç»Ÿä¸€æ ‡å‡†
  âœ… AI è‡ªåŠ¨éªŒè¯åˆè§„æ€§
  âœ… é˜²æ­¢æŠ€æœ¯å€ºåŠ¡

æ— å®ªæ³•ï¼š
  âŒ æ¯ä¸ªå¼€å‘è€…é£æ ¼ä¸åŒ
  âŒ ä»£ç è´¨é‡å‚å·®ä¸é½
  âŒ åæœŸé‡æ„æˆæœ¬é«˜
```

### 3. æ¾„æ¸…çš„æ—¶æœº

```
ä½•æ—¶æ¾„æ¸…ï¼Ÿ
  âœ… spec.md ä¸­æœ‰ [NEEDS CLARIFICATION]
  âœ… éœ€æ±‚æ¨¡ç³Šä¸æ¸…
  âœ… å¤šä¸ªæŠ€æœ¯æ–¹æ¡ˆéœ€è¦é€‰æ‹©

ä½•æ—¶è·³è¿‡ï¼Ÿ
  âŒ éœ€æ±‚å·²ç»éå¸¸æ˜ç¡®
  âŒ å›¢é˜Ÿå·²æœ‰æˆç†Ÿæ–¹æ¡ˆ
```

### 4. å¥‘çº¦ä¼˜å…ˆçš„ä»·å€¼

```
æ¡ˆä¾‹ 3 çš„å…³é”®ï¼šå…ˆå®šä¹‰ OpenAPI å¥‘çº¦

ä»·å€¼ï¼š
  âœ… å‰åç«¯å¹¶è¡Œå¼€å‘ï¼ˆæ— éœ€ç­‰å¾…ï¼‰
  âœ… è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
  âœ… å¥‘çº¦æµ‹è¯•ä¿è¯ä¸€è‡´æ€§
  âœ… ç±»å‹å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ

ä¼ ç»Ÿæ–¹å¼ï¼š
  âŒ åç«¯å®ç°å®Œæ‰èƒ½å®šä¹‰ API
  âŒ å‰ç«¯ç­‰å¾…åç«¯
  âŒ æ–‡æ¡£æ‰‹å·¥ç¼–å†™æ˜“è¿‡æ—¶
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

æ­å–œä½ å®Œæˆäº† 3 ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼ç°åœ¨ä½ å·²ç»æŒæ¡ï¼š

âœ… Spec-kit åŸºç¡€å·¥ä½œæµ
âœ… å®ªæ³•ï¼ˆConstitutionï¼‰çš„ä½œç”¨
âœ… æ¾„æ¸…ï¼ˆClarificationï¼‰æµç¨‹
âœ… å¥‘çº¦ä¼˜å…ˆï¼ˆContract-Firstï¼‰å¼€å‘

**ä¸‹ä¸€æ­¥ï¼š** [4.4 è¿›é˜¶æŠ€å·§å’Œæœ€ä½³å®è·µ](./4.4-è¿›é˜¶æŠ€å·§å’Œæœ€ä½³å®è·µ.md) - å­¦ä¹ å›¢é˜Ÿåä½œã€CI/CD é›†æˆã€å¤šæ–¹æ¡ˆæ¢ç´¢ç­‰é«˜çº§æŠ€å·§ï¼

---

*Spec-kit æ ¸å¿ƒæ¦‚å¿µæ•™ç¨‹ v1.0 | 2025 Edition*
