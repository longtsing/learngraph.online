# 0.4 å°ç»“å’Œå¤ä¹ 

## å›é¡¾ï¼šä½ å·²ç»æŒæ¡çš„æ ¸å¿ƒèƒ½åŠ›

æ­å–œä½ å®Œæˆ Module 0ï¼é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ å·²ç»å…·å¤‡äº†æ„å»º AI Agent çš„ç¬¬ä¸€å±‚åŸºç¡€ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä½ å­¦åˆ°äº†ä»€ä¹ˆï¼š

> **ğŸ¯ å°ç™½é¼“åŠ±**ï¼šå­¦ç¼–ç¨‹å°±åƒå­¦éª‘è‡ªè¡Œè½¦
>
> å¦‚æœä½ ç°åœ¨æ„Ÿè§‰æœ‰ç‚¹æ‡µï¼Œè§‰å¾—"æˆ‘çœŸçš„å­¦ä¼šäº†å—ï¼Ÿ"â€”â€”è¿™æ˜¯å®Œå…¨æ­£å¸¸çš„ï¼
>
> å­¦ç¼–ç¨‹å°±åƒå­¦éª‘è‡ªè¡Œè½¦ï¼š
> - **åˆšå¼€å§‹**ï¼šä¸œå€’è¥¿æ­ªã€ä¸æ–­æ‘”å€’ï¼ˆä»£ç æŠ¥é”™ï¼‰
> - **åšæŒç»ƒä¹ **ï¼šæ…¢æ…¢æ‰¾åˆ°å¹³è¡¡æ„Ÿï¼ˆç†è§£é€»è¾‘ï¼‰
> - **æœ€å**ï¼šä¸çŸ¥ä¸è§‰å°±ä¼šéª‘äº†ï¼ˆå†™ä»£ç å˜æˆæœ¬èƒ½ï¼‰
>
> **å…³é”®æ˜¯**ï¼šä¸è¦åªçœ‹ï¼Œè¦åŠ¨æ‰‹æ•²ä»£ç ï¼æ•²10éæ¯”çœ‹100éæœ‰ç”¨ã€‚
>
> ä½ å·²ç»è¿ˆå‡ºäº†æœ€éš¾çš„ç¬¬ä¸€æ­¥ã€‚ç»§ç»­åŠ æ²¹ï¼ğŸ’ª

### âœ… å¼€å‘ç¯å¢ƒä¸å·¥å…·é“¾
- Python 3.11+ å®‰è£…ä¸é…ç½®
- è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼ˆvenv / Poetryï¼‰
- VS Code ä¸“ä¸šé…ç½®
- åŒ…ç®¡ç†ï¼ˆpip / poetryï¼‰

### âœ… Python æ ¸å¿ƒæ•°æ®ç±»å‹
- **int**: Agent çš„è®¡æ•°å™¨ã€token ç»Ÿè®¡
- **float**: ç½®ä¿¡åº¦åˆ†æ•°ã€æ¸©åº¦å‚æ•°
- **str**: ç”¨æˆ·è¾“å…¥ã€LLM è¾“å‡ºã€æç¤ºè¯
- **bool**: çŠ¶æ€æ ‡å¿—ã€æƒé™æ£€æŸ¥
- **ç±»å‹æ³¨è§£**: ç°ä»£ Python çš„æ ‡å‡†

### âœ… æ§åˆ¶æµä¸å†³ç­–é€»è¾‘
- **if/elif/else**: Agent çš„æ¡ä»¶è·¯ç”±
- **for å¾ªç¯**: æ‰¹é‡å¤„ç†ä»»åŠ¡
- **while å¾ªç¯**: é‡è¯•æœºåˆ¶
- **break/continue**: ç²¾ç¡®æ§åˆ¶æµç¨‹

---

## æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥è¡¨

> **ğŸ¯ å°ç™½ç†è§£**ï¼šæŠŠè¿™é¡µæ‰“å°å‡ºæ¥ï¼
>
> ä¸‹é¢çš„é€ŸæŸ¥è¡¨æ˜¯ä½ ä»¥åå†™ä»£ç æ—¶çš„"å°æŠ„"ã€‚åˆšå¼€å§‹å†™ä»£ç æ—¶ï¼Œå¿˜è®°è¯­æ³•æ˜¯å¾ˆæ­£å¸¸çš„â€”â€”ä¸“ä¸šç¨‹åºå‘˜ä¹Ÿä¼šå¤©å¤© Google æŸ¥è¯­æ³•ã€‚
>
> å»ºè®®ï¼š
> 1. **æ”¶è—è¿™ä¸€é¡µ**ï¼Œå¿˜äº†å°±å›æ¥çœ‹
> 2. **å¤šæ•²å‡ é**ï¼Œæ…¢æ…¢å°±è®°ä½äº†
> 3. **ä¸ç”¨æ­»è®°ç¡¬èƒŒ**ï¼Œç”¨å¤šäº†è‡ªç„¶ä¼š

### æ•°æ®ç±»å‹å¯¹åº”è¡¨

| Python ç±»å‹ | åœ¨ AI Agent ä¸­çš„ç”¨é€” | ç¤ºä¾‹ |
|------------|---------------------|------|
| `int` | token è®¡æ•°ã€è½®æ¬¡ã€é‡è¯•æ¬¡æ•° | `max_tokens = 2000` |
| `float` | æ¸©åº¦å‚æ•°ã€ç½®ä¿¡åº¦ã€æˆæœ¬ | `temperature = 0.7` |
| `str` | æ¶ˆæ¯ã€æç¤ºè¯ã€å“åº” | `prompt = "Hello"` |
| `bool` | çŠ¶æ€æ ‡å¿—ã€æƒé™æ£€æŸ¥ | `is_active = True` |
| `list[str]` | æ¶ˆæ¯å†å²ã€å·¥å…·åˆ—è¡¨ | `messages = ["Hi", "Hello"]` |
| `dict` | é…ç½®ã€çŠ¶æ€ã€API å“åº” | `config = {"model": "gpt-4"}` |

### æ§åˆ¶æµé€ŸæŸ¥

```python
# æ¡ä»¶åˆ¤æ–­
if condition:
    # æ‰§è¡Œåˆ†æ”¯ A
elif another_condition:
    # æ‰§è¡Œåˆ†æ”¯ B
else:
    # æ‰§è¡Œåˆ†æ”¯ C

# for å¾ªç¯
for item in collection:
    # å¤„ç†æ¯ä¸ª item

# while å¾ªç¯
while condition:
    # æŒç»­æ‰§è¡Œç›´åˆ° condition ä¸º False
    
# åˆ—è¡¨æ¨å¯¼å¼
result = [expression for item in collection if condition]
```

---

## é«˜éš¾åº¦ç¼–ç æŒ‘æˆ˜

ç°åœ¨æ˜¯æ—¶å€™æ£€éªŒä½ çš„å­¦ä¹ æˆæœäº†ï¼ä»¥ä¸‹æ˜¯ä¸¤ä¸ª**éå¸¸é«˜éš¾åº¦**çš„ç¼–ç æŒ‘æˆ˜ï¼Œå®ƒä»¬æ¨¡æ‹Ÿäº†çœŸå®çš„ AI Agent å¼€å‘åœºæ™¯ã€‚

> **âš ï¸ é‡è¦æç¤º**ï¼šè¿™äº›æŒ‘æˆ˜æ•…æ„è®¾è®¡å¾—å¾ˆéš¾ï¼Œç›®çš„æ˜¯è®©ä½ ç»¼åˆè¿ç”¨æœ¬ç« æ‰€å­¦çš„æ‰€æœ‰çŸ¥è¯†ã€‚ä¸è¦æ°”é¦ï¼Œå°è¯•ç‹¬ç«‹å®Œæˆï¼Œå³ä½¿éœ€è¦å¤šæ¬¡è¿­ä»£ä¹Ÿæ²¡å…³ç³»ã€‚

> **ğŸ¯ å°ç™½æ”»ç•¥**ï¼šå¦‚ä½•å•ƒä¸‹è¿™äº›"ç¡¬éª¨å¤´"ï¼Ÿ
>
> çœ‹åˆ°è¿™ä¹ˆé•¿çš„ä»£ç åˆ«æ…Œï¼è¿™æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ç»å†è¿‡çš„é˜¶æ®µã€‚
>
> **æ­£ç¡®çš„å­¦ä¹ å§¿åŠ¿**ï¼š
>
> 1. **å…ˆè·‘é€šç¤ºä¾‹ä»£ç **
>    - æŠŠä»£ç å¤åˆ¶åˆ°ä½ çš„ç¼–è¾‘å™¨
>    - ç›´æ¥è¿è¡Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ
>    - è§‚å¯Ÿè¾“å‡ºï¼Œç†è§£å®ƒåœ¨å¹²å˜›
>
> 2. **æ”¹ä¸€ç‚¹ã€è¯•ä¸€ç‚¹**
>    - æ”¹ä¸€ä¸ªå‚æ•°ï¼Œçœ‹ç»“æœå˜åŒ–
>    - æ³¨é‡Šæ‰ä¸€è¡Œä»£ç ï¼Œçœ‹æŠ¥ä»€ä¹ˆé”™
>    - é€šè¿‡"ç ´å"æ¥ç†è§£ä»£ç 
>
> 3. **åˆ†è€Œæ²»ä¹‹**
>    - ä¸è¦è¯•å›¾ä¸€æ¬¡ç†è§£å…¨éƒ¨
>    - ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°åœ°çœ‹
>    - ç”»æµç¨‹å›¾å¸®åŠ©ç†è§£
>
> 4. **å–„ç”¨ print**
>    - ä¸ç¡®å®šæŸä¸ªå˜é‡æ˜¯ä»€ä¹ˆï¼Ÿ`print(å˜é‡)`
>    - ä¸ç¡®å®šä»£ç æ‰§è¡Œåˆ°å“ªäº†ï¼Ÿ`print("æˆ‘åˆ°è¿™äº†")`
>
> **åšä¸å‡ºæ¥ä¹Ÿæ²¡å…³ç³»ï¼** å…ˆçœ‹æç¤ºï¼Œå†çœ‹ç­”æ¡ˆï¼Œç„¶åè‡ªå·±é‡æ–°å®ç°ä¸€éã€‚è¿™ä¸æ˜¯ä½œå¼Šï¼Œæ˜¯å­¦ä¹ ï¼

---

### ğŸ”¥ æŒ‘æˆ˜ 1ï¼šæ™ºèƒ½ Token ç®¡ç†å™¨ï¼ˆéš¾åº¦ï¼šâ­â­â­â­ï¼‰

#### ä»»åŠ¡æè¿°

å®ç°ä¸€ä¸ª `TokenManager` ç±»ï¼Œç”¨äºç®¡ç† AI Agent çš„ token ä½¿ç”¨æƒ…å†µã€‚è¿™ä¸ªç±»éœ€è¦ï¼š

1. **è¿½è¸ªå¤šä¸ªæ¨¡å‹çš„ token ä½¿ç”¨**ï¼ˆGPT-4ã€GPT-3.5ã€Claude ç­‰ï¼‰
2. **è®¡ç®—å®æ—¶æˆæœ¬**ï¼ˆä¸åŒæ¨¡å‹ä»·æ ¼ä¸åŒï¼‰
3. **å®ç°é¢„ç®—é™åˆ¶**ï¼ˆè¶…è¿‡é¢„ç®—æ—¶æ‹’ç»è¯·æ±‚ï¼‰
4. **æ”¯æŒ token é¢„ç•™**ï¼ˆä¸ºå…³é”®ä»»åŠ¡é¢„ç•™ token é…é¢ï¼‰
5. **ç”Ÿæˆä½¿ç”¨æŠ¥å‘Š**

#### æŠ€æœ¯è¦æ±‚

- ä½¿ç”¨**ç±»å‹æ³¨è§£**
- ä½¿ç”¨**å­—å…¸**å­˜å‚¨å¤šæ¨¡å‹æ•°æ®
- ä½¿ç”¨**if/elif/else**è¿›è¡Œé¢„ç®—æ£€æŸ¥
- ä½¿ç”¨**for å¾ªç¯**ç”ŸæˆæŠ¥å‘Š
- ç¼–å†™**æ–‡æ¡£å­—ç¬¦ä¸²**

#### å®šä»·å‚è€ƒ

```python
MODEL_PRICING = {
    "gpt-4": {
        "input": 0.03,   # $/1K tokens
        "output": 0.06,
    },
    "gpt-3.5-turbo": {
        "input": 0.0015,
        "output": 0.002,
    },
    "claude-3-opus": {
        "input": 0.015,
        "output": 0.075,
    }
}
```

#### é¢„æœŸåŠŸèƒ½

```python
# åˆ›å»ºç®¡ç†å™¨ï¼Œé¢„ç®— $10
manager = TokenManager(budget=10.0)

# è®°å½• token ä½¿ç”¨
success = manager.record_usage(
    model="gpt-4",
    input_tokens=500,
    output_tokens=300
)

# æ£€æŸ¥æ˜¯å¦å¯ä»¥ç»§ç»­ä½¿ç”¨
can_proceed = manager.can_use_tokens(
    model="gpt-4",
    estimated_tokens=1000
)

# é¢„ç•™ tokenï¼ˆä¸ºé‡è¦ä»»åŠ¡ï¼‰
manager.reserve_tokens(
    model="gpt-4",
    tokens=2000,
    reason="Critical summary generation"
)

# ç”ŸæˆæŠ¥å‘Š
report = manager.generate_report()
print(report)
```

#### å‚è€ƒè¾“å‡º

```
=== Token ä½¿ç”¨æŠ¥å‘Š ===
æ€»é¢„ç®—: $10.00
å·²ä½¿ç”¨: $2.55 (25.5%)
å‰©ä½™é¢„ç®—: $7.45

æ¨¡å‹ä½¿ç”¨è¯¦æƒ…:
- gpt-4:
  è¾“å…¥: 1500 tokens ($0.045)
  è¾“å‡º: 800 tokens ($0.048)
  æ€»è®¡: $0.093
  
- gpt-3.5-turbo:
  è¾“å…¥: 5000 tokens ($0.0075)
  è¾“å‡º: 3000 tokens ($0.006)
  æ€»è®¡: $0.0135

Token é¢„ç•™:
- [gpt-4] 2000 tokens - Critical summary generation

é¢„ç®—çŠ¶æ€: âœ… å¥åº·
```

#### ä½ çš„è§£å†³æ–¹æ¡ˆ

```python
from typing import Dict, Optional, Tuple

# æ¨¡å‹å®šä»·
MODEL_PRICING: Dict[str, Dict[str, float]] = {
    "gpt-4": {"input": 0.03, "output": 0.06},
    "gpt-3.5-turbo": {"input": 0.0015, "output": 0.002},
    "claude-3-opus": {"input": 0.015, "output": 0.075},
}


class TokenManager:
    """æ™ºèƒ½ Token ç®¡ç†å™¨"""
    
    def __init__(self, budget: float) -> None:
        """
        åˆå§‹åŒ– Token ç®¡ç†å™¨
        
        Args:
            budget: æ€»é¢„ç®—ï¼ˆç¾å…ƒï¼‰
        """
        # TODO: å®ç°åˆå§‹åŒ–é€»è¾‘
        pass
    
    def record_usage(
        self,
        model: str,
        input_tokens: int,
        output_tokens: int
    ) -> bool:
        """
        è®°å½• token ä½¿ç”¨
        
        Args:
            model: æ¨¡å‹åç§°
            input_tokens: è¾“å…¥ token æ•°
            output_tokens: è¾“å‡º token æ•°
        
        Returns:
            æ˜¯å¦æˆåŠŸè®°å½•ï¼ˆå¦‚æœè¶…é¢„ç®—è¿”å› Falseï¼‰
        """
        # TODO: å®ç°
        pass
    
    def can_use_tokens(self, model: str, estimated_tokens: int) -> bool:
        """
        æ£€æŸ¥æ˜¯å¦å¯ä»¥ä½¿ç”¨æŒ‡å®šæ•°é‡çš„ tokens
        
        Args:
            model: æ¨¡å‹åç§°
            estimated_tokens: é¢„ä¼° token æ•°
        
        Returns:
            æ˜¯å¦å¯ä»¥ä½¿ç”¨
        """
        # TODO: å®ç°
        pass
    
    def reserve_tokens(self, model: str, tokens: int, reason: str) -> None:
        """
        ä¸ºé‡è¦ä»»åŠ¡é¢„ç•™ tokens
        
        Args:
            model: æ¨¡å‹åç§°
            tokens: é¢„ç•™æ•°é‡
            reason: é¢„ç•™åŸå› 
        """
        # TODO: å®ç°
        pass
    
    def generate_report(self) -> str:
        """
        ç”Ÿæˆè¯¦ç»†çš„ä½¿ç”¨æŠ¥å‘Š
        
        Returns:
            æ ¼å¼åŒ–çš„æŠ¥å‘Šå­—ç¬¦ä¸²
        """
        # TODO: å®ç°
        pass


# æµ‹è¯•ä»£ç 
def main() -> None:
    manager = TokenManager(budget=10.0)
    
    # æµ‹è¯•ç”¨ä¾‹
    manager.record_usage("gpt-4", 500, 300)
    manager.record_usage("gpt-3.5-turbo", 1000, 500)
    
    print(manager.can_use_tokens("gpt-4", 10000))
    manager.reserve_tokens("gpt-4", 2000, "Important task")
    
    print(manager.generate_report())


if __name__ == "__main__":
    main()
```

---

### ğŸ”¥ğŸ”¥ æŒ‘æˆ˜ 2ï¼šå¯¹è¯çŠ¶æ€æœºï¼ˆéš¾åº¦ï¼šâ­â­â­â­â­ï¼‰

#### ä»»åŠ¡æè¿°

å®ç°ä¸€ä¸ª `ConversationStateMachine`ï¼Œæ¨¡æ‹Ÿ LangGraph çš„çŠ¶æ€è½¬ç§»æœºåˆ¶ã€‚è¿™ä¸ªçŠ¶æ€æœºéœ€è¦ï¼š

1. **æ”¯æŒå¤šä¸ªçŠ¶æ€**ï¼šgreeting, collecting_info, processing, responding, ending
2. **å®ç°çŠ¶æ€è½¬ç§»è§„åˆ™**ï¼ˆåŸºäºç”¨æˆ·è¾“å…¥ï¼‰
3. **è¿½è¸ªçŠ¶æ€å†å²**
4. **æ”¯æŒçŠ¶æ€å›æ»š**ï¼ˆæ’¤é”€åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€ï¼‰
5. **å¯è§†åŒ–çŠ¶æ€è½¬ç§»**

#### çŠ¶æ€è½¬ç§»å›¾

```
START â†’ greeting â†’ collecting_info â†’ processing â†’ responding
                        â†“                            â†“
                     ending â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ending
```

#### æŠ€æœ¯è¦æ±‚

- ä½¿ç”¨**æšä¸¾ç±»å‹**ï¼ˆEnumï¼‰å®šä¹‰çŠ¶æ€
- ä½¿ç”¨**å­—å…¸**å®šä¹‰è½¬ç§»è§„åˆ™
- ä½¿ç”¨**while å¾ªç¯**å®ç°çŠ¶æ€æœºä¸»å¾ªç¯
- ä½¿ç”¨**åˆ—è¡¨**è¿½è¸ªçŠ¶æ€å†å²
- å®ç°**å¤æ‚çš„æ¡ä»¶é€»è¾‘**

#### é¢„æœŸåŠŸèƒ½

```python
# åˆ›å»ºçŠ¶æ€æœº
sm = ConversationStateMachine()

# å¼€å§‹å¯¹è¯
sm.start()  # è¿›å…¥ greeting çŠ¶æ€

# å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œè‡ªåŠ¨è½¬ç§»çŠ¶æ€
sm.process_input("ä½ å¥½")          # greeting â†’ collecting_info
sm.process_input("æˆ‘æƒ³æŸ¥å¤©æ°”")    # collecting_info â†’ processing
sm.process_input("è°¢è°¢")          # processing â†’ responding
sm.process_input("å†è§")          # responding â†’ ending

# å›æ»šåˆ°ä¸Šä¸€ä¸ªçŠ¶æ€
sm.rollback()  # ending â†’ responding

# æŸ¥çœ‹çŠ¶æ€å†å²
print(sm.get_state_history())

# å¯è§†åŒ–å½“å‰çŠ¶æ€
sm.visualize_state()
```

#### å‚è€ƒè¾“å‡º

```
[çŠ¶æ€æœºå¯åŠ¨] å½“å‰çŠ¶æ€: greeting
ç”¨æˆ·: ä½ å¥½
[çŠ¶æ€è½¬ç§»] greeting â†’ collecting_info

ç”¨æˆ·: æˆ‘æƒ³æŸ¥å¤©æ°”
[çŠ¶æ€è½¬ç§»] collecting_info â†’ processing
[å¤„ç†ä¸­] æ­£åœ¨æŸ¥è¯¢å¤©æ°”ä¿¡æ¯...

ç”¨æˆ·: è°¢è°¢
[çŠ¶æ€è½¬ç§»] processing â†’ responding
[å“åº”] ä¸å®¢æ°”ï¼è¿˜æœ‰å…¶ä»–éœ€è¦å¸®åŠ©çš„å—ï¼Ÿ

ç”¨æˆ·: å†è§
[çŠ¶æ€è½¬ç§»] responding â†’ ending
[ä¼šè¯ç»“æŸ]

çŠ¶æ€å†å²: START â†’ greeting â†’ collecting_info â†’ processing â†’ responding â†’ ending

å½“å‰çŠ¶æ€: ending
  â”œâ”€ å¯è½¬ç§»åˆ°: []
  â””â”€ å†å²è·¯å¾„é•¿åº¦: 6
```

#### ä½ çš„è§£å†³æ–¹æ¡ˆ

```python
from enum import Enum
from typing import List, Optional, Dict


class State(Enum):
    """ä¼šè¯çŠ¶æ€æšä¸¾"""
    START = "start"
    GREETING = "greeting"
    COLLECTING_INFO = "collecting_info"
    PROCESSING = "processing"
    RESPONDING = "responding"
    ENDING = "ending"


class ConversationStateMachine:
    """å¯¹è¯çŠ¶æ€æœº"""
    
    # çŠ¶æ€è½¬ç§»è§„åˆ™
    TRANSITIONS: Dict[State, List[State]] = {
        State.START: [State.GREETING],
        State.GREETING: [State.COLLECTING_INFO, State.ENDING],
        State.COLLECTING_INFO: [State.PROCESSING, State.ENDING],
        State.PROCESSING: [State.RESPONDING, State.ENDING],
        State.RESPONDING: [State.COLLECTING_INFO, State.ENDING],
        State.ENDING: [],
    }
    
    def __init__(self) -> None:
        """åˆå§‹åŒ–çŠ¶æ€æœº"""
        # TODO: å®ç°
        pass
    
    def start(self) -> None:
        """å¯åŠ¨çŠ¶æ€æœº"""
        # TODO: å®ç°
        pass
    
    def process_input(self, user_input: str) -> None:
        """
        å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶è½¬ç§»çŠ¶æ€
        
        Args:
            user_input: ç”¨æˆ·è¾“å…¥æ–‡æœ¬
        """
        # TODO: å®ç°çŠ¶æ€è½¬ç§»é€»è¾‘
        pass
    
    def can_transition_to(self, target_state: State) -> bool:
        """
        æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬ç§»åˆ°ç›®æ ‡çŠ¶æ€
        
        Args:
            target_state: ç›®æ ‡çŠ¶æ€
        
        Returns:
            æ˜¯å¦å¯ä»¥è½¬ç§»
        """
        # TODO: å®ç°
        pass
    
    def transition_to(self, target_state: State) -> bool:
        """
        è½¬ç§»åˆ°ç›®æ ‡çŠ¶æ€
        
        Args:
            target_state: ç›®æ ‡çŠ¶æ€
        
        Returns:
            æ˜¯å¦æˆåŠŸè½¬ç§»
        """
        # TODO: å®ç°
        pass
    
    def rollback(self) -> bool:
        """
        å›æ»šåˆ°ä¸Šä¸€ä¸ªçŠ¶æ€
        
        Returns:
            æ˜¯å¦æˆåŠŸå›æ»š
        """
        # TODO: å®ç°
        pass
    
    def get_state_history(self) -> str:
        """è·å–çŠ¶æ€å†å²çš„å¯è§†åŒ–è¡¨ç¤º"""
        # TODO: å®ç°
        pass
    
    def visualize_state(self) -> None:
        """å¯è§†åŒ–å½“å‰çŠ¶æ€"""
        # TODO: å®ç°
        pass


# æµ‹è¯•ä»£ç 
def main() -> None:
    sm = ConversationStateMachine()
    sm.start()
    
    test_inputs = ["ä½ å¥½", "æˆ‘æƒ³æŸ¥å¤©æ°”", "è°¢è°¢", "å†è§"]
    for user_input in test_inputs:
        print(f"\nç”¨æˆ·: {user_input}")
        sm.process_input(user_input)
    
    print("\n" + "="*50)
    print(sm.get_state_history())
    sm.visualize_state()


if __name__ == "__main__":
    main()
```

---

## æŒ‘æˆ˜ç­”æ¡ˆæç¤º

### æŒ‘æˆ˜ 1 æç¤º

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹æç¤º</summary>

**æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼š
```python
self.budget: float = budget
self.total_spent: float = 0.0
self.usage_by_model: Dict[str, Dict[str, int]] = {}
self.reservations: List[Dict[str, any]] = []
```

**æˆæœ¬è®¡ç®—**ï¼š
```python
input_cost = (input_tokens / 1000) * MODEL_PRICING[model]["input"]
output_cost = (output_tokens / 1000) * MODEL_PRICING[model]["output"]
```

</details>

### æŒ‘æˆ˜ 2 æç¤º

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹æç¤º</summary>

**æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼š
```python
self.current_state: State = State.START
self.state_history: List[State] = [State.START]
```

**æ„å›¾è¯†åˆ«é€»è¾‘**ï¼š
```python
def _classify_intent(text: str) -> State:
    if "ä½ å¥½" in text:
        return State.GREETING
    elif "å†è§" in text:
        return State.ENDING
    # ...
```

</details>

---

## è‡ªæˆ‘è¯„ä¼°æ¸…å•

åœ¨è¿›å…¥ä¸‹ä¸€ä¸ª Module ä¹‹å‰ï¼Œç¡®ä¿ä½ èƒ½å¤Ÿï¼š

- [ ] ç‹¬ç«‹æ­å»º Python å¼€å‘ç¯å¢ƒ
- [ ] åˆ›å»ºå’Œä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
- [ ] ç¼–å†™å¸¦ç±»å‹æ³¨è§£çš„å‡½æ•°
- [ ] ä½¿ç”¨ f-string æ ¼å¼åŒ–å­—ç¬¦ä¸²
- [ ] å®ç°å¤šåˆ†æ”¯æ¡ä»¶åˆ¤æ–­
- [ ] ä½¿ç”¨ for å¾ªç¯å¤„ç†åˆ—è¡¨å’Œå­—å…¸
- [ ] ä½¿ç”¨ while å¾ªç¯å®ç°é‡è¯•é€»è¾‘
- [ ] å®Œæˆè‡³å°‘ä¸€ä¸ªé«˜éš¾åº¦æŒ‘æˆ˜ï¼ˆ60%+æ­£ç¡®ï¼‰

---

## å­¦ä¹ èµ„æº

### æ¨èé˜…è¯»
- [Python å®˜æ–¹æ•™ç¨‹](https://docs.python.org/3/tutorial/)
- [Real Python - Control Flow](https://realpython.com/python-conditional-statements/)
- [PEP 484 - Type Hints](https://peps.python.org/pep-0484/)

### è§†é¢‘è¯¾ç¨‹
- [Python for Everybody (Coursera)](https://www.coursera.org/specializations/python)
- [CS50's Introduction to Programming with Python](https://cs50.harvard.edu/python/)

### ç»ƒä¹ å¹³å°
- [LeetCode Python Track](https://leetcode.com/)
- [HackerRank Python](https://www.hackerrank.com/domains/python)

---

## ä¸‹ä¸€æ­¥

æ­å–œä½ å®Œæˆ Module 0ï¼ä½ å·²ç»æŒæ¡äº† Python çš„æ ¸å¿ƒåŸºç¡€ã€‚

åœ¨ **Module 1: å‡½æ•°ä¸æ¨¡å—åŒ–** ä¸­ï¼Œä½ å°†å­¦ä¹ ï¼š
- å¦‚ä½•ç¼–å†™å¯å¤ç”¨çš„å‡½æ•°
- è£…é¥°å™¨â€”â€”LangChain çš„æ ¸å¿ƒæ¨¡å¼
- æ¨¡å—åŒ–è®¾è®¡â€”â€”æ„å»ºå¤§å‹ Agent ç³»ç»Ÿçš„å…³é”®
- å®æˆ˜ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª LangChain Tool

**ç»§ç»­å‰è¿›ï¼Œä½ ç¦»æ„å»ºçœŸæ­£çš„ AI Agent è¶Šæ¥è¶Šè¿‘äº†ï¼**

---

**ä¸‹ä¸€ç« ï¼š[Module 1: å‡½æ•°ä¸æ¨¡å—åŒ–](../module-1-functions-modules/1.0-æœ¬ç« ä»‹ç».md)**
