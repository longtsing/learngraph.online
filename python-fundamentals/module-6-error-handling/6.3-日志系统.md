# 5.2 日志系统

## logging 基础

```python
import logging

# 配置日志
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

# 不同级别的日志
logger.debug("调试信息")
logger.info("常规信息")
logger.warning("警告信息")
logger.error("错误信息")
logger.critical("严重错误")
```

## Agent 日志系统

```python
import logging
from pathlib import Path

class AgentLogger:
    """Agent 日志管理器"""
    
    def __init__(self, name: str, log_file: str = "agent.log"):
        self.logger = logging.getLogger(name)
        self.logger.setLevel(logging.DEBUG)
        
        # 文件处理器
        fh = logging.FileHandler(log_file, encoding="utf-8")
        fh.setLevel(logging.DEBUG)
        
        # 控制台处理器
        ch = logging.StreamHandler()
        ch.setLevel(logging.INFO)
        
        # 格式化
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        fh.setFormatter(formatter)
        ch.setFormatter(formatter)
        
        self.logger.addHandler(fh)
        self.logger.addHandler(ch)
    
    def log_api_call(self, endpoint: str, status: str):
        """记录 API 调用"""
        self.logger.info(f"API 调用: {endpoint} - 状态: {status}")
    
    def log_error(self, error: Exception):
        """记录错误"""
        self.logger.error(f"错误: {error}", exc_info=True)

# 使用
logger = AgentLogger("ResearchBot")
logger.log_api_call("/chat", "success")
```

---

**下一节：[5.3 调试技巧](5.3-调试技巧.md)**
