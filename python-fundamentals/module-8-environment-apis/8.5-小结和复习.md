# 7.4 å°ç»“å’Œå¤ä¹ 

> **ğŸ¯ å°ç™½ç†è§£**ï¼šè¿™ç« æˆ‘ä»¬å­¦äº†ä»€ä¹ˆï¼Ÿ
>
> è¿™ä¸€ç« æˆ‘ä»¬å­¦ä¼šäº†è®©ç¨‹åº"è”ç½‘"â€”â€”å’Œå¤–éƒ¨ä¸–ç•Œäº¤æµï¼š
>
> ```
> ä¹‹å‰ï¼šç¨‹åºåªèƒ½è‡ªå·±ç©
>            â†“
>         å­¦äº†è¿™ç« 
>            â†“
> ç°åœ¨ï¼šç¨‹åºèƒ½è°ƒç”¨ ChatGPTã€è·å–å¤©æ°”ã€è¿æ¥æ•°æ®åº“...
> ```
>
> **ä¸‰å¤§æ ¸å¿ƒæŠ€èƒ½**ï¼š
>
> | æŠ€èƒ½ | ä½œç”¨ | ä½ å­¦åˆ°äº†ä»€ä¹ˆ |
> |------|------|-------------|
> | ç¯å¢ƒå˜é‡ | å®‰å…¨å­˜å¯†é’¥ | `.env` æ–‡ä»¶ã€`os.getenv()` |
> | HTTP è¯·æ±‚ | å’ŒæœåŠ¡å™¨é€šä¿¡ | `requests`ã€`httpx`ã€é”™è¯¯å¤„ç† |
> | API é›†æˆ | è°ƒç”¨å¤–éƒ¨æœåŠ¡ | OpenAIã€Anthropicã€æ™ºèƒ½è·¯ç”± |
>
> æ­å–œä½ ï¼å­¦å®Œè¿™ç« ï¼Œä½ çš„ Agent å°±èƒ½"è”ç½‘"äº†ï¼

## æœ¬ç« æ ¸å¿ƒæ¦‚å¿µ

### 1. ç¯å¢ƒå˜é‡ç®¡ç†
- **.env æ–‡ä»¶**ï¼šä½¿ç”¨ python-dotenv åŠ è½½ç¯å¢ƒå˜é‡
- **é…ç½®ç±»**ï¼šä½¿ç”¨ dataclass å°è£…é…ç½®
- **å¤šç¯å¢ƒ**ï¼šdevelopment/staging/production é…ç½®åˆ†ç¦»
- **å¯†é’¥å®‰å…¨**ï¼šæ°¸è¿œä¸æäº¤ .env åˆ° Git

### 2. HTTP è¯·æ±‚
- **requests åº“**ï¼šåŒæ­¥ HTTP è¯·æ±‚
- **httpx åº“**ï¼šå¼‚æ­¥ HTTP è¯·æ±‚
- **é”™è¯¯å¤„ç†**ï¼šå¤„ç†è¶…æ—¶ã€è¿æ¥é”™è¯¯ã€HTTP é”™è¯¯
- **é‡è¯•æœºåˆ¶**ï¼šæŒ‡æ•°é€€é¿ç­–ç•¥

### 3. API é›†æˆ
- **ç»Ÿä¸€æ¥å£**ï¼šä½¿ç”¨æŠ½è±¡åŸºç±»ç»Ÿä¸€ä¸åŒ API
- **å¤šæä¾›å•†**ï¼šOpenAIã€Anthropic ç­‰
- **æ™ºèƒ½è·¯ç”±**ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³ API
- **æˆæœ¬ç®¡ç†**ï¼šè¿½è¸ªå’Œæ§åˆ¶ä½¿ç”¨æˆæœ¬

## çŸ¥è¯†è‡ªæµ‹

### é€‰æ‹©é¢˜

1. ä½¿ç”¨ python-dotenv æ—¶ï¼Œå¦‚ä½•è¦†ç›–å·²æœ‰çš„ç¯å¢ƒå˜é‡ï¼Ÿ
   - A. `load_dotenv(force=True)`
   - B. `load_dotenv(override=True)`
   - C. `load_dotenv(replace=True)`
   - D. ä¸èƒ½è¦†ç›–

2. requests å’Œ httpx çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Ÿ
   - A. httpx æ”¯æŒ HTTP/2
   - B. httpx æ”¯æŒå¼‚æ­¥è¯·æ±‚
   - C. httpx æ›´å¿«
   - D. A å’Œ B éƒ½å¯¹

3. API é‡è¯•çš„æœ€ä½³å®è·µæ˜¯ï¼Ÿ
   - A. å›ºå®šé—´éš”é‡è¯•
   - B. æŒ‡æ•°é€€é¿é‡è¯•
   - C. éšæœºé—´éš”é‡è¯•
   - D. ç«‹å³é‡è¯•

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

1. **B** - ä½¿ç”¨ `override=True` å‚æ•°è¦†ç›–å·²æœ‰ç¯å¢ƒå˜é‡
2. **D** - httpx åŒæ—¶æ”¯æŒ HTTP/2 å’Œå¼‚æ­¥è¯·æ±‚
3. **B** - æŒ‡æ•°é€€é¿æ˜¯æœ€ä½³å®è·µï¼Œé¿å…è¿‡åº¦è¯·æ±‚

</details>

---

## é«˜éš¾åº¦ç¼–ç¨‹æŒ‘æˆ˜

> **ğŸ¯ å°ç™½ç†è§£**ï¼šè¿™äº›æŒ‘æˆ˜åœ¨åšä»€ä¹ˆï¼Ÿ
>
> **æŒ‘æˆ˜ 1ï¼šä¼ä¸šçº§ API ç®¡ç†ç³»ç»Ÿ**
>
> æƒ³è±¡ä½ æ˜¯ä¸€å®¶å…¬å¸çš„æŠ€æœ¯ä¸»ç®¡ï¼Œå…¬å¸æœ‰ 100 ä¸ªå‘˜å·¥éƒ½è¦ç”¨ OpenAI APIï¼š
>
> - æ¯ä¸ªäººéœ€è¦è‡ªå·±çš„ API Keyï¼ˆå¤šç§Ÿæˆ·ï¼‰
> - æœ‰äº›äººåªèƒ½ç”¨å…è´¹é¢åº¦ï¼Œæœ‰äº›äººå¯ä»¥ç”¨æ›´å¤šï¼ˆé…é¢ç®¡ç†ï¼‰
> - æœˆåº•è¦çŸ¥é“è°ç”¨äº†å¤šå°‘é’±ï¼ˆæˆæœ¬åˆ†æ‘Šï¼‰
> - æœ‰äººå¿«è¶…é¢æ—¶è¦æé†’ä»–ï¼ˆå‘Šè­¦ç³»ç»Ÿï¼‰
>
> **æŒ‘æˆ˜ 2ï¼šæ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ**
>
> ç”¨æˆ·ç»å¸¸é—®ç±»ä¼¼çš„é—®é¢˜ï¼š
>
> - "Python æ˜¯ä»€ä¹ˆï¼Ÿ"
> - "ä»€ä¹ˆæ˜¯ Pythonï¼Ÿ"
> - "è¯·ä»‹ç» Python"
>
> æ¯æ¬¡éƒ½è°ƒç”¨ APIï¼Ÿå¤ªæµªè´¹äº†ï¼ç¼“å­˜ç³»ç»Ÿå¯ä»¥ï¼š
>
> - è®°ä½é—®è¿‡çš„é—®é¢˜å’Œç­”æ¡ˆ
> - è¯†åˆ«"ç›¸ä¼¼"çš„é—®é¢˜ï¼Œå¤ç”¨ç­”æ¡ˆ
> - èŠ‚çœ 90% ä»¥ä¸Šçš„ API è°ƒç”¨ï¼

### æŒ‘æˆ˜ 1ï¼šä¼ä¸šçº§ API ç®¡ç†ç³»ç»Ÿï¼ˆéš¾åº¦ï¼šâ­â­â­â­ï¼‰

**éœ€æ±‚**ï¼š
æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„ API ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

1. **å¤šç§Ÿæˆ·æ”¯æŒ**ï¼šä¸åŒç”¨æˆ·/å›¢é˜Ÿä½¿ç”¨ä¸åŒçš„ API Key
2. **é…é¢ç®¡ç†**ï¼šæ¯ä¸ªç”¨æˆ·æœ‰ä¸åŒçš„è°ƒç”¨é™é¢å’Œé€Ÿç‡é™åˆ¶
3. **ä½¿ç”¨è¿½è¸ª**ï¼šè®°å½•æ¯æ¬¡è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯
4. **æˆæœ¬åˆ†æ‘Š**ï¼šè®¡ç®—æ¯ä¸ªç”¨æˆ·çš„æˆæœ¬
5. **å‘Šè­¦ç³»ç»Ÿ**ï¼šè¶…è¿‡é…é¢æ—¶å‘é€å‘Šè­¦
6. **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰ API è°ƒç”¨å†å²

**ä»£ç æ¡†æ¶**ï¼š

```python
from typing import Dict, List, Optional, Any
from dataclasses import dataclass, field
from datetime import datetime, timedelta
from enum import Enum
import sqlite3
from abc import ABC, abstractmethod

class QuotaType(Enum):
    """é…é¢ç±»å‹"""
    DAILY = "daily"
    MONTHLY = "monthly"
    TOTAL = "total"

@dataclass
class User:
    """ç”¨æˆ·ä¿¡æ¯"""
    id: str
    name: str
    email: str
    tier: str  # free, pro, enterprise
    api_keys: List[str] = field(default_factory=list)
    active: bool = True

@dataclass
class Quota:
    """é…é¢å®šä¹‰"""
    user_id: str
    quota_type: QuotaType
    max_calls: int
    max_tokens: int
    max_cost: float
    reset_at: datetime

@dataclass
class UsageRecord:
    """ä½¿ç”¨è®°å½•"""
    id: str
    user_id: str
    api_key: str
    provider: str
    model: str
    input_tokens: int
    output_tokens: int
    cost: float
    timestamp: datetime
    success: bool
    error: Optional[str] = None

class QuotaManager:
    """é…é¢ç®¡ç†å™¨"""
    
    def __init__(self, db_path: str = "api_usage.db"):
        self.db_path = db_path
        self._init_database()
    
    def _init_database(self):
        """åˆå§‹åŒ–æ•°æ®åº“"""
        # TODO: åˆ›å»ºè¡¨ç»“æ„
        # - users è¡¨
        # - quotas è¡¨
        # - usage_records è¡¨
        pass
    
    def create_user(self, user: User) -> str:
        """åˆ›å»ºç”¨æˆ·"""
        # TODO: å®ç°ç”¨æˆ·åˆ›å»ºé€»è¾‘
        pass
    
    def generate_api_key(self, user_id: str) -> str:
        """ä¸ºç”¨æˆ·ç”Ÿæˆ API Key"""
        # TODO: ç”Ÿæˆå¹¶å­˜å‚¨ API Key
        pass
    
    def set_quota(self, quota: Quota):
        """è®¾ç½®ç”¨æˆ·é…é¢"""
        # TODO: å®ç°é…é¢è®¾ç½®é€»è¾‘
        pass
    
    def check_quota(self, user_id: str, tokens: int, cost: float) -> bool:
        """æ£€æŸ¥æ˜¯å¦è¶…è¿‡é…é¢"""
        # TODO: å®ç°é…é¢æ£€æŸ¥é€»è¾‘
        pass
    
    def record_usage(self, record: UsageRecord):
        """è®°å½•ä½¿ç”¨æƒ…å†µ"""
        # TODO: å®ç°ä½¿ç”¨è®°å½•é€»è¾‘
        pass
    
    def get_usage_stats(
        self,
        user_id: str,
        start_date: Optional[datetime] = None,
        end_date: Optional[datetime] = None
    ) -> Dict[str, Any]:
        """è·å–ä½¿ç”¨ç»Ÿè®¡"""
        # TODO: å®ç°ç»Ÿè®¡é€»è¾‘
        pass

class AlertSystem:
    """å‘Šè­¦ç³»ç»Ÿ"""
    
    def __init__(self, quota_manager: QuotaManager):
        self.quota_manager = quota_manager
        self.alert_thresholds = [0.8, 0.9, 1.0]  # 80%, 90%, 100%
    
    def check_and_alert(self, user_id: str):
        """æ£€æŸ¥å¹¶å‘é€å‘Šè­¦"""
        # TODO: å®ç°å‘Šè­¦é€»è¾‘
        pass
    
    def send_alert(self, user: User, message: str):
        """å‘é€å‘Šè­¦é€šçŸ¥"""
        # TODO: å®ç°é€šçŸ¥å‘é€ï¼ˆé‚®ä»¶/çŸ­ä¿¡/Webhookï¼‰
        pass

class EnterpriseAPIManager:
    """ä¼ä¸š API ç®¡ç†å™¨"""
    
    def __init__(self):
        self.quota_manager = QuotaManager()
        self.alert_system = AlertSystem(self.quota_manager)
        self.llm_manager = MultiLLMManager()  # ä»ä¸Šä¸€èŠ‚å¯¼å…¥
    
    def authenticate(self, api_key: str) -> Optional[User]:
        """éªŒè¯ API Key"""
        # TODO: å®ç°è®¤è¯é€»è¾‘
        pass
    
    async def chat_completion(
        self,
        api_key: str,
        messages: List[Message],
        provider: APIProvider = APIProvider.OPENAI,
        **kwargs
    ) -> CompletionResponse:
        """å¸¦é…é¢æ§åˆ¶çš„èŠå¤©è¡¥å…¨"""
        # TODO: å®ç°ä»¥ä¸‹é€»è¾‘
        # 1. éªŒè¯ API Key
        # 2. æ£€æŸ¥é…é¢
        # 3. è°ƒç”¨ LLM API
        # 4. è®°å½•ä½¿ç”¨æƒ…å†µ
        # 5. æ£€æŸ¥å‘Šè­¦
        pass
    
    def get_billing_report(
        self,
        user_id: str,
        start_date: datetime,
        end_date: datetime
    ) -> Dict[str, Any]:
        """ç”Ÿæˆè´¦å•æŠ¥å‘Š"""
        # TODO: å®ç°è´¦å•ç”Ÿæˆé€»è¾‘
        pass

# æµ‹è¯•ä»£ç 
async def test_enterprise_system():
    manager = EnterpriseAPIManager()
    
    # åˆ›å»ºç”¨æˆ·
    user = User(
        id="user-001",
        name="æµ‹è¯•ç”¨æˆ·",
        email="test@example.com",
        tier="pro"
    )
    user_id = manager.quota_manager.create_user(user)
    
    # ç”Ÿæˆ API Key
    api_key = manager.quota_manager.generate_api_key(user_id)
    
    # è®¾ç½®é…é¢
    quota = Quota(
        user_id=user_id,
        quota_type=QuotaType.DAILY,
        max_calls=100,
        max_tokens=100000,
        max_cost=10.0,
        reset_at=datetime.now() + timedelta(days=1)
    )
    manager.quota_manager.set_quota(quota)
    
    # æµ‹è¯• API è°ƒç”¨
    messages = [Message(role="user", content="Hello")]
    
    try:
        response = await manager.chat_completion(
            api_key=api_key,
            messages=messages,
            provider=APIProvider.OPENAI
        )
        print(f"å“åº”: {response.content}")
    except Exception as e:
        print(f"é”™è¯¯: {e}")
    
    # è·å–ä½¿ç”¨ç»Ÿè®¡
    stats = manager.quota_manager.get_usage_stats(user_id)
    print(f"\nä½¿ç”¨ç»Ÿè®¡: {stats}")

# asyncio.run(test_enterprise_system())
```

**è¯„åˆ†æ ‡å‡†**ï¼š
- å¤šç§Ÿæˆ·å’Œ API Key ç®¡ç†ï¼ˆ20åˆ†ï¼‰
- é…é¢æ£€æŸ¥å’Œé™åˆ¶ï¼ˆ20åˆ†ï¼‰
- ä½¿ç”¨è¿½è¸ªå’Œå­˜å‚¨ï¼ˆ20åˆ†ï¼‰
- æˆæœ¬è®¡ç®—å’Œè´¦å•ï¼ˆ20åˆ†ï¼‰
- å‘Šè­¦ç³»ç»Ÿï¼ˆ20åˆ†ï¼‰

---

### æŒ‘æˆ˜ 2ï¼šæ™ºèƒ½ API ç¼“å­˜ç³»ç»Ÿï¼ˆéš¾åº¦ï¼šâ­â­â­â­â­ï¼‰

**éœ€æ±‚**ï¼š
è®¾è®¡ä¸€ä¸ªæ™ºèƒ½ç¼“å­˜ç³»ç»Ÿï¼Œå‡å°‘ API è°ƒç”¨å’Œæˆæœ¬ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. **è¯­ä¹‰ç¼“å­˜**ï¼šç›¸ä¼¼é—®é¢˜ä½¿ç”¨ç¼“å­˜ç»“æœ
2. **TTL ç®¡ç†**ï¼šä¸åŒç±»å‹çš„æŸ¥è¯¢æœ‰ä¸åŒçš„è¿‡æœŸæ—¶é—´
3. **LRU æ·˜æ±°**ï¼šå†…å­˜ä¸è¶³æ—¶æ·˜æ±°æœ€å°‘ä½¿ç”¨çš„ç¼“å­˜
4. **ç¼“å­˜é¢„çƒ­**ï¼šé¢„åŠ è½½çƒ­é—¨æŸ¥è¯¢
5. **ç»Ÿè®¡æŠ¥å‘Š**ï¼šç¼“å­˜å‘½ä¸­ç‡ã€èŠ‚çœæˆæœ¬ç­‰

**ä»£ç æ¡†æ¶**ï¼š

```python
from typing import Dict, Any, Optional, List, Tuple
from dataclasses import dataclass, field
from datetime import datetime, timedelta
from collections import OrderedDict
import hashlib
import json

@dataclass
class CacheEntry:
    """ç¼“å­˜æ¡ç›®"""
    key: str
    value: Any
    created_at: datetime
    accessed_at: datetime
    access_count: int
    ttl: int  # ç§’
    tokens_saved: int
    cost_saved: float
    
    @property
    def is_expired(self) -> bool:
        """æ˜¯å¦è¿‡æœŸ"""
        return datetime.now() > self.created_at + timedelta(seconds=self.ttl)

class SemanticCache:
    """è¯­ä¹‰ç¼“å­˜ç³»ç»Ÿ"""
    
    def __init__(
        self,
        max_size: int = 1000,
        default_ttl: int = 3600,
        similarity_threshold: float = 0.85
    ):
        self.max_size = max_size
        self.default_ttl = default_ttl
        self.similarity_threshold = similarity_threshold
        
        self.cache: OrderedDict[str, CacheEntry] = OrderedDict()
        self.embeddings: Dict[str, List[float]] = {}
        
        # ç»Ÿè®¡ä¿¡æ¯
        self.hits = 0
        self.misses = 0
        self.total_tokens_saved = 0
        self.total_cost_saved = 0.0
    
    def _generate_key(self, messages: List[Message]) -> str:
        """ç”Ÿæˆç¼“å­˜é”®"""
        # TODO: å®ç°é”®ç”Ÿæˆé€»è¾‘
        pass
    
    def _compute_embedding(self, text: str) -> List[float]:
        """è®¡ç®—æ–‡æœ¬åµŒå…¥ï¼ˆç”¨äºè¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰"""
        # TODO: å®ç°åµŒå…¥è®¡ç®—ï¼ˆå¯ä»¥è°ƒç”¨ OpenAI Embedding APIï¼‰
        pass
    
    def _cosine_similarity(self, vec1: List[float], vec2: List[float]) -> float:
        """è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦"""
        # TODO: å®ç°ç›¸ä¼¼åº¦è®¡ç®—
        pass
    
    def _find_similar(self, key: str, embedding: List[float]) -> Optional[str]:
        """æŸ¥æ‰¾è¯­ä¹‰ç›¸ä¼¼çš„ç¼“å­˜"""
        # TODO: å®ç°ç›¸ä¼¼åº¦æœç´¢
        pass
    
    def _evict_lru(self):
        """æ·˜æ±°æœ€å°‘ä½¿ç”¨çš„ç¼“å­˜"""
        # TODO: å®ç° LRU æ·˜æ±°ç­–ç•¥
        pass
    
    def get(
        self,
        messages: List[Message],
        use_semantic: bool = True
    ) -> Optional[CompletionResponse]:
        """è·å–ç¼“å­˜"""
        # TODO: å®ç°ç¼“å­˜æŸ¥è¯¢é€»è¾‘
        # 1. ç”Ÿæˆç¼“å­˜é”®
        # 2. ç²¾ç¡®åŒ¹é…æŸ¥æ‰¾
        # 3. è¯­ä¹‰ç›¸ä¼¼æŸ¥æ‰¾ï¼ˆå¦‚æœå¯ç”¨ï¼‰
        # 4. æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        pass
    
    def set(
        self,
        messages: List[Message],
        response: CompletionResponse,
        ttl: Optional[int] = None
    ):
        """è®¾ç½®ç¼“å­˜"""
        # TODO: å®ç°ç¼“å­˜å­˜å‚¨é€»è¾‘
        # 1. ç”Ÿæˆé”®å’ŒåµŒå…¥
        # 2. æ£€æŸ¥å®¹é‡ï¼Œå¿…è¦æ—¶æ·˜æ±°
        # 3. å­˜å‚¨ç¼“å­˜
        pass
    
    def warm_up(self, popular_queries: List[Tuple[List[Message], CompletionResponse]]):
        """ç¼“å­˜é¢„çƒ­"""
        # TODO: å®ç°é¢„çƒ­é€»è¾‘
        pass
    
    def get_stats(self) -> Dict[str, Any]:
        """è·å–ç»Ÿè®¡ä¿¡æ¯"""
        total = self.hits + self.misses
        hit_rate = self.hits / total if total > 0 else 0.0
        
        return {
            "hits": self.hits,
            "misses": self.misses,
            "hit_rate": hit_rate,
            "cache_size": len(self.cache),
            "tokens_saved": self.total_tokens_saved,
            "cost_saved": self.total_cost_saved
        }
    
    def clear_expired(self):
        """æ¸…ç†è¿‡æœŸç¼“å­˜"""
        # TODO: å®ç°è¿‡æœŸæ¸…ç†é€»è¾‘
        pass

class CachedAPIManager:
    """å¸¦ç¼“å­˜çš„ API ç®¡ç†å™¨"""
    
    def __init__(self, llm_manager: MultiLLMManager):
        self.llm_manager = llm_manager
        self.cache = SemanticCache()
    
    async def chat_completion(
        self,
        messages: List[Message],
        provider: APIProvider = APIProvider.OPENAI,
        use_cache: bool = True,
        **kwargs
    ) -> CompletionResponse:
        """å¸¦ç¼“å­˜çš„èŠå¤©è¡¥å…¨"""
        # TODO: å®ç°ç¼“å­˜é€»è¾‘
        # 1. å°è¯•ä»ç¼“å­˜è·å–
        # 2. ç¼“å­˜æœªå‘½ä¸­ï¼Œè°ƒç”¨ API
        # 3. å°†ç»“æœå­˜å…¥ç¼“å­˜
        # 4. è¿”å›ç»“æœ
        pass

# æµ‹è¯•ä»£ç 
async def test_semantic_cache():
    manager = MultiLLMManager()
    cached_manager = CachedAPIManager(manager)
    
    # æµ‹è¯•ç›¸ä¼¼æŸ¥è¯¢
    queries = [
        "ä»€ä¹ˆæ˜¯ Python?",
        "Python æ˜¯ä»€ä¹ˆ?",
        "è¯·è§£é‡Š Python",
        "ä»€ä¹ˆæ˜¯ JavaScript?",  # ä¸ç›¸ä¼¼
    ]
    
    for query in queries:
        messages = [Message(role="user", content=query)]
        response = await cached_manager.chat_completion(messages)
        print(f"\nQ: {query}")
        print(f"ç¼“å­˜å‘½ä¸­: {response.from_cache if hasattr(response, 'from_cache') else False}")
    
    # æ‰“å°ç»Ÿè®¡
    stats = cached_manager.cache.get_stats()
    print(f"\n=== ç¼“å­˜ç»Ÿè®¡ ===")
    print(f"å‘½ä¸­ç‡: {stats['hit_rate']:.2%}")
    print(f"èŠ‚çœ Token: {stats['tokens_saved']}")
    print(f"èŠ‚çœæˆæœ¬: ${stats['cost_saved']:.4f}")

# asyncio.run(test_semantic_cache())
```

**è¯„åˆ†æ ‡å‡†**ï¼š
- åŸºç¡€ç¼“å­˜å®ç°ï¼ˆ15åˆ†ï¼‰
- è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…ï¼ˆ25åˆ†ï¼‰
- LRU æ·˜æ±°ç­–ç•¥ï¼ˆ20åˆ†ï¼‰
- TTL ç®¡ç†å’Œè¿‡æœŸæ¸…ç†ï¼ˆ15åˆ†ï¼‰
- ç»Ÿè®¡å’Œæˆæœ¬èŠ‚çœï¼ˆ25åˆ†ï¼‰

---

## å­¦ä¹ èµ„æº

### æ¨èé˜…è¯»
- [requests å®˜æ–¹æ–‡æ¡£](https://requests.readthedocs.io/)
- [httpx å®˜æ–¹æ–‡æ¡£](https://www.python-httpx.org/)
- [python-dotenv æ–‡æ¡£](https://pypi.org/project/python-dotenv/)
- [OpenAI API æ–‡æ¡£](https://platform.openai.com/docs/api-reference)

### è¿›é˜¶ä¸»é¢˜
- API ç½‘å…³è®¾è®¡
- æœåŠ¡ç½‘æ ¼ï¼ˆService Meshï¼‰
- åˆ†å¸ƒå¼è¿½è¸ªï¼ˆOpenTelemetryï¼‰
- GraphQL vs REST

---

**ä¸‹ä¸€ç« ï¼š[Module 8 - ç»¼åˆé¡¹ç›®](../module-8-capstone-project/8.0-æœ¬ç« ä»‹ç».md)**
