# 3.2 继承与多态

## 继承基础

```python
class BaseAgent:
    """基础 Agent 类"""
    
    def __init__(self, name: str):
        self.name = name
    
    def execute(self, task: str) -> str:
        """执行任务（子类重写）"""
        return f"{self.name} 执行: {task}"

class SearchAgent(BaseAgent):
    """搜索 Agent"""
    
    def execute(self, task: str) -> str:
        """重写执行方法"""
        return f"[搜索] {self.name}: 搜索 '{task}'"

class AnalysisAgent(BaseAgent):
    """分析 Agent"""
    
    def execute(self, task: str) -> str:
        return f"[分析] {self.name}: 分析 '{task}'"

# 多态：同一接口，不同实现
agents = [
    SearchAgent("搜索助手"),
    AnalysisAgent("分析助手")
]

for agent in agents:
    print(agent.execute("Python 教程"))
```

## 实战：Agent 层次结构

```python
from abc import ABC, abstractmethod
from typing import List

class Agent(ABC):
    """抽象 Agent 基类"""
    
    def __init__(self, name: str):
        self.name = name
        self.history: List[str] = []
    
    @abstractmethod
    def process(self, input: str) -> str:
        """处理输入（子类必须实现）"""
        pass
    
    def log(self, message: str) -> None:
        """记录日志"""
        self.history.append(f"[{self.name}] {message}")

class LLMAgent(Agent):
    """LLM Agent"""
    
    def __init__(self, name: str, model: str):
        super().__init__(name)
        self.model = model
    
    def process(self, input: str) -> str:
        self.log(f"使用 {self.model} 处理")
        return f"LLM 响应: {input}"

class ToolAgent(Agent):
    """工具 Agent"""
    
    def __init__(self, name: str, tools: List[str]):
        super().__init__(name)
        self.tools = tools
    
    def process(self, input: str) -> str:
        self.log(f"使用工具: {self.tools}")
        return f"工具执行结果"

# 使用
llm_agent = LLMAgent("GPT助手", "gpt-4")
tool_agent = ToolAgent("工具助手", ["search", "calc"])

print(llm_agent.process("你好"))
print(tool_agent.process("搜索"))
```

---

**下一节：[3.3 Protocol 与 ABC](3.3-Protocol与ABC.md)**
