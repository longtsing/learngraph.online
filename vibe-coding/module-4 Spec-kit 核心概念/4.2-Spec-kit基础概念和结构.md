# 4.2 Spec-kit åŸºç¡€æ¦‚å¿µå’Œç»“æ„

## ğŸ¯ æœ¬ç« ç›®æ ‡

å­¦å®Œæœ¬ç« ï¼Œä½ å°†æŒæ¡ï¼š
- Spec-kit çš„ 6 é˜¶æ®µå·¥ä½œæµ
- æ ¸å¿ƒæ–‡ä»¶ç»“æ„ï¼ˆspec.md, plan.md, tasks.mdï¼‰
- ä¸ Claude Code çš„é›†æˆæœºåˆ¶
- å‘½ä»¤ï¼ˆSlash Commandsï¼‰ç³»ç»Ÿ

---

## ğŸ“ Spec-kit æ ¸å¿ƒæ–‡ä»¶ç»“æ„

### é¡¹ç›®åˆå§‹åŒ–åçš„ç›®å½•ç»“æ„

```
my-project/
â”œâ”€â”€ .claude/                    # Claude Code é›†æˆ
â”‚   â””â”€â”€ commands/              # Spec-kit æ–œæ å‘½ä»¤
â”‚       â”œâ”€â”€ speckit.constitution.md
â”‚       â”œâ”€â”€ speckit.specify.md
â”‚       â”œâ”€â”€ speckit.clarify.md
â”‚       â”œâ”€â”€ speckit.plan.md
â”‚       â”œâ”€â”€ speckit.tasks.md
â”‚       â”œâ”€â”€ speckit.implement.md
â”‚       â”œâ”€â”€ speckit.analyze.md
â”‚       â””â”€â”€ speckit.checklist.md
â”‚
â”œâ”€â”€ .specify/                   # Spec-kit æ ¸å¿ƒç›®å½•
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â””â”€â”€ constitution.md    # é¡¹ç›®å®ªæ³•
â”‚   â”œâ”€â”€ scripts/               # è‡ªåŠ¨åŒ–è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ bash/             # Unix/Linux/macOS è„šæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ common.sh
â”‚   â”‚   â”‚   â”œâ”€â”€ create-new-feature.sh
â”‚   â”‚   â”‚   â”œâ”€â”€ setup-plan.sh
â”‚   â”‚   â”‚   â””â”€â”€ update-agent-context.sh
â”‚   â”‚   â””â”€â”€ powershell/       # Windows è„šæœ¬
â”‚   â”‚       â”œâ”€â”€ common.ps1
â”‚   â”‚       â”œâ”€â”€ create-new-feature.ps1
â”‚   â”‚       â”œâ”€â”€ setup-plan.ps1
â”‚   â”‚       â””â”€â”€ update-agent-context.ps1
â”‚   â””â”€â”€ templates/             # æ–‡æ¡£æ¨¡æ¿
â”‚       â”œâ”€â”€ spec-template.md
â”‚       â”œâ”€â”€ plan-template.md
â”‚       â”œâ”€â”€ tasks-template.md
â”‚       â”œâ”€â”€ agent-file-template.md
â”‚       â””â”€â”€ checklist-template.md
â”‚
â”œâ”€â”€ specs/                      # åŠŸèƒ½è§„æ ¼ç›®å½•
â”‚   â”œâ”€â”€ 001-user-auth/         # åŠŸèƒ½ #001
â”‚   â”‚   â”œâ”€â”€ spec.md           # è§„æ ¼è¯´æ˜ä¹¦
â”‚   â”‚   â”œâ”€â”€ plan.md           # æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ tasks.md          # ä»»åŠ¡åˆ†è§£
â”‚   â”‚   â”œâ”€â”€ checklist.md      # è´¨é‡æ£€æŸ¥è¡¨
â”‚   â”‚   â””â”€â”€ contracts/        # API å¥‘çº¦
â”‚   â”‚       â””â”€â”€ api.yaml      # OpenAPI è§„èŒƒ
â”‚   â”‚
â”‚   â””â”€â”€ 002-photo-album/       # åŠŸèƒ½ #002
â”‚       â”œâ”€â”€ spec.md
â”‚       â”œâ”€â”€ plan.md
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ src/                        # æºä»£ç ï¼ˆç”± implement ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ tests/
â”‚
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

### æ–‡ä»¶å‘½åè§„èŒƒ

**åŠŸèƒ½ç¼–å·è§„åˆ™ï¼š**
```
æ ¼å¼ï¼š{ç¼–å·}-{åŠŸèƒ½åç§°}

ç¤ºä¾‹ï¼š
âœ… 001-user-auth
âœ… 002-photo-album
âœ… 123-payment-gateway

âŒ 1-authï¼ˆç¼–å·ä¸å¤Ÿ 3 ä½ï¼‰
âŒ user-authenticationï¼ˆç¼ºå°‘ç¼–å·ï¼‰
```

**åˆ†æ”¯å‘½åè§„åˆ™ï¼š**
```
Git åˆ†æ”¯åç§°ä¸åŠŸèƒ½ç›®å½•ä¸€è‡´ï¼š

åŠŸèƒ½ç›®å½•ï¼šspecs/001-user-auth/
Git åˆ†æ”¯ï¼š001-user-auth

è‡ªåŠ¨åˆ›å»ºï¼š/speckit.specify ä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”åˆ†æ”¯
```

---

## ğŸ”„ å…­é˜¶æ®µå·¥ä½œæµè¯¦è§£

### å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SPEC-KIT å…­é˜¶æ®µå·¥ä½œæµ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é˜¶æ®µ 0: Constitutionï¼ˆå®ªæ³•ï¼‰[å¯é€‰ä½†æ¨è]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.constitution                            â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼šé¡¹ç›®çš„æ ¸å¿ƒåŸåˆ™                               â”‚
â”‚ è¾“å‡ºï¼š.specify/memory/constitution.md             â”‚
â”‚                                                  â”‚
â”‚ å†…å®¹ï¼š                                            â”‚
â”‚  - æ¶æ„åŸåˆ™ï¼ˆå¦‚ï¼šåº“ä¼˜å…ˆã€CLI ä¼˜å…ˆï¼‰                 â”‚
â”‚  - è´¨é‡æ ‡å‡†ï¼ˆå¦‚ï¼šTDDã€ä»£ç è¦†ç›–ç‡ï¼‰                  â”‚
â”‚  - æŠ€æœ¯çº¦æŸï¼ˆå¦‚ï¼šæœ€å¤š 3 ä¸ªä¾èµ–ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 1: Specificationï¼ˆè§„æ ¼è¯´æ˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.specify [åŠŸèƒ½æè¿°]                       â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼šè‡ªç„¶è¯­è¨€åŠŸèƒ½æè¿°                             â”‚
â”‚ è¾“å‡ºï¼šspecs/{ç¼–å·}-{åç§°}/spec.md                  â”‚
â”‚                                                  â”‚
â”‚ å†…å®¹ï¼š                                            â”‚
â”‚  - ç”¨æˆ·æ•…äº‹ï¼ˆP1, P2, P3 ä¼˜å…ˆçº§ï¼‰                   â”‚
â”‚  - åŠŸèƒ½éœ€æ±‚ï¼ˆMUST, SHOULD, MAYï¼‰                  â”‚
â”‚  - æˆåŠŸæ ‡å‡†ï¼ˆå¯æµ‹é‡çš„ç›®æ ‡ï¼‰                         â”‚
â”‚  - è¾¹ç¼˜æƒ…å†µ                                        â”‚
â”‚  - [NEEDS CLARIFICATION] æ ‡è®°ï¼ˆæœ€å¤š 3 ä¸ªï¼‰         â”‚
â”‚                                                  â”‚
â”‚ âš ï¸ å…³é”®ï¼šæŠ€æœ¯æ— å…³ï¼Œåªæè¿° What å’Œ Why               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 2: Clarificationï¼ˆæ¾„æ¸…ï¼‰[å¯é€‰]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.clarify                                 â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼šspec.md ä¸­çš„ [NEEDS CLARIFICATION] æ ‡è®°      â”‚
â”‚ è¾“å‡ºï¼šæ›´æ–°åçš„ spec.md                             â”‚
â”‚                                                  â”‚
â”‚ è¿‡ç¨‹ï¼š                                            â”‚
â”‚  1. AI è¯†åˆ«æ‰€æœ‰å¾…æ¾„æ¸…é¡¹                            â”‚
â”‚  2. é€ä¸ªæé—®ï¼ˆæœ€å¤š 5 ä¸ªé—®é¢˜ï¼‰                       â”‚
â”‚  3. æä¾›å¤šé€‰æˆ–ç®€ç­”é€‰é¡¹                              â”‚
â”‚  4. æ ¹æ®å›ç­”æ›´æ–° spec.md                           â”‚
â”‚  5. è®°å½•æ¾„æ¸…è¿‡ç¨‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 3: Planningï¼ˆæŠ€æœ¯æ–¹æ¡ˆï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.plan [æŠ€æœ¯æ ˆæè¿°]                        â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼š                                            â”‚
â”‚  - spec.mdï¼ˆéœ€æ±‚ï¼‰                                â”‚
â”‚  - constitution.mdï¼ˆçº¦æŸï¼‰                        â”‚
â”‚  - æŠ€æœ¯é€‰å‹                                        â”‚
â”‚                                                  â”‚
â”‚ è¾“å‡ºï¼š                                            â”‚
â”‚  - specs/{ç¼–å·}/plan.mdï¼ˆæŠ€æœ¯æ–¹æ¡ˆï¼‰                â”‚
â”‚  - specs/{ç¼–å·}/contracts/ï¼ˆAPI å¥‘çº¦ï¼‰             â”‚
â”‚                                                  â”‚
â”‚ å†…å®¹ï¼š                                            â”‚
â”‚  - æŠ€æœ¯æ ˆï¼ˆè¯­è¨€ã€æ¡†æ¶ã€æ•°æ®åº“ï¼‰                      â”‚
â”‚  - æ•°æ®æ¨¡å‹                                        â”‚
â”‚  - API å¥‘çº¦ï¼ˆOpenAPI/GraphQLï¼‰                    â”‚
â”‚  - æµ‹è¯•ç­–ç•¥                                        â”‚
â”‚  - å®ªæ³•åˆè§„æ€§æ£€æŸ¥                                   â”‚
â”‚  - å¤æ‚åº¦è¯æ˜                                      â”‚
â”‚                                                  â”‚
â”‚ âš ï¸ å…³é”®ï¼šæ‰€æœ‰æŠ€æœ¯å†³ç­–åœ¨æ­¤é˜¶æ®µç¡®å®š                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 4: Task Breakdownï¼ˆä»»åŠ¡åˆ†è§£ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.tasks                                   â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼š                                            â”‚
â”‚  - spec.mdï¼ˆéœ€æ±‚ï¼‰                                â”‚
â”‚  - plan.mdï¼ˆæŠ€æœ¯æ–¹æ¡ˆï¼‰                             â”‚
â”‚                                                  â”‚
â”‚ è¾“å‡ºï¼šspecs/{ç¼–å·}/tasks.md                       â”‚
â”‚                                                  â”‚
â”‚ å†…å®¹ï¼š                                            â”‚
â”‚  - Phase 1: Setupï¼ˆåˆå§‹åŒ–ï¼‰                       â”‚
â”‚  - Phase 2: Foundationï¼ˆåŸºç¡€è®¾æ–½ï¼‰                 â”‚
â”‚  - Phase 3: User Storiesï¼ˆç”¨æˆ·æ•…äº‹å®ç°ï¼‰            â”‚
â”‚  - Phase 4: Polishï¼ˆæ‰“ç£¨ï¼‰                        â”‚
â”‚  - ä¾èµ–å…³ç³»æ ‡æ³¨                                    â”‚
â”‚  - [P] å¹¶è¡Œä»»åŠ¡æ ‡è®°                                â”‚
â”‚  - [US#] ç”¨æˆ·æ•…äº‹å…³è”                              â”‚
â”‚                                                  â”‚
â”‚ æ ¼å¼ï¼š                                            â”‚
â”‚  - [ ] T001 [P] [US1] ä»»åŠ¡æè¿° at /absolute/path  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 5: Implementationï¼ˆå®ç°ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.implement                               â”‚
â”‚                                                  â”‚
â”‚ è¾“å…¥ï¼š                                            â”‚
â”‚  - tasks.mdï¼ˆä»»åŠ¡åˆ—è¡¨ï¼‰                            â”‚
â”‚  - plan.mdï¼ˆæŠ€æœ¯æ–¹æ¡ˆï¼‰                             â”‚
â”‚  - spec.mdï¼ˆéœ€æ±‚ï¼‰                                â”‚
â”‚                                                  â”‚
â”‚ è¾“å‡ºï¼š                                            â”‚
â”‚  - src/ ç›®å½•ä¸‹çš„æºä»£ç                              â”‚
â”‚  - tests/ ç›®å½•ä¸‹çš„æµ‹è¯•ä»£ç                          â”‚
â”‚  - æ›´æ–°åçš„ tasks.mdï¼ˆæ ‡è®°å®Œæˆï¼‰                    â”‚
â”‚                                                  â”‚
â”‚ æ‰§è¡Œæµç¨‹ï¼š                                         â”‚
â”‚  1. æŒ‰ Phase é¡ºåºæ‰§è¡Œ                              â”‚
â”‚  2. éµå¾ªä¾èµ–å…³ç³»                                   â”‚
â”‚  3. TDDï¼šå…ˆå†™æµ‹è¯•å†å†™å®ç°                           â”‚
â”‚  4. [P] ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ                               â”‚
â”‚  5. é‡é”™æš‚åœï¼Œç­‰å¾…ä¿®å¤                              â”‚
â”‚  6. æ¯é˜¶æ®µå®ŒæˆåéªŒè¯                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“

é˜¶æ®µ 6: Quality Validationï¼ˆè´¨é‡éªŒè¯ï¼‰[å¯é€‰]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /speckit.analyze                                 â”‚
â”‚ /speckit.checklist                               â”‚
â”‚                                                  â”‚
â”‚ åŠŸèƒ½ï¼š                                            â”‚
â”‚  - analyze: éªŒè¯ spec/plan/tasks ä¸€è‡´æ€§           â”‚
â”‚  - checklist: ç”Ÿæˆè´¨é‡æ£€æŸ¥æ¸…å•                     â”‚
â”‚                                                  â”‚
â”‚ æ£€æŸ¥é¡¹ï¼š                                          â”‚
â”‚  - å®ªæ³•åˆè§„æ€§                                      â”‚
â”‚  - éœ€æ±‚è¦†ç›–ç‡                                      â”‚
â”‚  - æµ‹è¯•è¦†ç›–ç‡                                      â”‚
â”‚  - å®‰å…¨æ ‡å‡†                                        â”‚
â”‚  - æ€§èƒ½æ ‡å‡†                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“„ æ ¸å¿ƒæ–‡ä»¶è¯¦è§£

### 1. spec.mdï¼ˆè§„æ ¼è¯´æ˜ä¹¦ï¼‰

**ç”¨é€”ï¼š** æŠ€æœ¯æ— å…³çš„éœ€æ±‚æè¿°

**ç»“æ„ï¼š**

```markdown
# Feature: [åŠŸèƒ½åç§°]

**Feature Branch**: 001-feature-name
**Created**: 2025-01-15
**Status**: Draft | Planning | In Progress | Complete

## User Scenariosï¼ˆç”¨æˆ·åœºæ™¯ï¼‰

### P1: [ä¸»è¦åœºæ™¯åç§°]
**Description**: ç”¨è‡ªç„¶è¯­è¨€æè¿°ç”¨æˆ·æ—…ç¨‹
**Priority**: P1 (Critical - æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»æœ‰)
**Priority Justification**: ä¸ºä»€ä¹ˆè¿™æ˜¯ P1ï¼Ÿ
**Independent Test**: å¦‚ä½•ç‹¬ç«‹æµ‹è¯•è¿™ä¸ªåœºæ™¯ï¼Ÿ

#### Acceptance Criteriaï¼ˆéªŒæ”¶æ ‡å‡†ï¼‰
- Given [å‰ç½®æ¡ä»¶]
- When [ç”¨æˆ·æ“ä½œ]
- Then [é¢„æœŸç»“æœ]
- And [é¢å¤–éªŒè¯ç‚¹]

### P2: [é‡è¦åœºæ™¯]
**Priority**: P2 (Important - é‡è¦ä½†éæ ¸å¿ƒ)
...

### P3: [å¢å¼ºåœºæ™¯]
**Priority**: P3 (Nice-to-have - é”¦ä¸Šæ·»èŠ±)
...

### Edge Casesï¼ˆè¾¹ç¼˜æƒ…å†µï¼‰
- **åœºæ™¯**: [å¼‚å¸¸æƒ…å†µæè¿°]
  - **é¢„æœŸè¡Œä¸º**: [ç³»ç»Ÿåº”å¦‚ä½•å“åº”]

## Requirementsï¼ˆéœ€æ±‚ï¼‰

### Functional Requirementsï¼ˆåŠŸèƒ½éœ€æ±‚ï¼‰
- FR-001: ç³»ç»Ÿ **MUST** [å¼ºåˆ¶èƒ½åŠ›] when [æ¡ä»¶]
- FR-002: ç”¨æˆ· **MUST** be able to [å¿…é¡»èƒ½å¤Ÿåšä»€ä¹ˆ]
- FR-003: ç³»ç»Ÿ **SHOULD** [æ¨èèƒ½åŠ›]ï¼ˆéå¼ºåˆ¶ï¼‰
- FR-004: **NEEDS CLARIFICATION**: [ä¸æ˜ç¡®çš„éœ€æ±‚é—®é¢˜]

### Key Entitiesï¼ˆå…³é”®å®ä½“ï¼‰
- **Entity Name**: [å®ä½“æè¿°]
  - Attributes: [å±æ€§åˆ—è¡¨]
  - Relationships: [ä¸å…¶ä»–å®ä½“çš„å…³ç³»]

## Success Criteriaï¼ˆæˆåŠŸæ ‡å‡†ï¼‰

### User Experienceï¼ˆç”¨æˆ·ä½“éªŒï¼‰
- SC-001: ç”¨æˆ·å®Œæˆ [æ“ä½œ] åœ¨ < X ç§’å†…
- SC-002: [ç”¨æˆ·æ»¡æ„åº¦æŒ‡æ ‡]

### System Performanceï¼ˆç³»ç»Ÿæ€§èƒ½ï¼‰
- SC-003: API å“åº”æ—¶é—´ < 200ms (P95)
- SC-004: æ”¯æŒ [å¹¶å‘é‡]

### Business Impactï¼ˆä¸šåŠ¡å½±å“ï¼‰
- SC-005: [å¯æµ‹é‡çš„ä¸šåŠ¡æˆæœ]

## Clarificationsï¼ˆæ¾„æ¸…è®°å½•ï¼‰[å¯é€‰]
### Session 2025-01-15
- Q: [é—®é¢˜] â†’ A: [ç­”æ¡ˆ]
  - Updated: [å¦‚ä½•æ›´æ–°äº† spec]
```

**å…³é”®åŸåˆ™ï¼š**

1. **æŠ€æœ¯æ— å…³**
   ```markdown
   âŒ é”™è¯¯ï¼š"ç”¨ React Hooks å®ç°ç”¨æˆ·ç™»å½•"
   âœ… æ­£ç¡®ï¼š"ç”¨æˆ·å¯ä»¥é€šè¿‡é‚®ç®±å’Œå¯†ç ç™»å½•"
   ```

2. **å¯æµ‹é‡çš„æˆåŠŸæ ‡å‡†**
   ```markdown
   âŒ é”™è¯¯ï¼š"ç³»ç»Ÿè¦å¿«"
   âœ… æ­£ç¡®ï¼š"API å“åº”æ—¶é—´ < 200ms (P95)"
   ```

3. **ç‹¬ç«‹å¯æµ‹è¯•çš„ç”¨æˆ·æ•…äº‹**
   ```markdown
   âŒ é”™è¯¯ï¼š"å®ç°å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿ"ï¼ˆå¤ªå¤§ï¼‰
   âœ… æ­£ç¡®ï¼š
      - P1: ç”¨æˆ·æ³¨å†Œ
      - P2: ç”¨æˆ·ç™»å½•
      - P3: å¯†ç é‡ç½®
      ï¼ˆæ¯ä¸ªå¯ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•ï¼‰
   ```

4. **é™åˆ¶æ¾„æ¸…æ ‡è®°**
   ```markdown
   æœ€å¤š 3 ä¸ª [NEEDS CLARIFICATION] æ ‡è®°

   å¦‚æœè¶…è¿‡ 3 ä¸ª â†’ è¯´æ˜éœ€æ±‚å¤ªæ¨¡ç³Šï¼Œéœ€è¦æ›´å¤šå‰æœŸè®¨è®º
   ```

---

### 2. plan.mdï¼ˆæŠ€æœ¯æ–¹æ¡ˆï¼‰

**ç”¨é€”ï¼š** å°†æŠ€æœ¯æ— å…³çš„ spec è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„æŠ€æœ¯è®¾è®¡

**ç»“æ„ï¼š**

```markdown
# Implementation Plan: [åŠŸèƒ½åç§°]

**Branch**: 001-feature-name
**Date**: 2025-01-15
**Spec**: /absolute/path/to/specs/001-feature/spec.md

## Summaryï¼ˆæ‘˜è¦ï¼‰
[1-2 æ®µè¯æ€»ç»“éœ€æ±‚å’ŒæŠ€æœ¯æ–¹æ¡ˆ]

## Technical Contextï¼ˆæŠ€æœ¯ä¸Šä¸‹æ–‡ï¼‰
- **Language/Version**: Python 3.11+ / Node.js 20+ / Go 1.21+
- **Primary Dependencies**: FastAPI 0.104, SQLAlchemy 2.0, pytest
- **Storage**: PostgreSQL 15 / MongoDB 6.0 / Redis 7.0
- **Testing Framework**: pytest / Jest / Go testing
- **Target Platform**: Linux containers / Kubernetes / Serverless
- **Performance Goals**: < 200ms P95 latency, 10k RPS
- **Constraints**:
  - Offline-capable
  - Max 100MB memory
  - **NEEDS CLARIFICATION**: [æŠ€æœ¯ä¸Šä¸æ˜ç¡®çš„ç‚¹]

## Constitution Checkï¼ˆå®ªæ³•æ£€æŸ¥ï¼‰

### Simplicity Gate (Article VII)ï¼ˆç®€æ´æ€§é—¨æ§ï¼‰
- [ ] Using â‰¤3 dependencies? **YES / NO**
  - Justification: [å¦‚æœè¶…è¿‡ï¼Œä¸ºä»€ä¹ˆï¼Ÿ]
- [ ] No future-proofing? **YES / NO**
  - Justification: [æ˜¯å¦æœ‰è¿‡åº¦è®¾è®¡ï¼Ÿ]

### Anti-Abstraction Gate (Article VIII)ï¼ˆåæŠ½è±¡é—¨æ§ï¼‰
- [ ] Using framework directly? **YES / NO**
  - Justification: [æ˜¯å¦æ·»åŠ äº†ä¸å¿…è¦çš„å°è£…ï¼Ÿ]
- [ ] Single model representation? **YES / NO**
  - Justification: [æ˜¯å¦æœ‰å¤šä½™çš„æ•°æ®è¡¨ç¤ºï¼Ÿ]

### TDD Gate (Article III)ï¼ˆæµ‹è¯•é©±åŠ¨é—¨æ§ï¼‰
- [ ] Test-first approach documented? **YES / NO**
  - Strategy: [æµ‹è¯•ç­–ç•¥è¯´æ˜]

## Project Structureï¼ˆé¡¹ç›®ç»“æ„ï¼‰

### Documentationï¼ˆæ–‡æ¡£ï¼‰
```
specs/001-feature/
â”œâ”€â”€ plan.mdï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ research.mdï¼ˆè°ƒç ”ç»“æœï¼‰
â”œâ”€â”€ data-model.mdï¼ˆæ•°æ®æ¨¡å‹è¯¦ç»†è®¾è®¡ï¼‰
â”œâ”€â”€ quickstart.mdï¼ˆå¿«é€Ÿå¼€å§‹æŒ‡å—ï¼‰
â””â”€â”€ contracts/
    â”œâ”€â”€ api.yamlï¼ˆOpenAPI 3.0ï¼‰
    â””â”€â”€ events.mdï¼ˆäº‹ä»¶å®šä¹‰ï¼‰
```

### Source Codeï¼ˆæºä»£ç ï¼‰
```
src/
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.py
â”‚   â””â”€â”€ album.py
â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ auth.py
â”‚   â””â”€â”€ album.py
â”œâ”€â”€ api/              # API ç«¯ç‚¹
â”‚   â”œâ”€â”€ users.py
â”‚   â””â”€â”€ albums.py
â””â”€â”€ tests/            # æµ‹è¯•
    â”œâ”€â”€ test_models.py
    â”œâ”€â”€ test_services.py
    â””â”€â”€ test_api.py
```

## Phase 0: Researchï¼ˆè°ƒç ”é˜¶æ®µï¼‰
[è§£å†³æ‰€æœ‰ spec.md ä¸­çš„ NEEDS CLARIFICATION]

### Security Researchï¼ˆå®‰å…¨è°ƒç ”ï¼‰
- OAuth2 vs JWT: [ç ”ç©¶ç»“è®º]
- Password hashing: bcrypt vs Argon2

### Performance Benchmarksï¼ˆæ€§èƒ½åŸºå‡†ï¼‰
- PostgreSQL vs MongoDB for this use case
- Caching strategy (Redis vs in-memory)

### Library Compatibilityï¼ˆåº“å…¼å®¹æ€§ï¼‰
- FastAPI + SQLAlchemy: Proven, stable
- Alembic for migrations

## Phase 1: Designï¼ˆè®¾è®¡é˜¶æ®µï¼‰

### Data Modelï¼ˆæ•°æ®æ¨¡å‹ï¼‰

#### User Entityï¼ˆç”¨æˆ·å®ä½“ï¼‰
```python
# /absolute/path/to/src/models/user.py
from sqlalchemy import Column, Integer, String, Boolean, DateTime
from datetime import datetime

class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True, autoincrement=True)
    email = Column(String(255), unique=True, nullable=False)
    password_hash = Column(String(60), nullable=False)  # bcrypt
    email_verified = Column(Boolean, default=False)
    created_at = Column(DateTime, default=datetime.utcnow)

    # Relationships
    albums = relationship("Album", back_populates="user")
```

### API Contractï¼ˆAPI å¥‘çº¦ï¼‰

**OpenAPI Specification** (`contracts/api.yaml`):
```yaml
openapi: 3.0.0
info:
  title: Photo Album API
  version: 1.0.0

paths:
  /api/users/register:
    post:
      summary: Register new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  example: SecurePass123
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: integer
                    example: 42
                  message:
                    type: string
                    example: "Verification email sent"
        '409':
          description: Email already registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
```

### Test Strategyï¼ˆæµ‹è¯•ç­–ç•¥ï¼‰
- **Unit Tests**: æ¯ä¸ª model, service å‡½æ•°
- **Integration Tests**: API ç«¯ç‚¹ + æ•°æ®åº“
- **E2E Tests**: å®Œæ•´ç”¨æˆ·æµç¨‹
- **Test Coverage**: Minimum 80%

## Complexity Justificationï¼ˆå¤æ‚åº¦è¯æ˜ï¼‰

| Component | Complexity | Justification | Alternatives Rejected |
|-----------|------------|---------------|----------------------|
| Auth | High | OAuth2 + JWT required by enterprise | Simple password-only (insecure) |
| Caching | Medium | Redis for session management | In-memory (not scalable) |
```

**å…³é”®åŸåˆ™ï¼š**

1. **ç»å¯¹è·¯å¾„**
   ```markdown
   âŒ é”™è¯¯ï¼šsrc/models/user.py
   âœ… æ­£ç¡®ï¼š/Users/project/src/models/user.py
   ```

2. **å®ªæ³•åˆè§„**
   ```markdown
   âœ… æ¯ä¸ªè¿åå®ªæ³•çš„å†³ç­–å¿…é¡»æœ‰æ˜ç¡®ç†ç”±
   âŒ ä¸å…è®¸æ— ç†ç”±çš„å¤æ‚è®¾è®¡
   ```

3. **å¥‘çº¦ä¼˜å…ˆ**
   ```markdown
   âœ… OpenAPI spec å®šä¹‰åï¼Œå‰åç«¯å¹¶è¡Œå¼€å‘
   âŒ ä¸èƒ½ç­‰åç«¯å®ç°å®Œå†å®šä¹‰ API
   ```

---

### 3. tasks.mdï¼ˆä»»åŠ¡åˆ†è§£ï¼‰

**ç”¨é€”ï¼š** å°† plan åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„ä»»åŠ¡æ¸…å•

**ç»“æ„ï¼š**

```markdown
# Tasks: [åŠŸèƒ½åç§°]

## Formatï¼ˆæ ¼å¼è¯´æ˜ï¼‰
```
[TaskID] [Markers] [Story] Description at /absolute/file/path

Markers:
  [P]    = Parallel-capableï¼ˆå¯å¹¶è¡Œæ‰§è¡Œï¼‰
  [US#]  = User Story numberï¼ˆç”¨æˆ·æ•…äº‹ç¼–å·ï¼‰
```

## Phase 1: Setupï¼ˆåˆå§‹åŒ–é˜¶æ®µï¼‰
[å…±äº«åŸºç¡€è®¾æ–½ï¼Œæ‰€æœ‰ç”¨æˆ·æ•…äº‹çš„å‰ç½®ä¾èµ–]

- [ ] T001 Initialize project with Python 3.11 venv at /project/
  Command: `python3.11 -m venv /project/.venv`

- [ ] T002 [P] Install core dependencies at /project/requirements.txt
  Dependencies: FastAPI==0.104.0, SQLAlchemy==2.0.0, pytest==7.4.0

- [ ] T003 [P] Configure project structure at /project/
  ```
  /project/
  â”œâ”€â”€ src/
  â”œâ”€â”€ tests/
  â”œâ”€â”€ migrations/
  â””â”€â”€ config/
  ```

- [ ] T004 Create .gitignore at /project/.gitignore
  Ignore: .venv/, __pycache__/, *.pyc, .env

## Phase 2: Foundationï¼ˆåŸºç¡€é˜¶æ®µï¼‰
[é˜»å¡æ‰€æœ‰ç”¨æˆ·æ•…äº‹çš„æ ¸å¿ƒè®¾æ–½]

- [ ] T005 Create database schema at /project/migrations/001_create_users.sql
  ```sql
  CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(60) NOT NULL,
    email_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
  );
  CREATE INDEX idx_users_email ON users(email);
  ```

- [ ] T006 Implement User model at /project/src/models/user.py
  - Fields: id, email, password_hash, email_verified, created_at
  - Validations: Email format, password length

- [ ] T007 Implement database connection at /project/src/db.py
  - SQLAlchemy engine with connection pooling
  - Session factory with context manager
  - Load DATABASE_URL from environment

## Phase 3: User Storiesï¼ˆç”¨æˆ·æ•…äº‹é˜¶æ®µï¼‰

### US1: User Registrationï¼ˆç”¨æˆ·æ³¨å†Œï¼‰
[ä» spec.md çš„ P1 åœºæ™¯æ˜ å°„è€Œæ¥]

- [ ] T008 [US1] Create password hashing service at /project/src/services/auth.py
  Functions:
    - hash_password(plain: str) -> str  # bcrypt cost=12
    - verify_password(plain: str, hashed: str) -> bool

- [ ] T009 [P] [US1] Implement email service at /project/src/services/email.py
  Functions:
    - send_verification_email(email: str, token: str) -> bool
  - Use SMTP from environment (SMTP_HOST, SMTP_PORT)
  - Template: /project/templates/verification_email.html

- [ ] T010 [US1] Create registration endpoint POST /api/users/register
  File: /project/src/api/users.py
  Logic:
    1. Validate email format (regex)
    2. Validate password strength (8+ chars, uppercase, number)
    3. Check email uniqueness (query database)
    4. Hash password (auth service)
    5. Save user to database
    6. Generate verification token (JWT, 24hr expiry)
    7. Send verification email (email service)
    8. Return 201 with user ID
  Error handling:
    - 400: Invalid input
    - 409: Email already exists

- [ ] T011 [P] [US1] Write integration test at /project/tests/test_registration.py
  Test cases:
    - test_successful_registration()
    - test_duplicate_email_returns_409()
    - test_weak_password_returns_400()
    - test_invalid_email_format_returns_400()
    - test_verification_email_sent()

**CHECKPOINT**: Validate US1 independently before US2

### US2: Email Verificationï¼ˆé‚®ç®±éªŒè¯ï¼‰
[ç‹¬ç«‹äº US1ï¼Œå¯å¹¶è¡Œæˆ–é¡ºåºå¼€å‘]

- [ ] T012 [US2] Create token generation service at /project/src/services/tokens.py
  Functions:
    - generate_verification_token(user_id: int) -> str  # JWT
    - verify_token(token: str) -> int | None  # Returns user_id

- [ ] T013 [US2] Implement verification endpoint GET /api/users/verify
  File: /project/src/api/users.py
  Logic:
    1. Extract token from query param
    2. Verify token (tokens service)
    3. Update user.email_verified = True
    4. Return 200 with success message
  Error handling:
    - 400: Invalid/expired token
    - 404: User not found

- [ ] T014 [P] [US2] Write integration test at /project/tests/test_verification.py
  Test cases:
    - test_valid_token_verifies_email()
    - test_expired_token_returns_400()
    - test_invalid_token_returns_400()

**CHECKPOINT**: Validate US2 independently

## Phase 4: Polish & Cross-Cutting Concernsï¼ˆæ‰“ç£¨é˜¶æ®µï¼‰

- [ ] T015 Add API documentation at /project/docs/api.md
  - Auto-generate from OpenAPI spec
  - Include usage examples

- [ ] T016 Implement rate limiting at /project/src/middleware/rate_limit.py
  - 5 registration attempts per hour per IP
  - Use Redis for tracking

- [ ] T017 Security audit for OWASP Top 10
  Checklist:
    - [ ] SQL Injection protection (SQLAlchemy ORM)
    - [ ] XSS prevention (input sanitization)
    - [ ] CSRF tokens (for future web UI)
    - [ ] Secure password storage (bcrypt)
    - [ ] HTTPS enforcement

- [ ] T018 Performance optimization
  - Add database indexes
  - Enable query caching
  - Optimize email sending (async)
```

**å…³é”®åŸåˆ™ï¼š**

1. **ä»»åŠ¡æ ¼å¼**
   ```markdown
   æ ¼å¼ï¼š[ID] [Markers] [Story] Description at /path

   ç¤ºä¾‹ï¼š
   - [ ] T009 [P] [US1] Implement email service at /project/src/services/email.py
         ^^^^ ^^^ ^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
         ID   å¹¶è¡Œ æ•…äº‹  ä»»åŠ¡æè¿°                   ç»å¯¹è·¯å¾„
   ```

2. **å¹¶è¡Œæ ‡è®°**
   ```markdown
   [P] = å¯å¹¶è¡Œæ‰§è¡Œï¼ˆä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–ï¼‰

   - [ ] T002 [P] Install dependencies
   - [ ] T003 [P] Configure linting
   â†‘ è¿™ä¸¤ä¸ªå¯ä»¥åŒæ—¶åš

   - [ ] T005 Create database schema
   - [ ] T006 Implement User model (depends on T005)
   â†‘ è¿™ä¸¤ä¸ªå¿…é¡»é¡ºåºåš
   ```

3. **é˜¶æ®µä¾èµ–**
   ```markdown
   Phase 1: Setup
      â†“ ï¼ˆå®Œæˆåæ‰èƒ½è¿›å…¥ Phase 2ï¼‰
   Phase 2: Foundationï¼ˆé˜»å¡æ‰€æœ‰ç”¨æˆ·æ•…äº‹ï¼‰
      â†“ ï¼ˆå®Œæˆåæ‰èƒ½è¿›å…¥ Phase 3ï¼‰
   Phase 3: User Storiesï¼ˆå¯ç‹¬ç«‹éªŒè¯ï¼‰
      â†“ ï¼ˆå®Œæˆåæ‰èƒ½è¿›å…¥ Phase 4ï¼‰
   Phase 4: Polish
   ```

4. **Checkpointï¼ˆæ£€æŸ¥ç‚¹ï¼‰**
   ```markdown
   æ¯ä¸ªç”¨æˆ·æ•…äº‹åå¿…é¡»æœ‰ CHECKPOINT

   **CHECKPOINT**: Validate US1 independently before US2

   æ„ä¹‰ï¼šç‹¬ç«‹æµ‹è¯•ï¼Œç¡®ä¿åŠŸèƒ½å¯ç”¨åå†ç»§ç»­
   ```

---

## ğŸ”Œ ä¸ Claude Code çš„é›†æˆæœºåˆ¶

### Slash Commandsï¼ˆæ–œæ å‘½ä»¤ï¼‰ç³»ç»Ÿ

**å‘½ä»¤å‘ç°æœºåˆ¶ï¼š**
```
Claude Code å¯åŠ¨æ—¶ï¼š
   â†“
æ‰«æ .claude/commands/ ç›®å½•
   â†“
åŠ è½½æ‰€æœ‰ .md æ–‡ä»¶
   â†“
è§£ææ–‡ä»¶å â†’ å‘½ä»¤å
   â†“
å‘½ä»¤åœ¨èŠå¤©ç•Œé¢å¯ç”¨
```

**å‘½ä»¤æ–‡ä»¶ç»“æ„ï¼š**

```markdown
<!-- .claude/commands/speckit.specify.md -->

# /speckit.specify - Create Feature Specification

## Prompt

You are creating a new feature specification following the Specification-Driven Development methodology.

## User Input

The user will provide: $ARGUMENTS

This should be a natural language description of the feature they want to build.

## Process

1. **Extract Feature Information**
   - Parse the feature description
   - Generate a short, meaningful feature name (2-4 words, no stop words)
   - Example: "user can upload photos" â†’ "photo-upload"

2. **Determine Feature Number**
   - Check existing feature numbers:
     - Remote branches: `git ls-remote origin | grep 'refs/heads/[0-9]'`
     - Local branches: `git branch | grep '^[0-9]'`
     - Specs directory: `ls specs/ | grep '^[0-9]'`
   - Use highest number + 1
   - Format: 3 digits (001, 002, 003, ...)

3. **Execute Script**
   Run: `.specify/scripts/bash/create-new-feature.sh "$ARGUMENTS"`

   This script will:
   - Create specs/{number}-{name}/ directory
   - Copy spec-template.md â†’ specs/{number}-{name}/spec.md
   - Create git branch {number}-{name}
   - Export SPECIFY_FEATURE environment variable

4. **Generate Specification**
   Using the spec template, create a detailed specification with:

   - **User Scenarios** (prioritized P1, P2, P3)
     - Each scenario independently testable
     - Given-When-Then format

   - **Functional Requirements**
     - MUST/SHOULD/MAY notation
     - Technology-agnostic
     - Maximum 3 [NEEDS CLARIFICATION] markers

   - **Success Criteria**
     - Measurable (numbers, times, percentages)
     - User-focused (not technical metrics)

   - **Edge Cases**
     - Error handling
     - Boundary conditions

5. **Iterate and Refine**
   - Present draft to user
   - Iterate up to 3 times to improve clarity
   - Ensure all sections are complete

## Output

Provide the user with:
- Feature number and branch name
- Path to spec.md
- Summary of the specification
- Next step recommendation: `/speckit.clarify` or `/speckit.plan`

## Example

User: "I want users to be able to create photo albums"

Output:
```
âœ“ Created feature 001-photo-albums
âœ“ Branch: 001-photo-albums
âœ“ Spec: specs/001-photo-albums/spec.md

## Summary
P1: Users can create albums with titles
P2: Users can add photos to albums
P3: Users can share albums

Next step: Run `/speckit.plan [tech stack]` to create implementation plan
```
```

**å‚æ•°ä¼ é€’ï¼š**
```bash
ç”¨æˆ·è¾“å…¥ï¼š/speckit.specify Build a photo album organizer

ç³»ç»Ÿå¤„ç†ï¼š
  1. å‘½ä»¤åï¼šspeckit.specify
  2. å‚æ•°ï¼š$ARGUMENTS = "Build a photo album organizer"
  3. åŠ è½½ï¼š.claude/commands/speckit.specify.md
  4. æ›¿æ¢ï¼š$ARGUMENTS â†’ "Build a photo album organizer"
  5. æ‰§è¡Œï¼šprompt ä¸­çš„æŒ‡ä»¤
```

### è„šæœ¬è‡ªåŠ¨åŒ–

**è„šæœ¬æ‰§è¡Œæµç¨‹ï¼š**

```bash
# create-new-feature.sh æ ¸å¿ƒé€»è¾‘

#!/bin/bash

# 1. è·å–é¡¹ç›®æ ¹ç›®å½•
REPO_ROOT=$(git rev-parse --show-toplevel)

# 2. è§£æåŠŸèƒ½æè¿°ï¼Œç”ŸæˆçŸ­åç§°
FEATURE_DESC="$1"
FEATURE_NAME=$(echo "$FEATURE_DESC" | \
  sed 's/[^a-zA-Z0-9 ]//g' | \  # ç§»é™¤ç‰¹æ®Šå­—ç¬¦
  tr '[:upper:]' '[:lower:]' | \ # è½¬å°å†™
  tr -s ' ' '-' | \              # ç©ºæ ¼è½¬è¿å­—ç¬¦
  sed 's/^-//;s/-$//')           # ç§»é™¤é¦–å°¾è¿å­—ç¬¦

# 3. ç¡®å®šç‰¹æ€§ç¼–å·ï¼ˆä¸‰æ¥æºå–æœ€å¤§å€¼ï¼‰
REMOTE_MAX=$(git ls-remote origin | grep -oE '[0-9]{3}' | sort -n | tail -1)
LOCAL_MAX=$(git branch -a | grep -oE '[0-9]{3}' | sort -n | tail -1)
SPECS_MAX=$(ls specs/ 2>/dev/null | grep -oE '^[0-9]{3}' | sort -n | tail -1)

MAX_NUM=$(echo -e "$REMOTE_MAX\n$LOCAL_MAX\n$SPECS_MAX" | sort -n | tail -1)
NEXT_NUM=$(printf "%03d" $((MAX_NUM + 1)))

# 4. åˆ›å»ºç›®å½•å’Œåˆ†æ”¯
BRANCH_NAME="${NEXT_NUM}-${FEATURE_NAME}"
FEATURE_DIR="specs/${BRANCH_NAME}"

mkdir -p "$FEATURE_DIR"
git checkout -b "$BRANCH_NAME"

# 5. å¤åˆ¶æ¨¡æ¿
cp .specify/templates/spec-template.md "$FEATURE_DIR/spec.md"

# 6. å¯¼å‡ºç¯å¢ƒå˜é‡
export SPECIFY_FEATURE="$NEXT_NUM"
export SPECIFY_FEATURE_DIR="$FEATURE_DIR"
export SPECIFY_SPEC_FILE="$FEATURE_DIR/spec.md"

# 7. è¾“å‡ºç»“æœï¼ˆJSON æ ¼å¼ï¼Œæ–¹ä¾¿ AI è§£æï¼‰
cat <<EOF
{
  "feature_number": "$NEXT_NUM",
  "branch_name": "$BRANCH_NAME",
  "feature_dir": "$FEATURE_DIR",
  "spec_file": "$FEATURE_DIR/spec.md"
}
EOF
```

**è·¨å¹³å°æ”¯æŒï¼š**
```
Unix/Linux/macOS â†’ .specify/scripts/bash/*.sh
Windows          â†’ .specify/scripts/powershell/*.ps1

è‡ªåŠ¨é€‰æ‹©ï¼š
  - macOS: Bash
  - Linux: Bash
  - Windows: PowerShell

æ‰‹åŠ¨æŒ‡å®šï¼š
  specify init my-project --script ps  # å¼ºåˆ¶ç”¨ PowerShell
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä½•æ—¶åˆ›å»º Constitutionï¼Ÿ

**æ¨èåˆ›å»ºå®ªæ³•çš„åœºæ™¯ï¼š**
```
âœ… å›¢é˜Ÿåä½œé¡¹ç›®ï¼ˆç»Ÿä¸€æ ‡å‡†ï¼‰
âœ… é•¿æœŸç»´æŠ¤é¡¹ç›®ï¼ˆé˜²æ­¢æŠ€æœ¯å€ºåŠ¡ï¼‰
âœ… ä¼ä¸šé¡¹ç›®ï¼ˆåˆè§„è¦æ±‚ï¼‰
âœ… å¤æ‚ç³»ç»Ÿï¼ˆæ¶æ„çº¦æŸï¼‰

âŒ ä¸€æ¬¡æ€§è„šæœ¬ï¼ˆæ— å¿…è¦ï¼‰
âŒ å¿«é€ŸåŸå‹ï¼ˆè¿‡åº¦çº¦æŸï¼‰
```

**å®ªæ³•ç¤ºä¾‹ï¼š**
```markdown
# é¡¹ç›®å®ªæ³• v1.0

## ç¬¬ 1 æ¡ï¼šç®€æ´ä¼˜å…ˆ
æ‰€æœ‰åŠŸèƒ½å¿…é¡»ä½¿ç”¨ â‰¤3 ä¸ªå¤–éƒ¨ä¾èµ–

## ç¬¬ 2 æ¡ï¼šæµ‹è¯•é©±åŠ¨å¼€å‘
æ‰€æœ‰ä»£ç å¿…é¡»å…ˆå†™æµ‹è¯•å†å†™å®ç°
æœ€ä½æµ‹è¯•è¦†ç›–ç‡ï¼š80%

## ç¬¬ 3 æ¡ï¼šAPI å¥‘çº¦ä¼˜å…ˆ
æ‰€æœ‰ API å¿…é¡»å…ˆå®šä¹‰ OpenAPI è§„èŒƒå†å®ç°

## çº¦æŸæ¡ä»¶
- æ€§èƒ½ï¼šAPI å“åº” < 200ms (P95)
- å®‰å…¨ï¼šOWASP Top 10 åˆè§„
- æŠ€æœ¯æ ˆï¼šPython 3.11+, PostgreSQL 15+
```

### 2. Spec vs Plan çš„è¾¹ç•Œ

**Specï¼ˆè§„æ ¼ï¼‰åº”è¯¥åŒ…å«ï¼š**
```markdown
âœ… ç”¨æˆ·æ•…äº‹ï¼ˆç”¨æˆ·è§†è§’çš„åŠŸèƒ½æè¿°ï¼‰
âœ… åŠŸèƒ½éœ€æ±‚ï¼ˆç³»ç»Ÿèƒ½åšä»€ä¹ˆï¼‰
âœ… æˆåŠŸæ ‡å‡†ï¼ˆå¦‚ä½•æµ‹é‡æˆåŠŸï¼‰
âœ… è¾¹ç¼˜æƒ…å†µï¼ˆå¼‚å¸¸å¦‚ä½•å¤„ç†ï¼‰

âŒ æŠ€æœ¯é€‰å‹ï¼ˆReact vs Vueï¼‰
âŒ æ•°æ®åº“è®¾è®¡ï¼ˆè¡¨ç»“æ„ï¼‰
âŒ API æ¥å£ï¼ˆendpoint å®šä¹‰ï¼‰
âŒ ä»£ç ç¤ºä¾‹
```

**Planï¼ˆæ–¹æ¡ˆï¼‰åº”è¯¥åŒ…å«ï¼š**
```markdown
âœ… æŠ€æœ¯æ ˆï¼ˆPython, FastAPI, PostgreSQLï¼‰
âœ… æ•°æ®æ¨¡å‹ï¼ˆè¡¨ç»“æ„ã€å­—æ®µã€å…³ç³»ï¼‰
âœ… API å¥‘çº¦ï¼ˆOpenAPI è§„èŒƒï¼‰
âœ… æµ‹è¯•ç­–ç•¥ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼‰
âœ… å®ªæ³•åˆè§„æ€§æ£€æŸ¥
âœ… å¤æ‚åº¦è¯æ˜

âŒ ç”¨æˆ·æ•…äº‹ï¼ˆåº”åœ¨ specï¼‰
âŒ æˆåŠŸæ ‡å‡†ï¼ˆåº”åœ¨ specï¼‰
```

**ç¤ºä¾‹å¯¹æ¯”ï¼š**
```markdown
# spec.mdï¼ˆæ­£ç¡®ï¼‰
## ç”¨æˆ·æ•…äº‹
ç”¨æˆ·å¯ä»¥åˆ›å»ºç›¸å†Œæ¥ç»„ç»‡ç…§ç‰‡

## åŠŸèƒ½éœ€æ±‚
- å¿…é¡»æ”¯æŒä¸Šä¼  JPG, PNG æ ¼å¼
- å¿…é¡»æ˜¾ç¤ºç¼©ç•¥å›¾

---

# plan.mdï¼ˆæ­£ç¡®ï¼‰
## æŠ€æœ¯æ ˆ
- å‰ç«¯ï¼šReact 18
- åç«¯ï¼šPython FastAPI
- å­˜å‚¨ï¼šAWS S3

## æ•°æ®æ¨¡å‹
```python
class Album(Base):
    id: int
    user_id: int
    title: str
    photos: List[Photo]
```
```

### 3. ä»»åŠ¡ç²’åº¦

**åˆé€‚çš„ä»»åŠ¡ç²’åº¦ï¼š**
```markdown
âœ… å•ä¸ªä»»åŠ¡ = 1-2 å°æ—¶å·¥ä½œé‡
âœ… å•ä¸ªæ–‡ä»¶æˆ–å•ä¸ªåŠŸèƒ½
âœ… å¯ç‹¬ç«‹å®¡æŸ¥

âŒ å¤ªç²—ï¼š"å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"ï¼ˆå¤ªå¤§ï¼‰
âŒ å¤ªç»†ï¼š"æ·»åŠ ç¬¬ 42 è¡Œä»£ç "ï¼ˆå¤ªå°ï¼‰

æ¨èç¤ºä¾‹ï¼š
- [ ] T008 Create User model at /project/src/models/user.py
      ï¼ˆ1 ä¸ªæ–‡ä»¶ï¼Œæ˜ç¡®çš„è¾“å‡ºï¼‰

- [ ] T009 Implement password hashing at /project/src/services/auth.py
      ï¼ˆ1 ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œæ˜ç¡®çš„è¾¹ç•Œï¼‰
```

### 4. Checkpoint ä½¿ç”¨

**ä½•æ—¶è®¾ç½® Checkpointï¼Ÿ**
```markdown
âœ… æ¯ä¸ªç”¨æˆ·æ•…äº‹å®Œæˆå
âœ… å…³é”®åŸºç¡€è®¾æ–½å®Œæˆå
âœ… è·¨å›¢é˜Ÿé›†æˆç‚¹

ç¤ºä¾‹ï¼š
## Phase 2: Foundation
- [ ] T005 Create database schema
- [ ] T006 Implement User model

**CHECKPOINT**:
  - Run migrations
  - Verify database connectivity
  - Test User CRUD operations

## Phase 3: User Story 1
- [ ] T008 Create registration endpoint
- [ ] T009 Send verification email

**CHECKPOINT**:
  - Test registration flow end-to-end
  - Verify email sent successfully
  - Validate US1 acceptance criteria
```

---

## ğŸ’¡ å°ç»“

æœ¬ç« æˆ‘ä»¬å­¦ä¹ äº†ï¼š

âœ… **å…­é˜¶æ®µå·¥ä½œæµ**ï¼šConstitution â†’ Specify â†’ Clarify â†’ Plan â†’ Tasks â†’ Implement
âœ… **æ ¸å¿ƒæ–‡ä»¶ç»“æ„**ï¼šspec.mdï¼ˆWhatï¼‰, plan.mdï¼ˆHowï¼‰, tasks.mdï¼ˆWhenï¼‰
âœ… **é›†æˆæœºåˆ¶**ï¼šSlash Commands + è„šæœ¬è‡ªåŠ¨åŒ–
âœ… **æœ€ä½³å®è·µ**ï¼šä½•æ—¶ç”¨å®ªæ³•ã€Spec vs Plan è¾¹ç•Œã€ä»»åŠ¡ç²’åº¦ã€Checkpoint

**ä¸‹ä¸€æ­¥ï¼š** [4.3 åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Spec](./4.3-åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªSpec.md) - é€šè¿‡ 3 ä¸ªå®æˆ˜æ¡ˆä¾‹æŒæ¡ Spec-kitï¼

---

*Spec-kit æ ¸å¿ƒæ¦‚å¿µæ•™ç¨‹ v1.0 | 2025 Edition*
