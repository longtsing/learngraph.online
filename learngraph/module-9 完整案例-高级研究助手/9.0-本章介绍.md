# Module-9 æœ¬ç« ä»‹ç»ï¼šæ„å»º Deep Research æ·±åº¦ç ”ç©¶ç³»ç»Ÿ

> **æ¥è‡ªå›¾çµå¥–è·å¾—è€…çš„å¯„è¯­**
>
> "çœŸæ­£å¼ºå¤§çš„ AI ç³»ç»Ÿä¸æ˜¯ç®€å•åœ°å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯èƒ½å¤Ÿåƒäººç±»ç ”ç©¶å‘˜ä¸€æ ·ï¼Œç³»ç»Ÿæ€§åœ°æ¢ç´¢ã€åˆ†æã€ç»¼åˆä¿¡æ¯ã€‚Deep Research ä»£è¡¨äº† AI Agent çš„æ–°èŒƒå¼â€”â€”ä¸å†æ˜¯å•æ¬¡æŸ¥è¯¢å“åº”ï¼Œè€Œæ˜¯æŒç»­è¿­ä»£ã€æ·±åº¦æŒ–æ˜ã€å¤šè§’åº¦éªŒè¯çš„ç ”ç©¶è¿‡ç¨‹ã€‚åœ¨ LangGraph ä¸­ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•æ„å»ºè¿™æ ·çš„ç³»ç»Ÿï¼šAI èƒ½å¤Ÿæ¾„æ¸…éœ€æ±‚ã€è§„åˆ’ç ”ç©¶ã€å¹¶è¡Œæ¢ç´¢ã€å‹ç¼©çŸ¥è¯†ï¼Œæœ€ç»ˆç”Ÿæˆé«˜è´¨é‡çš„ç ”ç©¶æŠ¥å‘Šã€‚"
>
> â€” *å¯å‘è‡ª Judea Pearl å¯¹ç³»ç»Ÿæ€§æ¨ç†çš„å¼ºè°ƒ*

---

## ğŸ“š æœ¬ç« æ¦‚è§ˆ

**Deep Researchï¼ˆæ·±åº¦ç ”ç©¶ç³»ç»Ÿï¼‰** æ˜¯ LangGraph æœ€å¤æ‚ã€æœ€å¼ºå¤§çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚æœ¬ç« å°†å¸¦ä½ ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªå®Œæ•´çš„å¤šæ™ºèƒ½ä½“ç ”ç©¶ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿèƒ½å¤Ÿï¼š

- ğŸ¯ **æ™ºèƒ½æ¾„æ¸…ç”¨æˆ·éœ€æ±‚** - è‡ªåŠ¨è¯†åˆ«æ¨¡ç³Šè¯·æ±‚å¹¶æå‡ºé’ˆå¯¹æ€§é—®é¢˜
- ğŸ“‹ **ç”Ÿæˆç»“æ„åŒ–ç ”ç©¶ç®€æŠ¥** - å°†å¯¹è¯è½¬åŒ–ä¸ºè¯¦ç»†çš„ç ”ç©¶è§„åˆ’
- ğŸ” **å¹¶è¡Œæ·±åº¦ç ”ç©¶** - å¤šä¸ªæ™ºèƒ½ä½“ååŒæ¢ç´¢ä¸åŒå­ä¸»é¢˜
- ğŸ“Š **ä¸Šä¸‹æ–‡å·¥ç¨‹ä¼˜åŒ–** - é«˜æ•ˆå‹ç¼©å’Œç®¡ç†æµ·é‡ç ”ç©¶ä¿¡æ¯
- ğŸ“ **ç”Ÿæˆä¸“ä¸šç ”ç©¶æŠ¥å‘Š** - ç»¼åˆæ‰€æœ‰å‘ç°ï¼Œè¾“å‡ºç»“æ„åŒ–æŠ¥å‘Š

### å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š

1. **ç”¨æˆ·éœ€æ±‚æ¾„æ¸…ä¸ç ”ç©¶è§„åˆ’** - ä½¿ç”¨ Structured Output å’Œ Command æ§åˆ¶æµå®ç°æ™ºèƒ½å¯¹è¯
2. **ç ”ç©¶æ™ºèƒ½ä½“åŸºç¡€** - æ„å»ºèƒ½è‡ªä¸»æœç´¢ã€åæ€ã€å†³ç­–çš„ç ”ç©¶ Agent
3. **MCP é›†æˆä¸å·¥å…·æ‰©å±•** - ç†è§£ Model Context Protocol å¹¶é›†æˆå¤–éƒ¨å·¥å…·
4. **å¤šæ™ºèƒ½ä½“ååŒç ”ç©¶** - ä½¿ç”¨ Supervisor æ¨¡å¼å®ç°å¹¶è¡Œç ”ç©¶å’Œä¸Šä¸‹æ–‡éš”ç¦»
5. **å®Œæ•´ç³»ç»Ÿé›†æˆ** - å°†æ‰€æœ‰ç»„ä»¶æ•´åˆä¸ºç«¯åˆ°ç«¯çš„ç ”ç©¶ç³»ç»Ÿ

### æœ¬ç« æ¶æ„å›¾

```
Module-9: Deep Research å®Œæ•´ä½“ç³»
â”œâ”€ 9.1 ç”¨æˆ·éœ€æ±‚æ¾„æ¸…ä¸ç ”ç©¶è§„åˆ’ (éš¾åº¦: â­â­â­)
â”‚   â”œâ”€ ç”¨æˆ·æ„å›¾æ¾„æ¸… (ClarifyWithUser)
â”‚   â”œâ”€ ç ”ç©¶ç®€æŠ¥ç”Ÿæˆ (ResearchQuestion)
â”‚   â”œâ”€ Command æ§åˆ¶æµ
â”‚   â””â”€ Structured Output Schema
â”‚
â”œâ”€ 9.2 ç ”ç©¶æ™ºèƒ½ä½“åŸºç¡€ (éš¾åº¦: â­â­â­â­)
â”‚   â”œâ”€ Agent å·¥å…·è°ƒç”¨å¾ªç¯
â”‚   â”œâ”€ Tavily Search API
â”‚   â”œâ”€ think_tool åæ€æœºåˆ¶
â”‚   â”œâ”€ ç ”ç©¶å‹ç¼© (Context Engineering)
â”‚   â””â”€ Prompt Engineering for Agents
â”‚
â”œâ”€ 9.3 MCP é›†æˆä¸å·¥å…·æ‰©å±• (éš¾åº¦: â­â­â­â­)
â”‚   â”œâ”€ Model Context Protocol åŸç†
â”‚   â”œâ”€ MCP å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
â”‚   â”œâ”€ stdio vs HTTP transport
â”‚   â”œâ”€ å¼‚æ­¥å·¥å…·æ‰§è¡Œ
â”‚   â””â”€ Filesystem MCP Server ç¤ºä¾‹
â”‚
â”œâ”€ 9.4 å¤šæ™ºèƒ½ä½“ååŒç ”ç©¶ (éš¾åº¦: â­â­â­â­â­)
â”‚   â”œâ”€ Supervisor-Worker æ¨¡å¼
â”‚   â”œâ”€ ä¸Šä¸‹æ–‡éš”ç¦» (Context Isolation)
â”‚   â”œâ”€ ä»»åŠ¡åˆ†è§£ä¸å¹¶è¡ŒåŒ–
â”‚   â”œâ”€ asyncio.gather å¹¶è¡Œæ‰§è¡Œ
â”‚   â””â”€ ç ”ç©¶ç»“æœèšåˆ
â”‚
â”œâ”€ 9.5 å®Œæ•´ç³»ç»Ÿé›†æˆ (éš¾åº¦: â­â­â­â­â­)
â”‚   â”œâ”€ ç«¯åˆ°ç«¯æµç¨‹è®¾è®¡
â”‚   â”œâ”€ å­å›¾é›†æˆ
â”‚   â”œâ”€ é€’å½’é™åˆ¶é…ç½®
â”‚   â”œâ”€ æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ
â”‚   â””â”€ ç”Ÿäº§éƒ¨ç½²è€ƒè™‘
â”‚
â””â”€ 9.6 å°ç»“å’Œå¤ä¹ 
    â”œâ”€ æ ¸å¿ƒæ¦‚å¿µå›é¡¾
    â”œâ”€ Context Engineering æœ€ä½³å®è·µ
    â”œâ”€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
    â””â”€ å¸¸è§é—®é¢˜è§£ç­”
```

### çŸ¥è¯†ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[Module-1-3: LangGraph åŸºç¡€] --> B[9.1 éœ€æ±‚æ¾„æ¸…]
    A --> C[9.2 ç ”ç©¶æ™ºèƒ½ä½“]
    B --> D[9.5 å®Œæ•´ç³»ç»Ÿ]
    C --> E[9.3 MCP é›†æˆ]
    C --> F[9.4 å¤šæ™ºèƒ½ä½“ååŒ]
    E --> F
    F --> D
    D --> G[9.6 å°ç»“å¤ä¹ ]

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
    style E fill:#f5e1ff
    style F fill:#ffe1e1
    style G fill:#fffacd
```

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### 1. ä¸ºä»€ä¹ˆéœ€è¦ Deep Research ç³»ç»Ÿï¼Ÿ

**ä¼ ç»Ÿ LLM çš„å±€é™æ€§ï¼š**

```python
# âŒ ä¼ ç»Ÿå•æ¬¡æŸ¥è¯¢ - ä¿¡æ¯æµ…è–„ã€ç¼ºä¹éªŒè¯
response = llm.invoke("What are the best coffee shops in SF?")
# è¾“å‡º: åŸºäºè®­ç»ƒæ•°æ®çš„é€šç”¨å›ç­”ï¼Œå¯èƒ½è¿‡æ—¶æˆ–ä¸å‡†ç¡®
```

**Deep Research çš„ä¼˜åŠ¿ï¼š**

```python
# âœ… Deep Research - å¤šè½®è¿­ä»£ã€æ·±åº¦éªŒè¯
1. æ¾„æ¸…éœ€æ±‚: "æ‚¨å…³æ³¨çš„æ˜¯å’–å•¡è´¨é‡ã€æ°›å›´è¿˜æ˜¯æ€§ä»·æ¯”ï¼Ÿ"
2. è§„åˆ’ç ”ç©¶: "æˆ‘å°†ä»ä¸“ä¸šè¯„æµ‹ã€ç”¨æˆ·è¯„ä»·ã€è®¤è¯æœºæ„ä¸‰ä¸ªè§’åº¦ç ”ç©¶"
3. å¹¶è¡Œæœç´¢:
   - Agent A: æœç´¢ "SF specialty coffee certifications"
   - Agent B: æœç´¢ "Coffee Review SF ratings 2024"
   - Agent C: æœç´¢ "Yelp SF coffee quality reviews"
4. ç»¼åˆåˆ†æ: äº¤å‰éªŒè¯å¤šä¸ªæ¥æºï¼Œè¯†åˆ«å…±è¯†ä¸å·®å¼‚
5. ç”ŸæˆæŠ¥å‘Š: ç»“æ„åŒ–è¾“å‡ºï¼ŒåŒ…å«è¯æ®é“¾å’Œæ¥æºå¼•ç”¨
```

---

### 2. Deep Research ç³»ç»Ÿçš„äº”å¤§ç»„ä»¶

#### ç»„ä»¶ 1ï¼šç”¨æˆ·éœ€æ±‚æ¾„æ¸… (Scoping)

**æ ¸å¿ƒæ€æƒ³ï¼š** é¿å…åŸºäºæ¨¡ç³Šéœ€æ±‚è¿›è¡Œç ”ç©¶ï¼Œä¸»åŠ¨æ¾„æ¸…ç”¨æˆ·æ„å›¾ã€‚

**å®ç°æœºåˆ¶ï¼š**
```python
from langgraph.types import Command

def clarify_with_user(state):
    """ä½¿ç”¨ Structured Output åˆ¤æ–­æ˜¯å¦éœ€è¦æ¾„æ¸…"""
    response = model.with_structured_output(ClarifyWithUser).invoke(...)

    if response.need_clarification:
        # è¿”å›é—®é¢˜ç»™ç”¨æˆ·
        return Command(goto=END, update={"messages": [AIMessage(response.question)]})
    else:
        # ç»§ç»­åˆ°ç ”ç©¶ç®€æŠ¥ç”Ÿæˆ
        return Command(goto="write_research_brief", update={...})
```

**å…³é”®æŠ€æœ¯ï¼š**
- **Structured Output** - ç¡®ä¿ LLM è¾“å‡ºç¬¦åˆé¢„å®šä¹‰ schema
- **Command å¯¹è±¡** - çµæ´»æ§åˆ¶å›¾çš„æ‰§è¡Œæµç¨‹
- **å¯¹è¯å†å²ç®¡ç†** - é¿å…é‡å¤æé—®

---

#### ç»„ä»¶ 2ï¼šç ”ç©¶æ™ºèƒ½ä½“ (Research Agent)

**æ ¸å¿ƒæ€æƒ³ï¼š** Agent è‡ªä¸»è¿›è¡Œå¤šè½®æœç´¢ï¼Œæ¯è½®åæ€ç»“æœå¹¶å†³å®šä¸‹ä¸€æ­¥ã€‚

**å·¥å…·è°ƒç”¨å¾ªç¯ï¼š**
```
ç”¨æˆ·éœ€æ±‚ â†’ LLM å†³ç­– â†’ æœç´¢å·¥å…· â†’ think_tool åæ€ â†’ LLM å†³ç­– â†’ ...
                â†“
         è¶³å¤Ÿä¿¡æ¯ï¼Ÿ â†’ ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ
```

**Prompt Engineering å…³é”®ï¼š**

```python
"""
<Hard Limits>
- Simple queries: 2-3 search calls maximum
- Complex queries: Up to 5 search calls maximum
- Always stop: After 5 searches if you cannot find answers
</Hard Limits>

<Show Your Thinking>
After each search, use think_tool to analyze:
- What key information did I find?
- What's missing?
- Do I have enough to answer comprehensively?
- Should I search more or provide my answer?
</Show Your Thinking>
"""
```

**é˜²æ­¢å¸¸è§é—®é¢˜ï¼š**
- âŒ **Spin-out é—®é¢˜** - Agent æ— é™å¾ªç¯æœç´¢ç›¸ä¼¼å†…å®¹
- âœ… **è§£å†³æ–¹æ¡ˆ** - ç¡¬æ€§é™åˆ¶å·¥å…·è°ƒç”¨æ¬¡æ•° + think_tool å¼ºåˆ¶åæ€

---

#### ç»„ä»¶ 3ï¼šä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)

**æ ¸å¿ƒæ€æƒ³ï¼š** åœ¨ä¸¤ä¸ªå…³é”®ä½ç½®è¿›è¡Œä¿¡æ¯å‹ç¼©ï¼Œé¿å…ä¸Šä¸‹æ–‡çˆ†ç‚¸ã€‚

**å‹ç¼©ä½ç½® 1ï¼šç½‘é¡µå†…å®¹æ‘˜è¦**
```python
def summarize_webpage_content(webpage_content: str) -> str:
    """
    å°†åŸå§‹ç½‘é¡µå†…å®¹ï¼ˆå¯èƒ½åŒ…å«å¯¼èˆªã€å¹¿å‘Šã€æ ·æ¿æ–‡æœ¬ï¼‰
    å‹ç¼©ä¸ºç»“æ„åŒ–æ‘˜è¦ + å…³é”®å¼•ç”¨
    """
    summary = model.with_structured_output(Summary).invoke([
        HumanMessage(content=f"Summarize: {webpage_content}")
    ])

    return f"""
    <summary>{summary.summary}</summary>
    <key_excerpts>{summary.key_excerpts}</key_excerpts>
    """
```

**å‹ç¼©ä½ç½® 2ï¼šç ”ç©¶ç»“æœå‹ç¼©**
```python
def compress_research(state: ResearcherState) -> dict:
    """
    å°†å¤šè½®å·¥å…·è°ƒç”¨çš„å®Œæ•´å†å²å‹ç¼©ä¸ºæ ¸å¿ƒå‘ç°
    ä¿ç•™åŸå§‹ç¬”è®°ä¾›è¯¦ç»†åˆ†æ
    """
    system_message = compress_research_system_prompt
    messages = [SystemMessage(system_message)] + state["researcher_messages"]

    compressed = compress_model.invoke(messages)

    return {
        "compressed_research": compressed.content,  # ç”¨äºåç»­å¤„ç†
        "raw_notes": ["\n".join(åŸå§‹ç¬”è®°)]           # ç”¨äºæœ€ç»ˆæŠ¥å‘Š
    }
```

**å…³é”®æ³¨æ„äº‹é¡¹ï¼š**
- âš ï¸ **å‹ç¼©é£é™©** - å¯èƒ½ä¸¢å¤±é‡è¦ä¿¡æ¯
- âœ… **ç¼“è§£ç­–ç•¥** - åœ¨ Human Message ä¸­é‡ç”³åŸå§‹ç ”ç©¶ä¸»é¢˜
- âœ… **è¾“å‡º Token é™åˆ¶** - è®¾ç½® `max_tokens=32000` é¿å…æˆªæ–­

---

#### ç»„ä»¶ 4ï¼šå¤šæ™ºèƒ½ä½“ååŒ (Multi-Agent Supervisor)

**æ ¸å¿ƒæ€æƒ³ï¼š** å¯¹äºå¤æ‚è¯·æ±‚ï¼Œä½¿ç”¨ Supervisor åˆ†è§£ä»»åŠ¡å¹¶å¹¶è¡Œç ”ç©¶ã€‚

**ä½•æ—¶ä½¿ç”¨å¤šæ™ºèƒ½ä½“ï¼Ÿ**

| åœºæ™¯ç±»å‹ | ç¤ºä¾‹ | ç­–ç•¥ |
|---------|------|------|
| **ç®€å•äº‹å®æŸ¥è¯¢** | "SF æœ€ä½³å’–å•¡åº—åˆ—è¡¨" | å•ä¸€ Agent |
| **å¯¹æ¯”åˆ†æ** | "OpenAI vs Anthropic vs Google AI å®‰å…¨æ–¹æ³•å¯¹æ¯”" | 3ä¸ªå¹¶è¡Œ Agent |
| **å¤šç»´åº¦ç ”ç©¶** | "åˆ†æç‰¹æ–¯æ‹‰çš„æŠ€æœ¯ã€å¸‚åœºã€è´¢åŠ¡çŠ¶å†µ" | 3ä¸ªå¹¶è¡Œ Agent |

**Supervisor å†³ç­–æµç¨‹ï¼š**
```python
def supervisor(state: SupervisorState):
    """
    Supervisor åˆ†æç ”ç©¶ç®€æŠ¥ï¼Œå†³å®šï¼š
    1. æ˜¯å¦éœ€è¦åˆ†è§£ä¸ºå­ä»»åŠ¡ï¼Ÿ
    2. éœ€è¦å¤šå°‘ä¸ªå¹¶è¡Œ Agentï¼Ÿ
    3. æ¯ä¸ª Agent çš„å…·ä½“ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ
    """
    response = supervisor_model_with_tools.invoke([
        SystemMessage(content=lead_researcher_prompt),
        HumanMessage(content=state["research_brief"])
    ])

    # å¦‚æœ LLM è°ƒç”¨äº† ConductResearch å·¥å…·
    if response.tool_calls:
        # å¹¶è¡Œå¯åŠ¨å¤šä¸ªç ”ç©¶ Agent
        return Command(goto="supervisor_tools", update={...})
```

**å¹¶è¡Œæ‰§è¡Œï¼š**
```python
# ä½¿ç”¨ asyncio.gather å¹¶è¡Œæ‰§è¡Œå¤šä¸ªç ”ç©¶ä»»åŠ¡
research_results = await asyncio.gather(*[
    researcher_agent.ainvoke({
        "researcher_messages": [HumanMessage(topic)]
    })
    for topic in research_topics
])
```

**ä¸Šä¸‹æ–‡éš”ç¦»çš„å¥½å¤„ï¼š**
- âœ… **é¿å…ä¸Šä¸‹æ–‡å†²çª** - æ¯ä¸ª Agent æœ‰ç‹¬ç«‹çš„æ¶ˆæ¯å†å²
- âœ… **æé«˜è´¨é‡** - ä¸“æ³¨å•ä¸€ä¸»é¢˜ï¼Œæ·±åº¦è€Œéå¹¿åº¦
- âœ… **åŠ é€Ÿç ”ç©¶** - å¹¶è¡Œæ‰§è¡Œï¼Œæ€»æ—¶é—´ = max(å„ Agent æ—¶é—´)

---

#### ç»„ä»¶ 5ï¼šMCP é›†æˆ (Model Context Protocol)

**æ ¸å¿ƒæ€æƒ³ï¼š** ä½¿ç”¨æ ‡å‡†åè®®è®¿é—®å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºã€‚

**MCP vs è‡ªå®šä¹‰å·¥å…·ï¼š**

| ç‰¹æ€§ | è‡ªå®šä¹‰å·¥å…· | MCP å·¥å…· |
|------|-----------|---------|
| å®ç°æ–¹å¼ | æ‰‹åŠ¨å®šä¹‰ Python å‡½æ•° | è¿æ¥åˆ° MCP server |
| å·¥å…·å‘ç° | é™æ€ç»‘å®š | åŠ¨æ€æŸ¥è¯¢ server |
| æ‰§è¡Œæ–¹å¼ | åŒæ­¥/å¼‚æ­¥ | å¿…é¡»å¼‚æ­¥ |
| é€‚ç”¨åœºæ™¯ | ç®€å•ã€å›ºå®šçš„å·¥å…· | å¤æ‚ã€å¯æ‰©å±•çš„å·¥å…·ç”Ÿæ€ |

**MCP æ¶æ„ï¼š**
```
Client (LangGraph Agent)
    â†“ (æŸ¥è¯¢å¯ç”¨å·¥å…·)
MCP Server (e.g., Filesystem Server)
    â†“ (è¿”å›å·¥å…·åˆ—è¡¨)
Client ç»‘å®šå·¥å…·åˆ° LLM
    â†“ (LLM è°ƒç”¨å·¥å…·)
Client è½¬å‘è¯·æ±‚åˆ° Server
    â†“ (via stdio or HTTP)
Server æ‰§è¡Œæ“ä½œ
    â†“ (è¿”å›ç»“æœ)
Client æ¥æ”¶ç»“æœ
```

**ä¸¤ç§ Transport æ¨¡å¼ï¼š**

**stdio Transportï¼ˆæœ¬åœ°æœåŠ¡å™¨ï¼‰ï¼š**
```python
mcp_config = {
    "filesystem": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/docs"],
        "transport": "stdio"  # é€šè¿‡ stdin/stdout é€šä¿¡
    }
}
```

**HTTP Transportï¼ˆè¿œç¨‹æœåŠ¡å™¨ï¼‰ï¼š**
```python
mcp_config = {
    "remote_api": {
        "url": "https://mcp.example.com/sse",
        "transport": "http",  # é€šè¿‡ HTTP è¯·æ±‚é€šä¿¡
        "headers": {"Authorization": "Bearer token"}
    }
}
```

---

### 3. å®Œæ•´ç³»ç»Ÿæµç¨‹

```
ç”¨æˆ·è¾“å…¥: "Compare Gemini vs OpenAI Deep Research"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Clarify with User                            â”‚
â”‚    LLM: "éœ€è¦æ¾„æ¸…å—ï¼Ÿ"                            â”‚
â”‚    â†’ "OpenAI Deep Research æ˜¯æŒ‡ä»€ä¹ˆäº§å“ï¼Ÿ"        â”‚
â”‚    ç”¨æˆ·: "æŒ‡ Deep Research åŠŸèƒ½"                  â”‚
â”‚    LLM: "è¶³å¤Ÿäº†ï¼Œå¼€å§‹ç ”ç©¶"                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Write Research Brief                         â”‚
â”‚    "å¯¹æ¯” Gemini å’Œ OpenAI Deep Research äº§å“ï¼Œ   â”‚
â”‚     é‡ç‚¹å…³æ³¨åŠŸèƒ½ã€æ€§èƒ½ã€ä½¿ç”¨ä½“éªŒ..."              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Supervisor Decides                            â”‚
â”‚    åˆ†æ: "è¿™æ˜¯å¯¹æ¯”ä»»åŠ¡ï¼Œéœ€è¦2ä¸ªå¹¶è¡Œ Agent"        â”‚
â”‚    â†’ Agent A: ç ”ç©¶ Gemini Deep Research         â”‚
â”‚    â†’ Agent B: ç ”ç©¶ OpenAI Deep Research         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent A          â”‚ Agent B          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ Search 1:        â”‚ Search 1:        â”‚
â”‚ "Gemini Deep..." â”‚ "OpenAI Deep..." â”‚
â”‚ think_tool       â”‚ think_tool       â”‚
â”‚ Search 2:        â”‚ Search 2:        â”‚
â”‚ "Gemini docs"    â”‚ "OpenAI docs"    â”‚
â”‚ think_tool       â”‚ think_tool       â”‚
â”‚ "è¶³å¤Ÿäº†"          â”‚ "è¶³å¤Ÿäº†"          â”‚
â”‚ â†“ compress       â”‚ â†“ compress       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Aggregate Results                             â”‚
â”‚    åˆå¹¶ä¸¤ä¸ª Agent çš„ç ”ç©¶å‘ç°                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Generate Final Report                        â”‚
â”‚    åŸºäºæ‰€æœ‰ç ”ç©¶ç¬”è®°ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Š                  â”‚
â”‚    åŒ…å«: å¯¹æ¯”è¡¨æ ¼ã€ä¼˜åŠ£åˆ†æã€ä½¿ç”¨å»ºè®®...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ å­¦ä¹ è·¯çº¿å›¾

### åˆå­¦è€…è·¯å¾„ï¼ˆ5-7 å¤©ï¼‰

**ç›®æ ‡ï¼š** ç†è§£ Deep Research çš„æ ¸å¿ƒæ¦‚å¿µï¼Œèƒ½å¤Ÿæ„å»ºç®€å•çš„ç ”ç©¶ç³»ç»Ÿ

**Day 1-2: éœ€æ±‚æ¾„æ¸…ä¸è§„åˆ’**
- âœ… ç†è§£ Structured Output çš„ä½œç”¨
- âœ… æŒæ¡ Command å¯¹è±¡æ§åˆ¶æµ
- âœ… å®ç°ç”¨æˆ·æ„å›¾æ¾„æ¸…é€»è¾‘
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºèƒ½è¯†åˆ«æ¨¡ç³Šéœ€æ±‚çš„èŠå¤©æœºå™¨äºº

**Day 3-4: ç ”ç©¶æ™ºèƒ½ä½“åŸºç¡€**
- âœ… ç†è§£ Agent å·¥å…·è°ƒç”¨å¾ªç¯
- âœ… é›†æˆ Tavily Search API
- âœ… å®ç° think_tool åæ€æœºåˆ¶
- âœ… å­¦ä¹ åŸºæœ¬çš„ Prompt Engineering
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºèƒ½æœç´¢å¹¶æ€»ç»“çš„ç ”ç©¶ Agent

**Day 5-6: ä¸Šä¸‹æ–‡å·¥ç¨‹**
- âœ… å­¦ä¹ ç½‘é¡µå†…å®¹æ‘˜è¦
- âœ… å®ç°ç ”ç©¶ç»“æœå‹ç¼©
- âœ… ç†è§£ token ç®¡ç†ç­–ç•¥
- ğŸ¯ å®æˆ˜ï¼šä¼˜åŒ– Agent çš„å†…å­˜ä½¿ç”¨

**Day 7: ç»¼åˆç»ƒä¹ **
- ğŸ¯ é¡¹ç›®ï¼šæ„å»ºç«¯åˆ°ç«¯çš„ç®€å•ç ”ç©¶ç³»ç»Ÿï¼ˆå• Agentï¼‰
- ğŸ“ å¤ä¹ ï¼šScoping + Research + Compression

---

### è¿›é˜¶è€…è·¯å¾„ï¼ˆ7-10 å¤©ï¼‰

**ç›®æ ‡ï¼š** æŒæ¡å¤šæ™ºèƒ½ä½“ååŒå’Œ MCP é›†æˆ

**Day 1-2: MCP åŸºç¡€**
- âœ… ç†è§£ MCP åè®®åŸç†
- âœ… å­¦ä¹ å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
- âœ… æŒæ¡ stdio vs HTTP transport
- âœ… å®ç°å¼‚æ­¥å·¥å…·æ‰§è¡Œ
- ğŸ¯ å®æˆ˜ï¼šé›†æˆ Filesystem MCP Server

**Day 3-5: å¤šæ™ºèƒ½ä½“ååŒ**
- âœ… ç†è§£ Supervisor-Worker æ¨¡å¼
- âœ… å­¦ä¹ ä»»åŠ¡åˆ†è§£ç­–ç•¥
- âœ… å®ç°å¹¶è¡Œç ”ç©¶æ‰§è¡Œï¼ˆasyncio.gatherï¼‰
- âœ… æŒæ¡ä¸Šä¸‹æ–‡éš”ç¦»æŠ€æœ¯
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºèƒ½å¹¶è¡Œç ”ç©¶å¤šä¸»é¢˜çš„ç³»ç»Ÿ

**Day 6-8: Prompt Engineering è¿›é˜¶**
- âœ… å­¦ä¹ é˜²æ­¢ spin-out çš„æŠ€å·§
- âœ… æŒæ¡å¹¶è¡ŒåŒ–å†³ç­–å¯å‘å¼
- âœ… ä¼˜åŒ–å·¥å…·è°ƒç”¨é¢„ç®—
- âœ… å®ç°é«˜è´¨é‡çš„åæ€æœºåˆ¶
- ğŸ¯ å®æˆ˜ï¼šè°ƒä¼˜ Agent çš„å†³ç­–è´¨é‡

**Day 9-10: ç³»ç»Ÿé›†æˆ**
- âœ… ç«¯åˆ°ç«¯æµç¨‹è®¾è®¡
- âœ… å­å›¾é›†æˆæŠ€æœ¯
- âœ… é€’å½’é™åˆ¶é…ç½®
- ğŸ¯ é¡¹ç›®ï¼šæ„å»ºå®Œæ•´çš„ Deep Research ç³»ç»Ÿ

---

### ä¸“å®¶è·¯å¾„ï¼ˆ10-15 å¤©ï¼‰

**ç›®æ ‡ï¼š** æ„å»ºç”Ÿäº§çº§çš„ Deep Research ç³»ç»Ÿ

**Day 1-3: è¯„ä¼°é©±åŠ¨å¼€å‘**
- âœ… è®¾è®¡ Scoping è´¨é‡è¯„ä¼°å™¨
- âœ… å®ç° Agent ç»ˆæ­¢å†³ç­–è¯„ä¼°
- âœ… æ„å»º Supervisor å¹¶è¡ŒåŒ–è¯„ä¼°
- âœ… ä½¿ç”¨ LLM-as-judge æŠ€æœ¯
- ğŸ¯ å®æˆ˜ï¼šå»ºç«‹å®Œæ•´çš„è¯„ä¼° pipeline

**Day 4-6: æ€§èƒ½ä¼˜åŒ–**
- âœ… ä¼˜åŒ–å‹ç¼©æ¨¡å‹é€‰æ‹©ï¼ˆGPT-4.1 vs Claudeï¼‰
- âœ… å®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- âœ… è°ƒä¼˜å¹¶å‘å‚æ•°
- âœ… å‡å°‘ token ä½¿ç”¨æˆæœ¬
- ğŸ¯ å®æˆ˜ï¼šå°†ç³»ç»Ÿæˆæœ¬é™ä½ 50%

**Day 7-9: ç”Ÿäº§éƒ¨ç½²**
- âœ… ä½¿ç”¨ LangGraph Studio æœ¬åœ°è°ƒè¯•
- âœ… é…ç½® LangGraph Platform éƒ¨ç½²
- âœ… å®ç°æŒä¹…åŒ– Checkpointer
- âœ… è®¾ç½®ç›‘æ§å’Œæ—¥å¿—
- ğŸ¯ å®æˆ˜ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**Day 10-12: é«˜çº§åŠŸèƒ½**
- âœ… å®ç°è‡ªå®šä¹‰ MCP server
- âœ… æ·»åŠ å¤šæ•°æ®æºæ”¯æŒ
- âœ… é›†æˆä¸“ä¸šé¢†åŸŸå·¥å…·
- âœ… å®ç°æŠ¥å‘Šæ ¼å¼å®šåˆ¶
- ğŸ¯ å®æˆ˜ï¼šä¸ºç‰¹å®šé¢†åŸŸå®šåˆ¶ç ”ç©¶ç³»ç»Ÿ

**Day 13-15: ç»¼åˆé¡¹ç›®**
- ğŸ¯ å¤§å‹é¡¹ç›®ï¼šæ„å»ºä¼ä¸šçº§ Deep Research å¹³å°
  - æ”¯æŒå¤šç§Ÿæˆ·éš”ç¦»
  - å®ç°ç ”ç©¶å†å²ç®¡ç†
  - æä¾› Web UI å’Œ API
  - é›†æˆä»˜è´¹æœç´¢ API
  - å…·å¤‡ç”Ÿäº§çº§æ€§èƒ½å’Œå¯é æ€§

---

## ğŸ’¡ å­¦ä¹ å»ºè®®

### 1. åŠ¨æ‰‹å®è·µä¸ºä¸»

**âŒ ä¸æ¨èï¼š** åªé˜…è¯»ä»£ç å’Œæ–‡æ¡£

**âœ… æ¨èï¼š** è¾¹å­¦è¾¹å®ç°ï¼Œé€æ­¥æ„å»ºå®Œæ•´ç³»ç»Ÿ

```python
# ç¬¬1å¤©: å®ç°æœ€ç®€å•çš„æ¾„æ¸…é€»è¾‘
def clarify(user_input):
    if "å’–å•¡" in user_input and "æœ€å¥½" in user_input:
        return "æ‚¨å…³æ³¨çš„æ˜¯å’–å•¡è´¨é‡ã€æ°›å›´è¿˜æ˜¯ä»·æ ¼ï¼Ÿ"
    return None

# ç¬¬3å¤©: å‡çº§ä¸º LLM é©±åŠ¨
def clarify_with_llm(user_input):
    response = llm.with_structured_output(ClarifyWithUser).invoke(...)
    return response.question if response.need_clarification else None

# ç¬¬5å¤©: é›†æˆåˆ°å®Œæ•´æµç¨‹
def full_scoping_workflow(state):
    # å®Œæ•´çš„ clarify + brief generation
    ...
```

---

### 2. ç†è§£è®¾è®¡å†³ç­–

æ¯ä¸ªæŠ€æœ¯é€‰æ‹©éƒ½æœ‰å…¶åŸå› ï¼Œæ€è€ƒ"ä¸ºä»€ä¹ˆ"æ¯”"æ€ä¹ˆåš"æ›´é‡è¦ï¼š

**ä¸ºä»€ä¹ˆä½¿ç”¨ think_toolï¼Ÿ**
- â“ é—®é¢˜ï¼šAgent å®¹æ˜“é™·å…¥æ— é™æœç´¢å¾ªç¯
- âœ… è§£å†³ï¼šå¼ºåˆ¶ Agent åœ¨æ¯æ¬¡æœç´¢ååæ€ï¼Œé¿å…ç›²ç›®é‡å¤

**ä¸ºä»€ä¹ˆéœ€è¦ä¸Šä¸‹æ–‡å‹ç¼©ï¼Ÿ**
- â“ é—®é¢˜ï¼šå¤šè½®æœç´¢å token æ•°çˆ†ç‚¸ï¼ˆå¯èƒ½è¶…è¿‡ 100kï¼‰
- âœ… è§£å†³ï¼šåˆ†ä¸¤æ¬¡å‹ç¼©ï¼ˆç½‘é¡µçº§ + ç ”ç©¶çº§ï¼‰ï¼Œä¿æŒä¸Šä¸‹æ–‡åœ¨å¯æ§èŒƒå›´

**ä¸ºä»€ä¹ˆä½¿ç”¨å¤šæ™ºèƒ½ä½“ï¼Ÿ**
- â“ é—®é¢˜ï¼šå• Agent å¤„ç†å¤šä¸»é¢˜æ—¶ä¸Šä¸‹æ–‡å†²çª
- âœ… è§£å†³ï¼šæ¯ä¸ª Agent ä¸“æ³¨å•ä¸€ä¸»é¢˜ï¼Œä¸Šä¸‹æ–‡éš”ç¦»

---

### 3. ä»å¤±è´¥ä¸­å­¦ä¹ 

Deep Research ç³»ç»Ÿå¸¸è§çš„å¤±è´¥æ¨¡å¼ï¼š

**å¤±è´¥æ¨¡å¼ 1ï¼šè¿‡æ—©ç»ˆæ­¢**
```
User: "Compare A vs B vs C"
Agent:
  Search 1: "A overview"
  think_tool: "æ‰¾åˆ°äº† A çš„ä¿¡æ¯"
  â†’ ç”ŸæˆæŠ¥å‘Š âŒ (ç¼ºå°‘ B å’Œ C)
```

**è§£å†³æ–¹æ¡ˆï¼š**
- åœ¨ Prompt ä¸­æ˜ç¡®ï¼šå¯¹æ¯”ä»»åŠ¡éœ€è¦è¦†ç›–æ‰€æœ‰å¯¹è±¡
- ä½¿ç”¨ Supervisor å¼ºåˆ¶ä¸ºæ¯ä¸ªå¯¹è±¡åˆ†é… Agent

**å¤±è´¥æ¨¡å¼ 2ï¼šSpin-outï¼ˆæ— é™å¾ªç¯ï¼‰**
```
Agent:
  Search 1: "best coffee SF"
  Search 2: "top coffee shops SF"
  Search 3: "SF coffee recommendations"
  ... (20+ æ¬¡ç±»ä¼¼æœç´¢)
```

**è§£å†³æ–¹æ¡ˆï¼š**
- Hard Limits: æœ€å¤š 5 æ¬¡æœç´¢
- think_tool æ£€æŸ¥ï¼šæœ€è¿‘ä¸¤æ¬¡æœç´¢ç»“æœæ˜¯å¦é‡å¤

**å¤±è´¥æ¨¡å¼ 3ï¼šå‹ç¼©ä¸¢å¤±å…³é”®ä¿¡æ¯**
```
åŸå§‹æœç´¢ç»“æœ: "Blue Bottle Coffee è·å¾— 94/100 Coffee Review è¯„åˆ†"
å‹ç¼©å: "Blue Bottle æ˜¯çŸ¥åå’–å•¡åº—" âŒ (ä¸¢å¤±äº†è¯„åˆ†ä¿¡æ¯)
```

**è§£å†³æ–¹æ¡ˆï¼š**
- åœ¨å‹ç¼© Prompt ä¸­å¼ºè°ƒä¿ç•™æ‰€æœ‰æ•°å€¼ã€è¯„åˆ†ã€æ’å
- ä¿ç•™åŸå§‹ç¬”è®°ï¼ˆraw_notesï¼‰ä¾›æœ€ç»ˆæŠ¥å‘Šå‚è€ƒ

---

### 4. ä½¿ç”¨è¯„ä¼°é©±åŠ¨æ”¹è¿›

**å»ºç«‹è¯„ä¼°å¾ªç¯ï¼š**

```python
# 1. å®šä¹‰æˆåŠŸæ ‡å‡†
success_criteria = [
    "ç ”ç©¶ç®€æŠ¥åŒ…å«äº†ç”¨æˆ·æåˆ°çš„æ‰€æœ‰å…³é”®è¯",
    "ç ”ç©¶ç®€æŠ¥æ²¡æœ‰å‡è®¾ç”¨æˆ·æœªæ˜ç¡®çš„åå¥½",
    "Agent åœ¨3-5æ¬¡æœç´¢å†…æ‰¾åˆ°ç­”æ¡ˆ",
    "Supervisor æ­£ç¡®è¯†åˆ«äº†å¯¹æ¯”ä»»åŠ¡å¹¶åˆ†é…äº†2ä¸ª Agent"
]

# 2. å®ç°è‡ªåŠ¨è¯„ä¼°
def evaluate_scoping(brief, user_messages):
    # ä½¿ç”¨ LLM-as-judge
    evaluator_response = evaluator_llm.invoke([
        HumanMessage(f"è¯„ä¼°è¿™ä¸ªç ”ç©¶ç®€æŠ¥æ˜¯å¦æ»¡è¶³æ ‡å‡†...")
    ])
    return evaluator_response.score

# 3. è¿­ä»£æ”¹è¿›
for iteration in range(10):
    result = run_system(test_input)
    score = evaluate_scoping(result["brief"], test_input)

    if score < 0.8:
        adjust_prompts()  # æ ¹æ®å¤±è´¥æ¡ˆä¾‹è°ƒæ•´ Prompt
```

---

## ğŸ¯ æœ¬ç« äº®ç‚¹

### 1. å®Œæ•´çš„ç«¯åˆ°ç«¯ç³»ç»Ÿ

æœ¬ç« ä¸ä»…æ•™ä½ æ„å»ºç‹¬ç«‹ç»„ä»¶ï¼Œæ›´é‡è¦çš„æ˜¯æ•™ä½ å¦‚ä½•æ•´åˆï¼š
- ğŸ“‹ **Scoping** â†’ ğŸ“š **Research** â†’ ğŸ¤ **Multi-Agent** â†’ ğŸ“ **Report**
- æ¯ä¸ªç»„ä»¶å¯ç‹¬ç«‹ä½¿ç”¨ï¼Œä¹Ÿå¯æ— ç¼é›†æˆ

### 2. ç”Ÿäº§çº§æœ€ä½³å®è·µ

æ‰€æœ‰æŠ€æœ¯éƒ½æ¥è‡ª LangChain å®é™…æ„å»º Deep Research çš„ç»éªŒï¼š
- âœ… Context Engineering ç­–ç•¥æ¥è‡ªçœŸå®æ€§èƒ½ç“¶é¢ˆ
- âœ… Prompt Engineering è§„åˆ™æ¥è‡ªæ•°åƒæ¬¡æµ‹è¯•
- âœ… å¤šæ™ºèƒ½ä½“æ¶æ„æ¥è‡ªå¯¹æ¯”å®éªŒéªŒè¯

### 3. è¯„ä¼°é©±åŠ¨å¼€å‘

ä¸ä»…æ•™ä½ "æ€ä¹ˆåš"ï¼Œæ›´æ•™ä½ "å¦‚ä½•éªŒè¯åšå¾—å¥½"ï¼š
- ğŸ“Š Scoping è´¨é‡è¯„ä¼°
- ğŸ“Š Agent å†³ç­–è´¨é‡è¯„ä¼°
- ğŸ“Š Supervisor å¹¶è¡ŒåŒ–å†³ç­–è¯„ä¼°

### 4. çµæ´»çš„æ‰©å±•æ€§

ç³»ç»Ÿè®¾è®¡å…è®¸è½»æ¾æ‰©å±•ï¼š
- ğŸ”§ æ›¿æ¢æœç´¢å·¥å…·ï¼ˆTavily â†’ Google Search â†’ è‡ªå®šä¹‰çˆ¬è™«ï¼‰
- ğŸ”§ æ·»åŠ æ–°çš„ MCP Serverï¼ˆæ–‡ä»¶ç³»ç»Ÿ â†’ æ•°æ®åº“ â†’ APIï¼‰
- ğŸ”§ å®šåˆ¶æŠ¥å‘Šæ ¼å¼ï¼ˆMarkdown â†’ PDF â†’ HTMLï¼‰

---

## ğŸ“Š æ ¸å¿ƒæŠ€æœ¯é€ŸæŸ¥è¡¨

### Scopingï¼ˆéœ€æ±‚æ¾„æ¸…ï¼‰

| API/æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `ClarifyWithUser` | Structured Output Schema | `need_clarification: bool, question: str` |
| `ResearchQuestion` | ç ”ç©¶ç®€æŠ¥ Schema | `research_brief: str` |
| `Command` | æ§åˆ¶æµå¯¹è±¡ | `Command(goto="next_node", update={...})` |
| `get_buffer_string` | æ¶ˆæ¯å†å²æ ¼å¼åŒ– | å°† Messages è½¬ä¸ºå­—ç¬¦ä¸² |

### Research Agent

| API/æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `tavily_search` | Web æœç´¢å·¥å…· | `@tool def tavily_search(query: str)` |
| `think_tool` | åæ€å·¥å…· | `@tool def think_tool(reflection: str)` |
| `compress_research` | ç ”ç©¶å‹ç¼©èŠ‚ç‚¹ | å‹ç¼©å¤šè½®æœç´¢ç»“æœ |
| Tool Call Budget | å·¥å…·è°ƒç”¨é™åˆ¶ | æœ€å¤š 5 æ¬¡æœç´¢ |

### MCP Integration

| API/æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `MultiServerMCPClient` | MCP å®¢æˆ·ç«¯ | ç®¡ç†å¤šä¸ª MCP server |
| `stdio` transport | æœ¬åœ°é€šä¿¡ | é€šè¿‡ stdin/stdout |
| `http` transport | è¿œç¨‹é€šä¿¡ | é€šè¿‡ HTTP è¯·æ±‚ |
| `client.get_tools()` | åŠ¨æ€è·å–å·¥å…· | `await client.get_tools()` |

### Multi-Agent Supervisor

| API/æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `ConductResearch` | ç ”ç©¶å§”æ‰˜å·¥å…· | `@tool class ConductResearch` |
| `asyncio.gather` | å¹¶è¡Œæ‰§è¡Œ | åŒæ—¶è¿è¡Œå¤šä¸ª Agent |
| Context Isolation | ä¸Šä¸‹æ–‡éš”ç¦» | æ¯ä¸ª Agent ç‹¬ç«‹æ¶ˆæ¯å†å² |
| `max_concurrent_researchers` | å¹¶å‘é™åˆ¶ | æœ€å¤š 3 ä¸ªå¹¶è¡Œ Agent |

---

## é™„å½•ï¼šæœ¯è¯­è¡¨

### Deep Research ç›¸å…³

- **Deep Researchï¼ˆæ·±åº¦ç ”ç©¶ï¼‰**: å¤šè½®è¿­ä»£ã€å¤šè§’åº¦éªŒè¯çš„ AI ç ”ç©¶ç³»ç»Ÿ
- **Scopingï¼ˆéœ€æ±‚æ¾„æ¸…ï¼‰**: é€šè¿‡å¯¹è¯æ˜ç¡®ç”¨æˆ·çœŸå®éœ€æ±‚çš„è¿‡ç¨‹
- **Research Briefï¼ˆç ”ç©¶ç®€æŠ¥ï¼‰**: ç»“æ„åŒ–çš„ç ”ç©¶è§„åˆ’æ–‡æ¡£
- **Context Engineeringï¼ˆä¸Šä¸‹æ–‡å·¥ç¨‹ï¼‰**: é€šè¿‡å‹ç¼©å’Œç®¡ç†ä¼˜åŒ–ä¸Šä¸‹æ–‡çª—å£çš„æŠ€æœ¯

### Agent ç›¸å…³

- **Spin-out Problem**: Agent é™·å…¥æ— é™é‡å¤æœç´¢çš„é—®é¢˜
- **think_tool**: å¼ºåˆ¶ Agent åæ€å½“å‰çŠ¶æ€çš„å·¥å…·
- **Tool Call Budget**: é™åˆ¶ Agent å·¥å…·è°ƒç”¨æ¬¡æ•°çš„æœºåˆ¶
- **Research Compression**: å°†å¤šè½®æœç´¢ç»“æœå‹ç¼©ä¸ºæ ¸å¿ƒå‘ç°

### Multi-Agent ç›¸å…³

- **Supervisor Pattern**: ä¸€ä¸ªåè°ƒè€…ç®¡ç†å¤šä¸ªæ‰§è¡Œè€…çš„æ¶æ„
- **Context Isolation**: æ¯ä¸ª Agent ç»´æŠ¤ç‹¬ç«‹ä¸Šä¸‹æ–‡çš„è®¾è®¡
- **Parallel Research**: å¤šä¸ª Agent åŒæ—¶æ¢ç´¢ä¸åŒå­ä¸»é¢˜
- **Context Clash**: å•ä¸€ä¸Šä¸‹æ–‡ä¸­å¤šä¸»é¢˜ä¿¡æ¯å†²çªçš„é—®é¢˜

### MCP ç›¸å…³

- **MCP (Model Context Protocol)**: è®¿é—®å¤–éƒ¨å·¥å…·çš„æ ‡å‡†åè®®
- **stdio Transport**: é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºé€šä¿¡çš„æ–¹å¼
- **HTTP Transport**: é€šè¿‡ HTTP è¯·æ±‚é€šä¿¡çš„æ–¹å¼
- **MCP Server**: æä¾›å·¥å…·çš„æœåŠ¡è¿›ç¨‹

### Evaluation ç›¸å…³

- **LLM-as-judge**: ä½¿ç”¨ LLM è¯„ä¼°å…¶ä»– LLM è¾“å‡ºè´¨é‡çš„æŠ€æœ¯
- **Success Criteria**: å®šä¹‰ä»»åŠ¡æˆåŠŸçš„å…·ä½“æ ‡å‡†
- **Evaluation Loop**: è¿è¡Œâ†’è¯„ä¼°â†’æ”¹è¿›çš„å¾ªç¯

---

## ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œè¯·ç¡®è®¤ä½ èƒ½å¤Ÿï¼š

**éœ€æ±‚æ¾„æ¸…ä¸è§„åˆ’ï¼š**
- [ ] ä½¿ç”¨ Structured Output å®ç°ç”¨æˆ·æ„å›¾æ¾„æ¸…
- [ ] ä½¿ç”¨ Command å¯¹è±¡æ§åˆ¶å›¾çš„æ‰§è¡Œæµç¨‹
- [ ] å°†å¯¹è¯å†å²è½¬åŒ–ä¸ºç»“æ„åŒ–ç ”ç©¶ç®€æŠ¥
- [ ] è®¾è®¡ LLM-as-judge è¯„ä¼°å™¨

**ç ”ç©¶æ™ºèƒ½ä½“ï¼š**
- [ ] é›†æˆ Tavily Search API
- [ ] å®ç° think_tool åæ€æœºåˆ¶
- [ ] ç¼–å†™é˜²æ­¢ spin-out çš„ Prompt
- [ ] å®ç°ç ”ç©¶ç»“æœå‹ç¼©

**MCP é›†æˆï¼š**
- [ ] ç†è§£ MCP å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
- [ ] é…ç½® stdio å’Œ HTTP transport
- [ ] ä½¿ç”¨å¼‚æ­¥æ–¹å¼æ‰§è¡Œ MCP å·¥å…·
- [ ] é›†æˆ Filesystem MCP Server

**å¤šæ™ºèƒ½ä½“ååŒï¼š**
- [ ] å®ç° Supervisor-Worker æ¨¡å¼
- [ ] ä½¿ç”¨ asyncio.gather å¹¶è¡Œæ‰§è¡Œ
- [ ] è®¾è®¡ä»»åŠ¡åˆ†è§£å¯å‘å¼è§„åˆ™
- [ ] å®ç°ä¸Šä¸‹æ–‡éš”ç¦»

**å®Œæ•´ç³»ç»Ÿï¼š**
- [ ] é›†æˆæ‰€æœ‰ç»„ä»¶ä¸ºç«¯åˆ°ç«¯ç³»ç»Ÿ
- [ ] é…ç½®é€’å½’é™åˆ¶å’Œæ€§èƒ½å‚æ•°
- [ ] ç”Ÿæˆç»“æ„åŒ–ç ”ç©¶æŠ¥å‘Š
- [ ] ä½¿ç”¨ LangGraph Studio è°ƒè¯•

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œä½ å°†å…·å¤‡æ„å»º**ç”Ÿäº§çº§ Deep Research ç³»ç»Ÿ**çš„èƒ½åŠ›ã€‚å»ºè®®ç»§ç»­ï¼š

- **å®æˆ˜é¡¹ç›®**ï¼šä¸ºç‰¹å®šé¢†åŸŸï¼ˆå¦‚åŒ»ç–—ã€æ³•å¾‹ã€é‡‘èï¼‰å®šåˆ¶ç ”ç©¶ç³»ç»Ÿ
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå®éªŒä¸åŒæ¨¡å‹ç»„åˆï¼Œä¼˜åŒ–æˆæœ¬å’Œé€Ÿåº¦
- **åŠŸèƒ½æ‰©å±•**ï¼šé›†æˆæ›´å¤šæ•°æ®æºï¼ˆæ•°æ®åº“ã€APIã€æ–‡æ¡£åº“ï¼‰

**æ¨èå®è·µé¡¹ç›®ï¼š**
1. **å­¦æœ¯æ–‡çŒ®ç ”ç©¶ç³»ç»Ÿ**ï¼šé›†æˆ arXivã€PubMed API
2. **å¸‚åœºè°ƒç ”å¹³å°**ï¼šæ•´åˆè´¢åŠ¡æ•°æ®ã€æ–°é—»ã€ç¤¾äº¤åª’ä½“
3. **æ³•å¾‹æ¡ˆä¾‹åˆ†æå·¥å…·**ï¼šæœç´¢åˆ¤ä¾‹ã€æ³•è§„ã€å­¦æœ¯è¯„è®º

**è¿›é˜¶é˜…è¯»ï¼š**
- [LangChain Deep Research Blog](https://blog.langchain.com/open-deep-research/)
- [Anthropic Multi-Agent System](https://www.anthropic.com/engineering/built-multi-agent-research-system)
- [Context Engineering for Agents](https://blog.langchain.com/context-engineering-for-agents/)
- [Model Context Protocol Spec](https://modelcontextprotocol.io/specification/)

---

**æœ¬ç« æ ¸å¿ƒä»·å€¼ï¼š** å°† LLM ä»"é—®ç­”æœºå™¨"å‡çº§ä¸º"ç ”ç©¶åŠ©æ‰‹"ï¼Œå®ç°ä»å•æ¬¡æŸ¥è¯¢åˆ°ç³»ç»Ÿæ€§æ¢ç´¢çš„èŒƒå¼è½¬å˜ã€‚æŒæ¡ Deep Researchï¼Œä½ å°†èƒ½å¤Ÿæ„å»ºçœŸæ­£æ™ºèƒ½ã€å¯é ã€å¯æ‰©å±•çš„ AI ç ”ç©¶ç³»ç»Ÿï¼

ğŸ¯ **å‡†å¤‡å¥½äº†å—ï¼Ÿ** è®©æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€èŠ‚è¯¾ï¼š**9.1 ç”¨æˆ·éœ€æ±‚æ¾„æ¸…ä¸ç ”ç©¶è§„åˆ’** â€” å­¦ä¹ å¦‚ä½•è®© AI ä¸»åŠ¨æ¾„æ¸…æ¨¡ç³Šéœ€æ±‚ï¼Œé¿å…åŸºäºé”™è¯¯å‡è®¾è¿›è¡Œç ”ç©¶ï¼
