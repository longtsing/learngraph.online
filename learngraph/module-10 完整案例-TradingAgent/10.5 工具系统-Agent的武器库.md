# 10.5 å·¥å…·ç³»ç»Ÿ - Agentçš„æ­¦å™¨åº“

## ğŸ¯ æœ¬èŠ‚ç›®æ ‡

å·¥å…·(Tools)æ˜¯Agentä¸çœŸå®ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢ã€‚ä¸€ä¸ªAgentå†èªæ˜,å¦‚æœæ²¡æœ‰å·¥å…·,ä¹Ÿæ— æ³•è·å–å®æ—¶æ•°æ®ã€æ‰§è¡Œå…·ä½“æ“ä½œã€‚æœ¬èŠ‚å°†æ·±å…¥è§£æTradingAgentçš„å·¥å…·ç³»ç»Ÿ:å¦‚ä½•ç»„ç»‡ã€å¦‚ä½•è°ƒç”¨ã€å¦‚ä½•ä¸LLMåä½œã€‚

## ğŸ—ï¸ å·¥å…·ç³»ç»Ÿæ¶æ„

### æ•´ä½“è®¾è®¡å“²å­¦

TradingAgentçš„å·¥å…·ç³»ç»Ÿéµå¾ª**"åˆ†ç»„éš”ç¦»ã€æŒ‰éœ€è°ƒç”¨"**çš„è®¾è®¡åŸåˆ™:

```
4ä¸ªå·¥å…·èŠ‚ç‚¹ (ToolNode)
â”œâ”€ tools_market       â†’ Market Analystä¸“ç”¨
â”œâ”€ tools_social       â†’ Social Media Analystä¸“ç”¨
â”œâ”€ tools_news         â†’ News Analystä¸“ç”¨
â””â”€ tools_fundamentals â†’ Fundamentals Analystä¸“ç”¨
```

**ä¸ºä»€ä¹ˆè¦åˆ†ç»„?**

1. **èŒè´£æ˜ç¡®**: æ¯ä¸ªAnalyståªèƒ½è°ƒç”¨ä¸å…¶èŒè´£ç›¸å…³çš„å·¥å…·
2. **æç¤ºè¯ä¼˜åŒ–**: LLMçœ‹åˆ°çš„å·¥å…·åˆ—è¡¨æ›´çŸ­ã€æ›´ç›¸å…³
3. **æƒé™æ§åˆ¶**: é¿å…Analystè¶Šæƒè®¿é—®ä¸è¯¥è®¿é—®çš„æ•°æ®
4. **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘LLMçš„é€‰æ‹©è´Ÿæ‹…

### ä»£ç å®ç°

åœ¨ `trading_graph.py` ä¸­:

```python
def _create_tool_nodes(self) -> Dict[str, ToolNode]:
    """Create tool nodes for different data sources"""
    return {
        "market": ToolNode([
            get_stock_data,      # è‚¡ç¥¨ä»·æ ¼æ•°æ®
            get_indicators,      # æŠ€æœ¯æŒ‡æ ‡
        ]),
        "social": ToolNode([
            get_news,            # ç¤¾äº¤åª’ä½“æ–°é—»
        ]),
        "news": ToolNode([
            get_news,            # æ–°é—»æ–‡ç« 
            get_global_news,     # å…¨çƒæ–°é—»
            get_insider_sentiment,    # å†…éƒ¨äººæƒ…ç»ª
            get_insider_transactions, # å†…éƒ¨äººäº¤æ˜“
        ]),
        "fundamentals": ToolNode([
            get_fundamentals,    # åŸºæœ¬è´¢åŠ¡æŒ‡æ ‡
            get_balance_sheet,   # èµ„äº§è´Ÿå€ºè¡¨
            get_cashflow,        # ç°é‡‘æµé‡è¡¨
            get_income_statement,# åˆ©æ¶¦è¡¨
        ]),
    }
```

## ğŸ› ï¸ å·¥å…·æ¸…å•è¯¦è§£

### ç±»åˆ«1: å¸‚åœºæ•°æ®å·¥å…· (Market Tools)

#### 1. `get_stock_data` - è‚¡ç¥¨ä»·æ ¼æ•°æ®

**åŠŸèƒ½**: è·å–å†å²è‚¡ç¥¨ä»·æ ¼å’Œæˆäº¤é‡

**å‚æ•°**:
- `symbol`: è‚¡ç¥¨ä»£ç  (å¦‚ "AAPL")
- `curr_date`: å½“å‰æ—¥æœŸ
- `lookback_days`: å›æº¯å¤©æ•° (é»˜è®¤15å¤©)

**è¿”å›ç¤ºä¾‹**:
```json
{
  "2024-11-01": {"open": 220.75, "high": 222.50, "low": 219.80, "close": 221.45, "volume": 52341200},
  "2024-11-04": {"open": 221.50, "high": 223.10, "low": 220.90, "close": 222.80, "volume": 48765300},
  ...
}
```

**å…¸å‹ç”¨é€”**:
```
Market Analysté—®é¢˜: "AAPLæœ€è¿‘çš„ä»·æ ¼èµ°åŠ¿å¦‚ä½•?"
LLMå†³ç­–: è°ƒç”¨get_stock_data(AAPL, 2024-11-19, 15)
è·å¾—æ•°æ®å: "ä»15å¤©æ•°æ®çœ‹,AAPLä»220.75æ¶¨è‡³228.02,æ¶¨å¹…3.3%..."
```

#### 2. `get_indicators` - æŠ€æœ¯æŒ‡æ ‡

**åŠŸèƒ½**: è®¡ç®—å„ç±»æŠ€æœ¯æŒ‡æ ‡

**å‚æ•°**:
- `symbol`: è‚¡ç¥¨ä»£ç 
- `indicator`: æŒ‡æ ‡åç§° (æ”¯æŒ60+ç§)
- `curr_date`: å½“å‰æ—¥æœŸ

**æ”¯æŒçš„æŒ‡æ ‡** (éƒ¨åˆ†åˆ—è¡¨):
```python
# è¶‹åŠ¿æŒ‡æ ‡
- 'macd': MACD (Moving Average Convergence Divergence)
- 'adx': ADX (Average Directional Index)
- 'supertrend': è¶…çº§è¶‹åŠ¿æŒ‡æ ‡

# åŠ¨é‡æŒ‡æ ‡
- 'rsi': RSI (Relative Strength Index)
- 'cci': CCI (Commodity Channel Index)
- 'stoch': éšæœºæŒ‡æ ‡

# æ³¢åŠ¨ç‡æŒ‡æ ‡
- 'boll': å¸ƒæ—å¸¦
- 'atr': ATR (Average True Range)

# æˆäº¤é‡æŒ‡æ ‡
- 'vr': æˆäº¤é‡æ¯”ç‡
- 'obv': OBV (On-Balance Volume)
```

**è¿”å›ç¤ºä¾‹ (RSI)**:
```json
{
  "2024-11-04": 45.2,
  "2024-11-05": 66.67,
  "2024-11-06": 72.3,
  ...
  "2024-11-18": 68.5
}
```

**å…¸å‹ç”¨é€”**:
```
Analyst: "éœ€è¦æŸ¥çœ‹RSIæ˜¯å¦è¶…ä¹°"
â†’ è°ƒç”¨get_indicators('AAPL', 'rsi', '2024-11-19')
â†’ å‘ç°RSI=72.3,è¶…è¿‡70é˜ˆå€¼
â†’ ç»“è®º: "RSIæ˜¾ç¤ºè¶…ä¹°çŠ¶æ€,å¯èƒ½é¢ä¸´å›è°ƒé£é™©"
```

### ç±»åˆ«2: ç¤¾äº¤åª’ä½“å·¥å…· (Social Tools)

#### 3. `get_news` - ç¤¾äº¤åª’ä½“æ–°é—»

**åŠŸèƒ½**: è·å–Redditç­‰ç¤¾äº¤å¹³å°çš„è®¨è®º

**å‚æ•°**:
- `query`: æœç´¢å…³é”®è¯ (å¦‚ "Apple Inc")
- `start_date`: å¼€å§‹æ—¥æœŸ
- `end_date`: ç»“æŸæ—¥æœŸ

**æ•°æ®æ¥æº**:
```python
æœç´¢èŒƒå›´ = [
    'wallstreetbets',  # æ•£æˆ·èšé›†åœ°
    'stocks',          # è‚¡ç¥¨è®¨è®º
    'investing',       # æŠ•èµ„ç­–ç•¥
    'SecurityAnalysis',# è¯åˆ¸åˆ†æ
    'Finance',         # é‡‘èç»¼åˆ
    'Economics',       # ç»æµå­¦è®¨è®º
]
```

**è¿”å›ç¤ºä¾‹**:
```json
{
  "post_count": 15,
  "avg_sentiment": 0.65,  # -1åˆ°1,æ­£å€¼è¡¨ç¤ºç§¯æ
  "hot_topics": ["iPhone 15", "AI expansion", "China market"],
  "sample_posts": [
    {
      "title": "AAPL breaking resistance!",
      "score": 245,
      "comments": 89,
      "sentiment": 0.8
    }
  ]
}
```

### ç±»åˆ«3: æ–°é—»åˆ†æå·¥å…· (News Tools)

#### 4. `get_global_news` - å…¨çƒæ–°é—»

**åŠŸèƒ½**: è·å–å®è§‚ç»æµå’Œå…¬å¸æ–°é—»

**æ•°æ®æº**:
- Bloomberg
- Yahoo Finance
- EODHD API
- FinnHub
- Reuters

**è¿”å›ç¤ºä¾‹**:
```json
{
  "news": [
    {
      "title": "Apple Unveils AI-Powered Smart Home Device",
      "source": "Bloomberg",
      "date": "2024-11-15",
      "sentiment": "positive",
      "summary": "Apple enters smart home market with innovative AI features..."
    },
    {
      "title": "Fed Signals Potential Pause in Rate Cuts",
      "source": "Reuters",
      "date": "2024-11-14",
      "sentiment": "neutral",
      "impact": "macroeconomic"
    }
  ]
}
```

#### 5. `get_insider_sentiment` - å†…éƒ¨äººæƒ…ç»ª

**åŠŸèƒ½**: åˆ†æå…¬å¸å†…éƒ¨äººå‘˜çš„æƒ…ç»ªå’Œè¡Œä¸º

**æŒ‡æ ‡**:
- **MSPR** (Monthly Share Purchase Ratio): æœˆåº¦å‡€ä¹°å…¥æ¯”ç‡
- **CHANGE**: æŒè‚¡å˜åŒ–
- **TRANSACTIONS**: äº¤æ˜“æ¬¡æ•°

**è¿”å›ç¤ºä¾‹**:
```json
{
  "2024-09": {"mspr": -2.5, "change": -50000, "transactions": 12},  # å†…éƒ¨äººå‡€å–å‡º
  "2024-10": {"mspr": 0.2, "change": 5000, "transactions": 3},      # å°å¹…ä¹°å…¥
  "2024-11": {"mspr": -1.8, "change": -30000, "transactions": 8}    # å†æ¬¡å–å‡º
}
```

**è§£è¯»**:
- MSPR < -1: å¼ºçƒˆçœ‹ç©ºä¿¡å·
- MSPR > 1: å¼ºçƒˆçœ‹å¤šä¿¡å·
- MSPRæ¥è¿‘0: ä¸­æ€§

#### 6. `get_insider_transactions` - å†…éƒ¨äººäº¤æ˜“

**åŠŸèƒ½**: è¯¦ç»†çš„å†…éƒ¨äººä¹°å–è®°å½•

**è¿”å›ç¤ºä¾‹**:
```json
{
  "transactions": [
    {
      "name": "Arthur D. Levinson",
      "position": "Chairman",
      "date": "2024-11-15",
      "type": "SALE",
      "shares": 150000,
      "price": 228.66,
      "value": 34299000
    }
  ]
}
```

### ç±»åˆ«4: åŸºæœ¬é¢å·¥å…· (Fundamentals Tools)

#### 7. `get_fundamentals` - å…³é”®è´¢åŠ¡æŒ‡æ ‡

**åŠŸèƒ½**: è·å–æ ¸å¿ƒè´¢åŠ¡æ¯”ç‡å’ŒæŒ‡æ ‡

**è¿”å›ç¤ºä¾‹**:
```json
{
  "valuation": {
    "pe_ratio": 37.79,           # å¸‚ç›ˆç‡
    "pb_ratio": 62.20,           # å¸‚å‡€ç‡
    "ps_ratio": 9.82,            # å¸‚é”€ç‡
    "pcf_ratio": 30.05           # å¸‚ç°ç‡
  },
  "profitability": {
    "gross_margin": 46.21,       # æ¯›åˆ©ç‡
    "operating_margin": 31.51,   # è¥ä¸šåˆ©æ¶¦ç‡
    "net_margin": 23.97,         # å‡€åˆ©ç‡
    "roe": 164.59,               # å‡€èµ„äº§æ”¶ç›Šç‡
    "roa": 25.68                 # æ€»èµ„äº§æ”¶ç›Šç‡
  },
  "growth": {
    "revenue_growth_3y": 2.25,   # 3å¹´è¥æ”¶å¢é•¿
    "eps_growth_5y": 15.41,      # 5å¹´EPSå¢é•¿
    "revenue_growth_qoq": 6.07   # å­£åº¦è¥æ”¶å¢é•¿
  },
  "liquidity": {
    "current_ratio": 0.87,       # æµåŠ¨æ¯”ç‡
    "quick_ratio": 0.83          # é€ŸåŠ¨æ¯”ç‡
  },
  "leverage": {
    "debt_to_equity": 1.87,      # è´Ÿå€ºè‚¡æƒæ¯”
    "interest_coverage": 28.5    # åˆ©æ¯ä¿éšœå€æ•°
  }
}
```

#### 8. `get_balance_sheet` - èµ„äº§è´Ÿå€ºè¡¨

**æ ¸å¿ƒæ•°æ®**:
- æ€»èµ„äº§ã€æ€»è´Ÿå€ºã€è‚¡ä¸œæƒç›Š
- æµåŠ¨èµ„äº§ã€å›ºå®šèµ„äº§
- çŸ­æœŸè´Ÿå€ºã€é•¿æœŸè´Ÿå€º

#### 9. `get_cashflow` - ç°é‡‘æµé‡è¡¨

**æ ¸å¿ƒæ•°æ®**:
- ç»è¥æ´»åŠ¨ç°é‡‘æµ
- æŠ•èµ„æ´»åŠ¨ç°é‡‘æµ
- èèµ„æ´»åŠ¨ç°é‡‘æµ
- è‡ªç”±ç°é‡‘æµ

#### 10. `get_income_statement` - åˆ©æ¶¦è¡¨

**æ ¸å¿ƒæ•°æ®**:
- è¥ä¸šæ”¶å…¥ã€è¥ä¸šæˆæœ¬
- æ¯›åˆ©æ¶¦ã€è¥ä¸šåˆ©æ¶¦ã€å‡€åˆ©æ¶¦
- æ¯è‚¡æ”¶ç›Š(EPS)

## ğŸ”„ ReActæ¨¡å¼:LLMå¦‚ä½•è°ƒç”¨å·¥å…·?

### ReActå¾ªç¯è¯¦è§£

**ReAct** = **Rea**son (æ¨ç†) + **Act** (è¡ŒåŠ¨)

```
å¾ªç¯å¼€å§‹
â”‚
â”œâ”€ Reason (æ¨ç†): "æˆ‘éœ€è¦ä»€ä¹ˆæ•°æ®?"
â”‚   LLMå†…å¿ƒç‹¬ç™½: "è¦åˆ†æAAPLçš„æŠ€æœ¯é¢,æˆ‘éœ€è¦ä»·æ ¼æ•°æ®å’ŒRSIæŒ‡æ ‡"
â”‚   â†“
â”œâ”€ Act (è¡ŒåŠ¨): è°ƒç”¨å·¥å…·
â”‚   å·¥å…·è°ƒç”¨1: get_stock_data("AAPL", "2024-11-19", 15)
â”‚   ç­‰å¾…å·¥å…·è¿”å›...
â”‚   â†“
â”œâ”€ Observe (è§‚å¯Ÿ): æ¥æ”¶å·¥å…·è¿”å›çš„æ•°æ®
â”‚   è·å¾—15å¤©çš„ä»·æ ¼æ•°æ®
â”‚   â†“
â”œâ”€ Reason (å†æ¬¡æ¨ç†): "è¿˜éœ€è¦ä»€ä¹ˆ?"
â”‚   LLM: "æœ‰äº†ä»·æ ¼,ç°åœ¨éœ€è¦RSIæŒ‡æ ‡æ¥åˆ¤æ–­è¶…ä¹°è¶…å–"
â”‚   â†“
â”œâ”€ Act (å†æ¬¡è¡ŒåŠ¨):
â”‚   å·¥å…·è°ƒç”¨2: get_indicators("AAPL", "rsi", "2024-11-19")
â”‚   ç­‰å¾…å·¥å…·è¿”å›...
â”‚   â†“
â”œâ”€ Observe (å†æ¬¡è§‚å¯Ÿ):
â”‚   è·å¾—RSI=72.3
â”‚   â†“
â”œâ”€ Reason (æœ€ç»ˆæ¨ç†): "æ•°æ®å¤Ÿäº†,å¯ä»¥è¾“å‡ºæŠ¥å‘Šäº†"
â”‚   LLM: "ä»·æ ¼ä¸Šæ¶¨+RSIè¶…ä¹° = çŸ­æœŸå›è°ƒé£é™©"
â”‚   â†“
â””â”€ Finish: ä¸å†è°ƒç”¨å·¥å…·,è¾“å‡ºæœ€ç»ˆæŠ¥å‘Š
```

### å®é™…ä»£ç è¿½è¸ª

**Market Analystçš„Promptç‰‡æ®µ**:
```python
You are a Market Analyst with access to the following tools:
- get_stock_data: Get historical stock prices
- get_indicators: Calculate technical indicators (RSI, MACD, etc.)

Your task: Analyze the market trends for {company} on {trade_date}.

You can call multiple tools in sequence to gather all needed information.
When you have enough data, provide your final report without calling more tools.
```

**LLMçš„ç¬¬ä¸€è½®è¾“å‡º**:
```json
{
  "tool_calls": [
    {
      "name": "get_stock_data",
      "arguments": {"symbol": "AAPL", "curr_date": "2024-11-19", "lookback_days": 15}
    }
  ]
}
```

**Conditional Logicåˆ¤æ–­**:
```python
def should_continue_market(state: AgentState):
    last_message = state["messages"][-1]
    if last_message.tool_calls:
        return "tools_market"  # æœ‰å·¥å…·è°ƒç”¨,å»æ‰§è¡Œå·¥å…·
    return "Msg Clear Market"  # æ— å·¥å…·è°ƒç”¨,è¾“å‡ºæŠ¥å‘Š
```

**å·¥å…·èŠ‚ç‚¹æ‰§è¡Œ**:
```python
# LangGraphè‡ªåŠ¨è°ƒç”¨å·¥å…·å¹¶è¿”å›ç»“æœ
tool_result = get_stock_data("AAPL", "2024-11-19", 15)
# å°†ç»“æœæ·»åŠ åˆ°messages
state["messages"].append(ToolMessage(content=tool_result))
```

**LLMçš„ç¬¬äºŒè½®è¾“å‡º**:
```json
{
  "tool_calls": [
    {
      "name": "get_indicators",
      "arguments": {"symbol": "AAPL", "indicator": "rsi", "curr_date": "2024-11-19"}
    }
  ]
}
```

...å¾ªç¯ç»§ç»­,ç›´åˆ°LLMä¸å†è°ƒç”¨å·¥å…·

**LLMçš„æœ€ç»ˆè¾“å‡º**:
```markdown
## Market Analysis Report for AAPL (2024-11-19)

### Price Action
- 15-day trend: Upward momentum from $220.75 to $228.02 (+3.3%)
- Recent volatility: Moderate, with daily ranges of 2-3%

### Technical Indicators
- **RSI**: 72.3 - **OVERBOUGHT** condition
- **MACD**: Bullish crossover, but momentum slowing
- **Bollinger Bands**: Price touching upper band, suggesting potential reversal

### Conclusion
Strong upward trend but RSI indicates overbought conditions.
Recommend caution for new entries. Watch for pullback to 225 support.
```

## ğŸ¯ å·¥å…·è°ƒç”¨çš„æœ€ä½³å®è·µ

### 1. å·¥å…·æè¿°è¦æ¸…æ™°

```python
@tool
def get_indicators(symbol: str, indicator: str, curr_date: str) -> str:
    """Calculate technical indicators for a stock.

    Args:
        symbol: Stock ticker symbol (e.g., 'AAPL')
        indicator: Indicator name. Available options:
            - 'rsi': Relative Strength Index (0-100, >70=overbought, <30=oversold)
            - 'macd': MACD line and signal line values
            - 'boll': Bollinger Bands (upper, middle, lower)
        curr_date: Current trading date in YYYY-MM-DD format

    Returns:
        JSON string with indicator values for the past 15 days
    """
    ...
```

**ä¸ºä»€ä¹ˆé‡è¦?**
- LLMé€šè¿‡æè¿°ç†è§£å·¥å…·åŠŸèƒ½
- æ¸…æ™°çš„å‚æ•°è¯´æ˜å‡å°‘è°ƒç”¨é”™è¯¯
- ç¤ºä¾‹å€¼å¸®åŠ©LLMæ­£ç¡®æ ¼å¼åŒ–å‚æ•°

### 2. è¿”å›æ ¼å¼è¦ä¸€è‡´

âœ… **å¥½çš„è¿”å›**:
```json
{"2024-11-01": 45.2, "2024-11-02": 48.5, ...}
```

âŒ **ä¸å¥½çš„è¿”å›**:
```
RSI on Nov 1 is 45.2, Nov 2 is 48.5...
```

**åŸå› **: JSONæ ¼å¼LLMæ›´å®¹æ˜“è§£æå’Œç†è§£

### 3. é”™è¯¯å¤„ç†è¦å‹å¥½

```python
def get_stock_data(symbol: str, curr_date: str, lookback_days: int = 15) -> str:
    try:
        data = fetch_from_api(symbol, curr_date, lookback_days)
        return json.dumps(data)
    except APIError as e:
        return json.dumps({
            "error": True,
            "message": f"Failed to fetch data for {symbol}: {str(e)}",
            "suggestion": "Try a different date or check if the symbol is correct"
        })
```

**å¥½å¤„**: LLMå¯ä»¥ç†è§£é”™è¯¯å¹¶é‡‡å–æ›¿ä»£ç­–ç•¥

## ğŸ¤” æ ¸å¿ƒé—®é¢˜è§£ç­”

### Q3: æœ‰å¤šå°‘ä¸ªå·¥å…·èŠ‚ç‚¹?æ¯ä¸ªå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·?

**ç­”æ¡ˆ**: 4ä¸ªå·¥å…·èŠ‚ç‚¹

| å·¥å…·èŠ‚ç‚¹ | å¯è°ƒç”¨çš„å·¥å…· | å·¥å…·æ•°é‡ |
|---------|-------------|---------|
| tools_market | get_stock_data, get_indicators | 2 |
| tools_social | get_news | 1 |
| tools_news | get_news, get_global_news, get_insider_sentiment, get_insider_transactions | 4 |
| tools_fundamentals | get_fundamentals, get_balance_sheet, get_cashflow, get_income_statement | 4 |

**æ€»è®¡**: 11ä¸ªå·¥å…·å‡½æ•° (å»é‡å,å› ä¸ºget_newsåœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸­)

### Q4: LLMå¦‚ä½•åˆ¤æ–­è°ƒç”¨å“ªä¸ªå·¥å…·?

**ç­”æ¡ˆ**: é€šè¿‡ä»¥ä¸‹æœºåˆ¶:

1. **System Prompt**: å‘Šè¯‰LLMå¯ç”¨å·¥å…·åˆ—è¡¨
```
You have access to: get_stock_data, get_indicators
```

2. **Tool Schema**: æ¯ä¸ªå·¥å…·çš„è¯¦ç»†æè¿°
```json
{
  "name": "get_indicators",
  "description": "Calculate technical indicators...",
  "parameters": {...}
}
```

3. **LLMæ¨ç†**: æ ¹æ®ä»»åŠ¡ç›®æ ‡é€‰æ‹©åˆé€‚å·¥å…·
```
ä»»åŠ¡: "åˆ†æRSIæ˜¯å¦è¶…ä¹°"
â†’ LLMæ¨ç†: "éœ€è¦RSIæ•°æ®"
â†’ é€‰æ‹©å·¥å…·: get_indicators
â†’ å‚æ•°: indicator="rsi"
```

4. **Function Calling**: LLMè¾“å‡ºJSONæ ¼å¼çš„å·¥å…·è°ƒç”¨
```json
{
  "tool_calls": [{
    "name": "get_indicators",
    "arguments": {"symbol": "AAPL", "indicator": "rsi", "curr_date": "2024-11-19"}
  }]
}
```

5. **LangGraphæ‰§è¡Œ**: è‡ªåŠ¨è°ƒç”¨å·¥å…·å¹¶è¿”å›ç»“æœ

### Q5: ä¸ºä»€ä¹ˆè¦æœ‰æ¶ˆæ¯æ¸…ç†èŠ‚ç‚¹?

**ç­”æ¡ˆ**: é˜²æ­¢Contextè¿‡é•¿

**é—®é¢˜**: å·¥å…·è°ƒç”¨ä¼šäº§ç”Ÿå¤§é‡æ¶ˆæ¯
```
Message 1: Analyst "I need RSI data"
Message 2: ToolCall get_indicators(...)
Message 3: ToolMessage {"2024-11-01": 45.2, ...}
Message 4: Analyst "I need MACD data"
Message 5: ToolCall get_indicators(...)
Message 6: ToolMessage {"2024-11-01": 120.5, ...}
...
Message 20: Analyst final report
```

**è§£å†³**: æ¸…ç†ä¸­é—´è¿‡ç¨‹,åªä¿ç•™æœ€ç»ˆæŠ¥å‘Š
```
æ¸…ç†å:
Message 1: Market Analyst final report
```

**å¥½å¤„**:
- èŠ‚çœTokenæˆæœ¬
- æé«˜åç»­Agentçš„ç†è§£æ•ˆç‡
- é¿å…è¶…å‡ºLLMçš„Contexté™åˆ¶

## ğŸ“ æœ¬èŠ‚å°ç»“

é€šè¿‡æœ¬èŠ‚,ä½ åº”è¯¥æŒæ¡:

âœ… TradingAgentçš„4ä¸ªå·¥å…·èŠ‚ç‚¹åˆ†ç»„ç­–ç•¥
âœ… 11ä¸ªå·¥å…·å‡½æ•°çš„åŠŸèƒ½å’Œç”¨é€”
âœ… ReActæ¨¡å¼çš„å®Œæ•´å¾ªç¯æµç¨‹
âœ… LLMå¦‚ä½•é€‰æ‹©å’Œè°ƒç”¨å·¥å…·
âœ… å·¥å…·è°ƒç”¨çš„æœ€ä½³å®è·µ
âœ… æ¶ˆæ¯æ¸…ç†çš„å¿…è¦æ€§

**å…³é”®æ´å¯Ÿ**:
- å·¥å…·æ˜¯Agentçš„"æ‰‹å’Œçœ¼",å†³å®šäº†Agentçš„èƒ½åŠ›è¾¹ç•Œ
- ReActæ¨¡å¼è®©LLMå¯ä»¥åƒäººç±»ä¸€æ ·"è¾¹æ€è€ƒè¾¹è¡ŒåŠ¨"
- åˆç†çš„å·¥å…·åˆ†ç»„å¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½

---

**ä¸Šä¸€èŠ‚**: [10.4 åˆ†æå¸ˆå›¢é˜Ÿ-æ•°æ®é‡‡é›†çš„å››å¤§é‡‘åˆš](./10.4%20åˆ†æå¸ˆå›¢é˜Ÿ-æ•°æ®é‡‡é›†çš„å››å¤§é‡‘åˆš.md)

**ä¸‹ä¸€èŠ‚**: [10.6 ç ”ç©¶å‘˜è¾©è®º-ç‰›ç†Šè§‚ç‚¹çš„ç¢°æ’](./10.6%20ç ”ç©¶å‘˜è¾©è®º-ç‰›ç†Šè§‚ç‚¹çš„ç¢°æ’.md)

**è¿”å›ç›®å½•**: [10.0 æœ¬ç« ä»‹ç»](./10.0%20æœ¬ç« ä»‹ç».md)
