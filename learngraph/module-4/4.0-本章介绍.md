# Module-4 æœ¬ç« ä»‹ç»ï¼šç²¾é€š Human-in-the-Loopï¼ˆäººæœºååŒï¼‰

> **æ¥è‡ªå›¾çµå¥–è·å¾—è€…çš„å¯„è¯­**
>
> "çœŸæ­£æ™ºèƒ½çš„ç³»ç»Ÿä¸æ˜¯å®Œå…¨è‡ªä¸»çš„ï¼Œè€Œæ˜¯èƒ½åœ¨å…³é”®æ—¶åˆ»ä¼˜é›…åœ°ç­‰å¾…äººç±»åˆ¤æ–­çš„ç³»ç»Ÿã€‚Human-in-the-Loop ä¸æ˜¯ AI çš„ç¼ºé™·ï¼Œè€Œæ˜¯å…¶æ™ºæ…§çš„ä½“ç°â€”â€”çŸ¥é“ä½•æ—¶éœ€è¦äººç±»ä¸“å®¶çš„ä»‹å…¥ã€‚å°±åƒæœ€ä¼Ÿå¤§çš„å›½é™…è±¡æ£‹ç¨‹åºå¹¶éç‹¬è‡ªä½œæˆ˜ï¼Œè€Œæ˜¯ä¸äººç±»å¤§å¸ˆå½¢æˆæœ€å¼ºæ­æ¡£ã€‚åœ¨ LangGraph ä¸­ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•æ„å»ºè¿™æ ·çš„åä½œç³»ç»Ÿï¼šAI è´Ÿè´£é«˜æ•ˆæ‰§è¡Œï¼Œäººç±»è´Ÿè´£å…³é”®å†³ç­–ï¼ŒäºŒè€…å…±åŒåˆ›é€ è¶…è¶Šå•æ–¹èƒ½åŠ›çš„ä»·å€¼ã€‚"
>
> â€” *å¯å‘è‡ª Judea Pearl å¯¹å› æœæ¨ç†ä¸­äººç±»åˆ¤æ–­çš„å¼ºè°ƒ*

---

## ğŸ“š æœ¬ç« æ¦‚è§ˆ

Human-in-the-Loopï¼ˆäººæœºååŒï¼‰æ˜¯æ„å»º**å¯æ§ã€å¯ä¿¡ã€å¯é ** AI ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨ LangGraph ä¸­å®ç°äº”ç§å¼ºå¤§çš„äººæœºäº¤äº’æ¨¡å¼ï¼Œè®© AI Agent åœ¨å…³é”®èŠ‚ç‚¹æš‚åœã€ç­‰å¾…äººç±»ç¡®è®¤ã€æ¥æ”¶åé¦ˆï¼Œç”šè‡³å›æº¯å†å²çŠ¶æ€ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ä¸€å¥—å®Œæ•´çš„å¯æ§ AI è®¾è®¡å“²å­¦ã€‚

### å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š

1. **Breakpointsï¼ˆæ–­ç‚¹æœºåˆ¶ï¼‰** - åœ¨å›¾æ‰§è¡Œå‰åä¸»åŠ¨æš‚åœï¼Œå®ç°å·¥å…·è°ƒç”¨å®¡æ‰¹å’Œæ•æ„Ÿæ“ä½œç¡®è®¤
2. **Dynamic Breakpointsï¼ˆåŠ¨æ€æ–­ç‚¹ï¼‰** - æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶æ™ºèƒ½ä¸­æ–­ï¼Œä¼ é€’è¯¦ç»†ä¸­æ–­åŸå› 
3. **Edit Stateï¼ˆçŠ¶æ€ç¼–è¾‘ï¼‰** - åœ¨æš‚åœæ—¶ä¿®æ”¹çŠ¶æ€ï¼Œçº æ­£ AI è¯¯è§£æˆ–æ³¨å…¥äººç±»åé¦ˆ
4. **Streamingï¼ˆæµå¼è¾“å‡ºï¼‰** - å®æ—¶å±•ç¤º AI æ‰§è¡Œè¿‡ç¨‹ï¼Œå®ç°ç±» ChatGPT çš„æ‰“å­—æœºæ•ˆæœ
5. **Time Travelï¼ˆæ—¶é—´æ—…è¡Œï¼‰** - æµè§ˆå†å²çŠ¶æ€ã€å›æ”¾æ‰§è¡Œã€ä»å†å²åˆ†å‰åˆ›å»ºæ–°è·¯å¾„

### æœ¬ç« æ¶æ„å›¾

```
Module-4: Human-in-the-Loop å®Œæ•´ä½“ç³»
â”œâ”€ 4.1 Breakpoints (éš¾åº¦: â­â­â­)
â”‚   â”œâ”€ interrupt_before/after
â”‚   â”œâ”€ å·¥å…·è°ƒç”¨å®¡æ‰¹
â”‚   â””â”€ Checkpointer æœºåˆ¶
â”‚
â”œâ”€ 4.2 Dynamic Breakpoints (éš¾åº¦: â­â­â­â­)
â”‚   â”œâ”€ NodeInterrupt å¼‚å¸¸
â”‚   â”œâ”€ æ¡ä»¶æ€§ä¸­æ–­
â”‚   â””â”€ ä¿¡æ¯ä¼ é€’æœºåˆ¶
â”‚
â”œâ”€ 4.3 Edit State & Human Feedback (éš¾åº¦: â­â­â­â­)
â”‚   â”œâ”€ update_state API
â”‚   â”œâ”€ as_node å‚æ•°
â”‚   â”œâ”€ Reducer è¦†ç›–æœºåˆ¶
â”‚   â””â”€ äººå·¥åé¦ˆèŠ‚ç‚¹è®¾è®¡
â”‚
â”œâ”€ 4.4 Streaming (éš¾åº¦: â­â­â­â­â­)
â”‚   â”œâ”€ stream_mode: updates/values
â”‚   â”œâ”€ astream_events (Token Streaming)
â”‚   â”œâ”€ API messages æ¨¡å¼
â”‚   â””â”€ async/await å¼‚æ­¥ç¼–ç¨‹
â”‚
â””â”€ 4.5 Time Travel (éš¾åº¦: â­â­â­â­â­)
    â”œâ”€ æµè§ˆå†å² (get_state_history)
    â”œâ”€ å›æ”¾ (Replaying)
    â”œâ”€ åˆ†å‰ (Forking)
    â””â”€ Message ID è¦†ç›–æœºåˆ¶
```

### çŸ¥è¯†ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[Module-3: çŠ¶æ€ç®¡ç†] --> B[Breakpoints]
    B --> C[Dynamic Breakpoints]
    B --> D[Edit State]
    C --> D
    D --> E[Streaming]
    E --> F[Time Travel]
    B --> F

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#f5e1ff
    style E fill:#e1ffe1
    style F fill:#ffe1e1
```

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### 1. Breakpoints: æ‰§è¡Œçš„"æš‚åœæŒ‰é’®"

**æ ¸å¿ƒæ€æƒ³ï¼š** åœ¨å›¾çš„æ‰§è¡Œè¿‡ç¨‹ä¸­è®¾ç½®æ–­ç‚¹ï¼Œä¸»åŠ¨æš‚åœç­‰å¾…äººå·¥å¹²é¢„ã€‚

**å…¸å‹åº”ç”¨åœºæ™¯ï¼š**
```python
# åœºæ™¯ï¼šæ”¯ä»˜ API è°ƒç”¨å‰éœ€è¦äººå·¥ç¡®è®¤
graph = builder.compile(
    interrupt_before=["payment_tool"],  # åœ¨æ”¯ä»˜å‰æš‚åœ
    checkpointer=memory
)

# æ‰§è¡Œåˆ°æ–­ç‚¹
for event in graph.stream(user_input, thread):
    print(event)  # æ˜¾ç¤ºå³å°†æ‰§è¡Œçš„æ”¯ä»˜æ“ä½œ

# è·å–ç”¨æˆ·æ‰¹å‡†
approval = input("Approve payment? (yes/no): ")

if approval == "yes":
    # ç»§ç»­æ‰§è¡Œ
    for event in graph.stream(None, thread):
        print(event)
```

**ä¸‰å¤§ä½¿ç”¨åœºæ™¯ï¼š**

| åœºæ™¯ | è¯´æ˜ | æ–­ç‚¹ä½ç½® |
|------|------|---------|
| **Approvalï¼ˆå®¡æ‰¹ï¼‰** | æ•æ„Ÿæ“ä½œå‰ç¡®è®¤ | `interrupt_before` |
| **Debuggingï¼ˆè°ƒè¯•ï¼‰** | æŸ¥çœ‹ä¸­é—´çŠ¶æ€ | `interrupt_after` |
| **Editingï¼ˆç¼–è¾‘ï¼‰** | ä¿®æ”¹çŠ¶æ€åç»§ç»­ | ç»“åˆ `update_state` |

**å…³é”®æœºåˆ¶ï¼š**
- **Checkpointer å¿…éœ€**ï¼šæ–­ç‚¹ä¾èµ–çŠ¶æ€æŒä¹…åŒ–
- **Thread éš”ç¦»**ï¼šä¸åŒç”¨æˆ·/ä¼šè¯ç‹¬ç«‹ç®¡ç†
- **stream(None, thread)**ï¼šä»æ–­ç‚¹ç»§ç»­æ‰§è¡Œ

---

### 2. Dynamic Breakpoints: æ™ºèƒ½æ¡ä»¶ä¸­æ–­

**æ ¸å¿ƒæ€æƒ³ï¼š** ä¸é¢„è®¾å›ºå®šæ–­ç‚¹ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶æ ¹æ®ä¸šåŠ¡é€»è¾‘åŠ¨æ€å†³å®šæ˜¯å¦ä¸­æ–­ã€‚

**å¯¹æ¯”é™æ€æ–­ç‚¹ï¼š**

| ç‰¹æ€§ | é™æ€æ–­ç‚¹ | åŠ¨æ€æ–­ç‚¹ |
|------|---------|---------|
| è®¾ç½®æ—¶æœº | ç¼–è¯‘æ—¶å›ºå®š | è¿è¡Œæ—¶å†³å®š |
| è§¦å‘æ–¹å¼ | æ€»æ˜¯è§¦å‘ | æ¡ä»¶æ€§è§¦å‘ |
| ä¿¡æ¯ä¼ é€’ | æ—  | å¯ä¼ é€’ä¸­æ–­åŸå›  |
| çµæ´»æ€§ | ä½ | é«˜ |

**å®ç°ç¤ºä¾‹ï¼š**
```python
from langgraph.errors import NodeInterrupt

def content_filter(state):
    risk_score = calculate_risk(state['content'])

    if risk_score > 0.8:
        # æŠ›å‡º NodeInterruptï¼Œä¼ é€’è¯¦ç»†ä¿¡æ¯
        raise NodeInterrupt(
            f"é«˜é£é™©å†…å®¹æ£€æµ‹ (è¯„åˆ†: {risk_score})ï¼Œéœ€è¦äººå·¥å®¡æ ¸ã€‚"
            f"æ£€æµ‹åˆ°çš„é—®é¢˜: {', '.join(detected_issues)}"
        )

    return state  # ä½é£é™©ï¼Œç»§ç»­æ‰§è¡Œ
```

**æ ¸å¿ƒ APIï¼š`NodeInterrupt`**
```python
raise NodeInterrupt(message: str)
```

**ä¿¡æ¯è·å–ï¼š**
```python
state = graph.get_state(thread)
interrupt_info = state.tasks[0].interrupts[0].value
# è¾“å‡º: "é«˜é£é™©å†…å®¹æ£€æµ‹ (è¯„åˆ†: 0.85)ï¼Œéœ€è¦äººå·¥å®¡æ ¸ã€‚..."
```

---

### 3. Edit State: çŠ¶æ€çš„"æ—¶å…‰ä¿®æ”¹å™¨"

**æ ¸å¿ƒæ€æƒ³ï¼š** åœ¨æ–­ç‚¹å¤„ä¸ä»…èƒ½æš‚åœï¼Œè¿˜èƒ½ä¿®æ”¹çŠ¶æ€ï¼Œçº æ­£ AI çš„ç†è§£æˆ–æ³¨å…¥äººç±»åé¦ˆã€‚

**ä¸‰ç§ç¼–è¾‘æ¨¡å¼ï¼š**

#### æ¨¡å¼ 1ï¼šè¿½åŠ åé¦ˆï¼ˆä¸æä¾› Message IDï¼‰
```python
# åœºæ™¯ï¼šç”¨æˆ·è¡¥å……ä¿¡æ¯
graph.update_state(
    thread,
    {"messages": [HumanMessage("è¡¥å……ä¿¡æ¯ï¼šä¼˜å…ˆè€ƒè™‘æ€§èƒ½")]},
    as_node="human_feedback"
)
# ç»“æœï¼šæ–°æ¶ˆæ¯è¿½åŠ åˆ°å†å²æœ«å°¾
```

#### æ¨¡å¼ 2ï¼šè¦†ç›–æ¶ˆæ¯ï¼ˆä¿ç•™ Message IDï¼‰
```python
# åœºæ™¯ï¼šçº æ­£ç”¨æˆ·è¾“å…¥
state = graph.get_state(thread)
last_msg = state.values['messages'][-1]
last_msg['content'] = "ä¿®æ­£åçš„é—®é¢˜"

graph.update_state(
    thread,
    {"messages": [last_msg]},  # ä¿ç•™ ID
    as_node="correction"
)
# ç»“æœï¼šåŸæ¶ˆæ¯è¢«è¦†ç›–
```

#### æ¨¡å¼ 3ï¼šæ³¨å…¥ä¸“å®¶çŸ¥è¯†
```python
# åœºæ™¯ï¼šAI ç¼ºä¹é¢†åŸŸçŸ¥è¯†
graph.update_state(
    thread,
    {
        "domain_context": "è¯¥æ•°æ®å¼‚å¸¸æ˜¯å­£èŠ‚æ€§å› ç´ ",
        "expert_suggestion": "ä½¿ç”¨ç§»åŠ¨å¹³å‡å¹³æ»‘å¤„ç†"
    },
    as_node="expert_review"
)
```

**å…³é”®å‚æ•°ï¼š`as_node`**
```python
graph.update_state(thread, data, as_node="human_feedback")
#                                  ^^^^^^^^^^^^^^^^^^^^
#                                  æ¨¡æ‹Ÿè¯¥èŠ‚ç‚¹çš„è¾“å‡º
```

**ä½œç”¨ï¼š** å‘Šè¯‰å›¾ä»å“ªä¸ªèŠ‚ç‚¹ç»§ç»­æ‰§è¡Œï¼Œç¡®ä¿æ­£ç¡®çš„æ§åˆ¶æµã€‚

**Reducer æœºåˆ¶ï¼š**
```python
# MessagesState ä½¿ç”¨ add_messages reducer
# - æœ‰ ID â†’ è¦†ç›–
# - æ—  ID â†’ è¿½åŠ 
# - RemoveMessage â†’ åˆ é™¤
```

---

### 4. Streaming: å®æ—¶çš„"è¿›åº¦æ¡"

**æ ¸å¿ƒæ€æƒ³ï¼š** ä¸ç­‰å¾…å®Œæ•´ç»“æœï¼Œè€Œæ˜¯é€æ­¥è¾“å‡º AI çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

**å››ç§ Streaming æ¨¡å¼ï¼š**

| æ¨¡å¼ | ç²’åº¦ | è¾“å‡ºå†…å®¹ | å…¸å‹ç”¨é€” |
|------|------|---------|---------|
| `updates` | èŠ‚ç‚¹çº§ | çŠ¶æ€æ›´æ–° | è¿½è¸ªå˜åŒ– |
| `values` | èŠ‚ç‚¹çº§ | å®Œæ•´çŠ¶æ€ | è°ƒè¯•æ£€æŸ¥ |
| `astream_events` | äº‹ä»¶çº§ | æ‰€æœ‰äº‹ä»¶ | Token streaming |
| `messages` (API) | Token çº§ | æ¶ˆæ¯æµ | èŠå¤©åº”ç”¨ |

**Token Streaming å®ç°ï¼ˆç±» ChatGPT æ•ˆæœï¼‰ï¼š**

```python
# æœ¬åœ°ç‰ˆæœ¬
async for event in graph.astream_events(input_data, config, version="v2"):
    if event["event"] == "on_chat_model_stream":
        token = event["data"]["chunk"].content
        print(token, end="", flush=True)

# API ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
async for event in client.runs.stream(
    thread_id,
    assistant_id="agent",
    input=input_data,
    stream_mode="messages"
):
    if event.event == "messages/partial":
        for item in event.data:
            if "content" in item:
                print(item["content"], end="", flush=True)
```

**å¼‚æ­¥ç¼–ç¨‹è¦ç‚¹ï¼š**
```python
# å®šä¹‰å¼‚æ­¥å‡½æ•°
async def stream_response():
    async for event in graph.astream_events(...):
        yield event

# åœ¨ Jupyter ä¸­ç›´æ¥ä½¿ç”¨
result = await some_async_function()

# åœ¨æ™®é€š Python è„šæœ¬ä¸­
import asyncio
asyncio.run(main())
```

---

### 5. Time Travel: å†å²çš„"ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"

**æ ¸å¿ƒæ€æƒ³ï¼š** åƒ Git ä¸€æ ·ç®¡ç†å›¾çš„æ‰§è¡Œå†å²ï¼Œæ”¯æŒæŸ¥çœ‹ã€å›æ”¾ã€åˆ†å‰ã€‚

**ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š**

#### èƒ½åŠ› 1ï¼šæµè§ˆå†å²ï¼ˆBrowsingï¼‰
```python
# è·å–å®Œæ•´å†å²
all_states = list(graph.get_state_history(thread))

# æŸ¥çœ‹æ¯ä¸€æ­¥
for i, state in enumerate(all_states):
    print(f"Step {i}: {state.metadata.get('step')}")
    print(f"  Messages: {len(state.values['messages'])}")
    print(f"  Next: {state.next}")
```

#### èƒ½åŠ› 2ï¼šå›æ”¾ï¼ˆReplayingï¼‰
```python
# é€‰æ‹©è¦å›æ”¾çš„å†å²çŠ¶æ€
to_replay = all_states[-3]  # å›åˆ°ç¬¬ 3 æ­¥

# ä»è¯¥çŠ¶æ€é‡æ–°æ‰§è¡Œ
for event in graph.stream(None, to_replay.config):
    print(event)
```

#### èƒ½åŠ› 3ï¼šåˆ†å‰ï¼ˆForkingï¼‰
```python
# é€‰æ‹©åˆ†å‰ç‚¹
base_state = all_states[-2]

# ä¿®æ”¹çŠ¶æ€åˆ›å»ºåˆ†å‰
fork_config = graph.update_state(
    base_state.config,
    {"messages": [HumanMessage(
        content="ä¿®æ”¹åçš„è¾“å…¥",
        id=base_state.values['messages'][0].id  # â­ ä¿ç•™ ID ä»¥è¦†ç›–
    )]}
)

# ä»åˆ†å‰ç»§ç»­æ‰§è¡Œï¼ˆåˆ›å»ºæ–°çš„å†å²åˆ†æ”¯ï¼‰
for event in graph.stream(None, fork_config):
    print(event)
```

**åˆ†å‰çš„"Git ç±»æ¯”"ï¼š**
```
åŸå§‹å†å²ï¼ˆmain åˆ†æ”¯ï¼‰ï¼š
  A â†’ B â†’ C â†’ D

åˆ†å‰ï¼ˆfeature åˆ†æ”¯ï¼‰ï¼š
  A â†’ B' â†’ C' â†’ D'
       â†‘
      ä¿®æ”¹ç‚¹

ä¸¤æ¡åˆ†æ”¯ç‹¬ç«‹å­˜åœ¨ï¼Œäº’ä¸å½±å“
```

**Message ID è¦†ç›–æœºåˆ¶ï¼š**
```python
# å…³é”®ï¼šä¿ç•™åŸæ¶ˆæ¯çš„ ID
original_msg = state.values['messages'][0]

# âœ… æ­£ç¡®ï¼šè¦†ç›–æ¶ˆæ¯
HumanMessage(content="æ–°å†…å®¹", id=original_msg.id)

# âŒ é”™è¯¯ï¼šè¿½åŠ æ¶ˆæ¯ï¼ˆä¸æä¾› ID æˆ–ä½¿ç”¨æ–° IDï¼‰
HumanMessage(content="æ–°å†…å®¹")  # ä¼šè¿½åŠ ï¼Œä¸ä¼šè¦†ç›–
```

---

## ğŸ—ºï¸ å­¦ä¹ è·¯çº¿å›¾

### åˆå­¦è€…è·¯å¾„ï¼ˆ3-4 å¤©ï¼‰

**ç›®æ ‡ï¼š** æŒæ¡åŸºç¡€çš„äººæœºäº¤äº’æ¨¡å¼

**Day 1: Breakpoints åŸºç¡€**
- âœ… ç†è§£ `interrupt_before/after` æœºåˆ¶
- âœ… å®ç°ç®€å•çš„å·¥å…·è°ƒç”¨å®¡æ‰¹
- âœ… æŒæ¡ `stream(None, thread)` æ¢å¤æ‰§è¡Œ
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºéœ€è¦äººå·¥ç¡®è®¤çš„è®¡ç®—å™¨ Agent

**Day 2: çŠ¶æ€ç¼–è¾‘**
- âœ… å­¦ä¹  `update_state` API
- âœ… ç†è§£ `as_node` å‚æ•°çš„ä½œç”¨
- âœ… æŒæ¡æ¶ˆæ¯è¿½åŠ  vs è¦†ç›–çš„åŒºåˆ«
- ğŸ¯ å®æˆ˜ï¼šå®ç°å¯çº æ­£ç”¨æˆ·è¾“å…¥çš„èŠå¤©æœºå™¨äºº

**Day 3: Streaming åŸºç¡€**
- âœ… æŒæ¡ `stream_mode="values"` è°ƒè¯•
- âœ… å­¦ä¹ åŸºæœ¬çš„ `async/await` è¯­æ³•
- âœ… å®ç°ç®€å•çš„è¿›åº¦æ˜¾ç¤º
- ğŸ¯ å®æˆ˜ï¼šä¸º Agent æ·»åŠ å®æ—¶çŠ¶æ€è¾“å‡º

**Day 4: ç»¼åˆç»ƒä¹ **
- ğŸ¯ é¡¹ç›®ï¼šæ„å»ºä¸€ä¸ªæ”¯æŒæ–­ç‚¹ã€çŠ¶æ€ç¼–è¾‘å’Œæµå¼è¾“å‡ºçš„é—®ç­”ç³»ç»Ÿ
- ğŸ“ å¤ä¹ ï¼šå·©å›º Checkpointerã€Threadã€Reducer ç­‰æ ¸å¿ƒæ¦‚å¿µ

---

### è¿›é˜¶è€…è·¯å¾„ï¼ˆ4-6 å¤©ï¼‰

**ç›®æ ‡ï¼š** æŒæ¡é«˜çº§äººæœºäº¤äº’æŠ€æœ¯

**Day 1-2: Dynamic Breakpoints**
- âœ… ç†è§£ `NodeInterrupt` å¼‚å¸¸æœºåˆ¶
- âœ… å®ç°æ¡ä»¶æ€§ä¸­æ–­é€»è¾‘
- âœ… å­¦ä¹ ç»“æ„åŒ–ä¿¡æ¯ä¼ é€’
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºå†…å®¹å®¡æ ¸ç³»ç»Ÿï¼ˆæ ¹æ®é£é™©è¯„åˆ†åŠ¨æ€ä¸­æ–­ï¼‰

**Day 3-4: Token Streaming**
- âœ… æŒæ¡ `astream_events` API
- âœ… å®ç° Token çº§åˆ«çš„æµå¼è¾“å‡º
- âœ… å­¦ä¹ äº‹ä»¶è¿‡æ»¤å’Œä¼˜åŒ–
- âœ… ç†è§£ `messages` æ¨¡å¼ï¼ˆAPIï¼‰
- ğŸ¯ å®æˆ˜ï¼šå®ç°ç±» ChatGPT çš„æ‰“å­—æœºæ•ˆæœ

**Day 5: Time Travel åŸºç¡€**
- âœ… å­¦ä¹  `get_state_history` æµè§ˆå†å²
- âœ… æŒæ¡å›æ”¾ï¼ˆReplayingï¼‰æœºåˆ¶
- âœ… ç†è§£ Checkpoint ç»“æ„
- ğŸ¯ å®æˆ˜ï¼šä¸º Agent æ·»åŠ "æ’¤é”€"åŠŸèƒ½

**Day 6: Time Travel åˆ†å‰**
- âœ… æŒæ¡åˆ†å‰ï¼ˆForkingï¼‰æŠ€æœ¯
- âœ… ç†è§£ Message ID è¦†ç›–æœºåˆ¶
- âœ… å­¦ä¹ å¤šåˆ†æ”¯ç®¡ç†
- ğŸ¯ å®æˆ˜ï¼šA/B æµ‹è¯•ä¸åŒçš„ Agent é…ç½®

---

### ä¸“å®¶è·¯å¾„ï¼ˆ6-10 å¤©ï¼‰

**ç›®æ ‡ï¼š** æ„å»ºç”Ÿäº§çº§çš„äººæœºååŒç³»ç»Ÿ

**Day 1-2: é«˜çº§æ–­ç‚¹æ¨¡å¼**
- âœ… ç»„åˆé™æ€å’ŒåŠ¨æ€æ–­ç‚¹
- âœ… å®ç°å¤šçº§å®¡æ‰¹æµç¨‹
- âœ… è®¾è®¡æ¡ä»¶æ–­ç‚¹ç³»ç»Ÿ
- âœ… å­¦ä¹ å®¡æ‰¹å†å²è®°å½•
- ğŸ¯ å®æˆ˜ï¼šä¼ä¸šçº§å®¡æ‰¹å·¥ä½œæµç³»ç»Ÿ

**Day 3-4: ç”Ÿäº§çº§ Streaming**
- âœ… å­¦ä¹  LangGraph API éƒ¨ç½²
- âœ… å®ç° WebSocket/SSE æµå¼ä¼ è¾“
- âœ… æŒæ¡å¤šç”¨æˆ·å¹¶å‘ Streaming
- âœ… ä¼˜åŒ– Token Streaming æ€§èƒ½
- ğŸ¯ å®æˆ˜ï¼šæ„å»ºæ”¯æŒåƒçº§å¹¶å‘çš„èŠå¤©æœåŠ¡

**Day 5-6: é«˜çº§çŠ¶æ€ç®¡ç†**
- âœ… è®¾è®¡å¤æ‚çš„çŠ¶æ€ç¼–è¾‘ç­–ç•¥
- âœ… å®ç°çŠ¶æ€ç‰ˆæœ¬æ§åˆ¶
- âœ… æŒæ¡å®¡è®¡æ—¥å¿—ç³»ç»Ÿ
- âœ… å­¦ä¹ çŠ¶æ€å›æ»šæœºåˆ¶
- ğŸ¯ å®æˆ˜ï¼šå¯è¿½æº¯çš„å®¢æœç³»ç»Ÿ

**Day 7-8: Time Travel é«˜çº§åº”ç”¨**
- âœ… å®ç°æ—¶é—´çº¿å¯è§†åŒ–
- âœ… è®¾è®¡è‡ªåŠ¨ä¿å­˜å…³é”® Checkpoint
- âœ… æŒæ¡å¤šåˆ†æ”¯æ¢ç´¢æŠ€æœ¯
- âœ… å­¦ä¹ æ¡ä»¶å›æ”¾ç­–ç•¥
- ğŸ¯ å®æˆ˜ï¼šAI å†³ç­–è°ƒè¯•å¹³å°

**Day 9-10: ç»¼åˆé¡¹ç›®**
- ğŸ¯ å¤§å‹é¡¹ç›®ï¼šæ„å»ºå®Œæ•´çš„ Human-in-the-Loop AI åº”ç”¨
  - æ”¯æŒå¤šç§ä¸­æ–­æ¨¡å¼ï¼ˆé™æ€ã€åŠ¨æ€ã€æ¡ä»¶ï¼‰
  - å®ç°å®Œæ•´çš„çŠ¶æ€ç¼–è¾‘å’Œå®¡è®¡
  - æä¾›æµå¼è¾“å‡ºå’Œå®æ—¶åé¦ˆ
  - æ”¯æŒå†å²æµè§ˆã€å›æ”¾å’Œåˆ†å‰
  - å…·å¤‡ç”Ÿäº§çº§çš„æ€§èƒ½å’Œå¯é æ€§

---

## ğŸ’¡ å­¦ä¹ å»ºè®®

### 1. å®è·µé©±åŠ¨å­¦ä¹ 

**âŒ ä¸æ¨èï¼š** åªçœ‹ç†è®ºï¼Œä¸åŠ¨æ‰‹å®è·µ

**âœ… æ¨èï¼š** æ¯å­¦ä¸€ä¸ªæ¦‚å¿µç«‹å³ç¼–å†™ä»£ç éªŒè¯

```python
# ç¤ºä¾‹ï¼šå­¦ä¹  Breakpoints åç«‹å³å°è¯•
graph = builder.compile(
    interrupt_before=["assistant"],
    checkpointer=MemorySaver()
)

# æµ‹è¯• 1ï¼šè§‚å¯Ÿæ–­ç‚¹è¡Œä¸º
for event in graph.stream(input, thread):
    print(event)

# æµ‹è¯• 2ï¼šå°è¯•æ¢å¤æ‰§è¡Œ
for event in graph.stream(None, thread):
    print(event)

# æµ‹è¯• 3ï¼šä¿®æ”¹çŠ¶æ€åç»§ç»­
graph.update_state(thread, new_state)
for event in graph.stream(None, thread):
    print(event)
```

---

### 2. å¯¹æ¯”å­¦ä¹ æ³•

**ç­–ç•¥ï¼š** é€šè¿‡å¯¹æ¯”ç†è§£æ¦‚å¿µçš„è¾¹ç•Œå’Œé€‚ç”¨åœºæ™¯

| ç»´åº¦ | é™æ€æ–­ç‚¹ | åŠ¨æ€æ–­ç‚¹ |
|------|---------|---------|
| ä½•æ—¶è®¾ç½® | ç¼–è¯‘æ—¶ | è¿è¡Œæ—¶ |
| è§¦å‘æ¡ä»¶ | å›ºå®šèŠ‚ç‚¹ | ä¸šåŠ¡é€»è¾‘ |
| ä¿¡æ¯ä¼ é€’ | æ—  | æœ‰ |
| é€‚ç”¨åœºæ™¯ | å›ºå®šå®¡æ‰¹ç‚¹ | æ™ºèƒ½å®¡æ ¸ |

| ç»´åº¦ | å›æ”¾ | åˆ†å‰ |
|------|-----|-----|
| çŠ¶æ€ä¿®æ”¹ | æ—  | æœ‰ |
| å†å²å½±å“ | æ—  | åˆ›å»ºæ–°åˆ†æ”¯ |
| é€‚ç”¨åœºæ™¯ | é‡ç°é—®é¢˜ | æ¢ç´¢å‡è®¾ |

---

### 3. æ¸è¿›å¼å¤æ‚åº¦

**é˜¶æ®µ 1ï¼šå•ä¸€åŠŸèƒ½**
```python
# åªä½¿ç”¨ Breakpoints
graph = builder.compile(interrupt_before=["tools"], checkpointer=memory)
```

**é˜¶æ®µ 2ï¼šç»„åˆåŠŸèƒ½**
```python
# Breakpoints + çŠ¶æ€ç¼–è¾‘
for event in graph.stream(input, thread):
    print(event)

graph.update_state(thread, corrected_state)

for event in graph.stream(None, thread):
    print(event)
```

**é˜¶æ®µ 3ï¼šå®Œæ•´ç³»ç»Ÿ**
```python
# Breakpoints + çŠ¶æ€ç¼–è¾‘ + Streaming + Time Travel
async for event in graph.astream_events(input, thread, version="v2"):
    # å®æ—¶æ˜¾ç¤º Token
    if event["event"] == "on_chat_model_stream":
        print(event["data"]["chunk"].content, end="")

# é‡åˆ°é”™è¯¯ï¼Ÿå›åˆ°å†å²é‡æ–°æ‰§è¡Œ
history = list(graph.get_state_history(thread))
safe_point = history[-3]
for event in graph.stream(None, safe_point.config):
    print(event)
```

---

### 4. è°ƒè¯•æ€ç»´è®­ç»ƒ

**å­¦ä¹ å¦‚ä½•è°ƒè¯• Human-in-the-Loop ç³»ç»Ÿï¼š**

```python
# è°ƒè¯•æ¸…å•
def debug_hitl_system():
    # 1. æ£€æŸ¥ Checkpointer
    state = graph.get_state(thread)
    print(f"Current checkpoint: {state.config}")

    # 2. æ£€æŸ¥æ–­ç‚¹çŠ¶æ€
    print(f"Next node: {state.next}")
    print(f"Tasks: {state.tasks}")

    # 3. æ£€æŸ¥å†å²
    history = list(graph.get_state_history(thread))
    print(f"History length: {len(history)}")

    # 4. éªŒè¯æ¶ˆæ¯ ID
    for msg in state.values['messages']:
        print(f"Message ID: {msg.id}, Content: {msg.content[:50]}")

    # 5. æ£€æŸ¥ä¸­æ–­ä¿¡æ¯ï¼ˆåŠ¨æ€æ–­ç‚¹ï¼‰
    if state.tasks:
        for task in state.tasks:
            if task.interrupts:
                print(f"Interrupt: {task.interrupts[0].value}")
```

---

### 5. æ„å»ºçŸ¥è¯†åœ°å›¾

**æ¨èæ–¹å¼ï¼š** åˆ›å»ºè‡ªå·±çš„æ¦‚å¿µå…³ç³»å›¾

```mermaid
graph LR
    A[Checkpointer] --> B[Breakpoints]
    A --> C[Time Travel]
    B --> D[Dynamic Breakpoints]
    B --> E[Edit State]
    E --> F[Streaming]
    C --> G[Forking]

    H[Thread ID] --> A
    H --> C

    I[Message ID] --> E
    I --> G

    J[async/await] --> F
```

**å»ºè®®ï¼š** æ¯å­¦å®Œä¸€ä¸ªæ¦‚å¿µï¼Œæ›´æ–°ä½ çš„çŸ¥è¯†åœ°å›¾ï¼Œæ ‡æ³¨ï¼š
- âœ… å·²æŒæ¡
- ğŸ¤” éœ€è¦æ·±åŒ–
- â“ å­˜åœ¨ç–‘é—®

---

## ğŸ¯ æœ¬ç« äº®ç‚¹

### 1. å®Œæ•´çš„äººæœºååŒä½“ç³»

æœ¬ç« ä¸ä»…æ•™ä½ æŠ€æœ¯å®ç°ï¼Œæ›´ä¼ æˆä¸€å¥—**å¯æ§ AI çš„è®¾è®¡å“²å­¦**ï¼š

- **ä¸ç›²ç›®è‡ªä¸»**ï¼šçŸ¥é“ä½•æ—¶éœ€è¦äººç±»åˆ¤æ–­
- **å¯è¿½æº¯å¯å›æ»š**ï¼šæ‰€æœ‰å†³ç­–éƒ½æœ‰å†å²å¯æŸ¥
- **ä¼˜é›…çš„äº¤äº’**ï¼šæµå¼è¾“å‡ºæå‡ç”¨æˆ·ä½“éªŒ
- **çµæ´»çš„æ§åˆ¶**ï¼šé™æ€æ–­ç‚¹ã€åŠ¨æ€æ–­ç‚¹ã€æ¡ä»¶ä¸­æ–­è‡ªç”±ç»„åˆ

---

### 2. ç”Ÿäº§çº§æœ€ä½³å®è·µ

æ¯ä¸ªæ¦‚å¿µéƒ½é…æœ‰å®é™…åº”ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µï¼š

**Breakpoints æœ€ä½³å®è·µï¼š**
```python
# âœ… åœºæ™¯ 1ï¼šæ•æ„Ÿæ“ä½œå®¡æ‰¹
interrupt_before=["payment", "delete", "send_email"]

# âœ… åœºæ™¯ 2ï¼šè°ƒè¯•æ¨¡å¼
if DEBUG_MODE:
    interrupt_after=["every", "node"]

# âœ… åœºæ™¯ 3ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–
def get_user_approval(tool_call):
    print(f"AI æƒ³è¦æ‰§è¡Œ: {tool_call}")
    print("é€‰é¡¹: (1) æ‰¹å‡† (2) æ‹’ç» (3) ä¿®æ”¹å‚æ•°")
    return input("é€‰æ‹©: ")
```

---

### 3. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

**Streaming æ€§èƒ½ä¼˜åŒ–ï¼š**
```python
# æ‰¹é‡å¤„ç† Tokens
buffer = []
async for event in graph.astream_events(...):
    if event["event"] == "on_chat_model_stream":
        buffer.append(event["data"]["chunk"].content)

        if len(buffer) >= 5:  # æ¯ 5 ä¸ª token è¾“å‡ºä¸€æ¬¡
            print("".join(buffer), end="", flush=True)
            buffer.clear()
```

**Time Travel å­˜å‚¨ä¼˜åŒ–ï¼š**
```python
# åªä¿å­˜å…³é”® Checkpoint
def save_important_checkpoints(thread):
    for state in graph.get_state_history(thread):
        # åªä¿å­˜ç”¨æˆ·è¾“å…¥çš„çŠ¶æ€
        if any(isinstance(m, HumanMessage) for m in state.values['messages']):
            save_to_database(state)
```

---

### 4. é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ

**å®Œå–„çš„é”™è¯¯å¤„ç†ç¤ºä¾‹ï¼š**
```python
async def safe_stream(graph, input_data, config):
    """å¸¦é”™è¯¯å¤„ç†çš„ Streaming"""
    try:
        async for event in graph.astream_events(input_data, config, version="v2"):
            if event["event"] == "on_chat_model_stream":
                yield event["data"]["chunk"].content
    except KeyboardInterrupt:
        print("\nç”¨æˆ·ä¸­æ–­")
    except asyncio.TimeoutError:
        print("\nè¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•")
    except Exception as e:
        print(f"\né”™è¯¯: {e}")
        # å¯é€‰ï¼šå›æ»šåˆ°å®‰å…¨çŠ¶æ€
        history = list(graph.get_state_history(config))
        if history:
            safe_state = history[-1]
            for event in graph.stream(None, safe_state.config):
                print(event)
```

---

## ğŸ“Š çŸ¥è¯†ç‚¹é€ŸæŸ¥è¡¨

### Breakpoints

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `interrupt_before` | èŠ‚ç‚¹å‰ä¸­æ–­ | `interrupt_before=["tools"]` |
| `interrupt_after` | èŠ‚ç‚¹åä¸­æ–­ | `interrupt_after=["assistant"]` |
| `stream(None, thread)` | ä»æ–­ç‚¹ç»§ç»­ | `graph.stream(None, thread)` |
| `get_state(thread)` | æŸ¥çœ‹å½“å‰çŠ¶æ€ | `state = graph.get_state(thread)` |

### Dynamic Breakpoints

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `NodeInterrupt` | è§¦å‘åŠ¨æ€ä¸­æ–­ | `raise NodeInterrupt("åŸå› ")` |
| `state.tasks` | æŸ¥çœ‹ä¸­æ–­ä¿¡æ¯ | `state.tasks[0].interrupts` |

### Edit State

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `update_state` | ä¿®æ”¹çŠ¶æ€ | `graph.update_state(thread, data)` |
| `as_node` | æŒ‡å®šèŠ‚ç‚¹ | `as_node="human_feedback"` |
| Message ID | è¦†ç›–æ¶ˆæ¯ | `id=original_msg.id` |

### Streaming

| æ¨¡å¼ | ç²’åº¦ | ç”¨é€” |
|------|------|------|
| `updates` | èŠ‚ç‚¹çº§ | è¿½è¸ªå˜åŒ– |
| `values` | èŠ‚ç‚¹çº§ | è°ƒè¯• |
| `astream_events` | äº‹ä»¶çº§ | Token streaming |
| `messages` (API) | Token çº§ | èŠå¤©åº”ç”¨ |

### Time Travel

| API | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| `get_state_history` | è·å–å†å² | `list(graph.get_state_history(thread))` |
| å›æ”¾ | é‡æ–°æ‰§è¡Œ | `stream(None, historical_config)` |
| åˆ†å‰ | ä¿®æ”¹å†å² | `update_state(historical_config, new_data)` |

---

## é™„å½•: æœ¯è¯­è¡¨

### Human-in-the-Loop ç›¸å…³

- **Human-in-the-Loop (HITL)**: äººæœºååŒæ¨¡å¼ï¼ŒAI åœ¨å…³é”®èŠ‚ç‚¹æš‚åœç­‰å¾…äººç±»å†³ç­–
- **Approval Mode**: å®¡æ‰¹æ¨¡å¼ï¼Œåœ¨æ•æ„Ÿæ“ä½œå‰è·å¾—äººå·¥æ‰¹å‡†
- **Debugging Mode**: è°ƒè¯•æ¨¡å¼ï¼Œå›æ”¾å†å²çŠ¶æ€å®šä½é—®é¢˜
- **Editing Mode**: ç¼–è¾‘æ¨¡å¼ï¼Œä¿®æ”¹çŠ¶æ€æ³¨å…¥äººç±»åé¦ˆ

### Breakpoints ç›¸å…³

- **Breakpoint**: æ–­ç‚¹ï¼Œå›¾æ‰§è¡Œä¸­çš„æš‚åœç‚¹
- **Interrupt**: ä¸­æ–­ï¼Œå›¾æš‚åœæ‰§è¡Œçš„çŠ¶æ€
- **Static Breakpoint**: é™æ€æ–­ç‚¹ï¼Œç¼–è¯‘æ—¶å›ºå®šè®¾ç½®
- **Dynamic Breakpoint**: åŠ¨æ€æ–­ç‚¹ï¼Œè¿è¡Œæ—¶æ¡ä»¶è§¦å‘
- **NodeInterrupt**: åŠ¨æ€æ–­ç‚¹å¼‚å¸¸ç±»

### çŠ¶æ€ç®¡ç†ç›¸å…³

- **Checkpointer**: æ£€æŸ¥ç‚¹ç®¡ç†å™¨ï¼Œè‡ªåŠ¨ä¿å­˜å›¾çš„æ‰§è¡ŒçŠ¶æ€
- **StateSnapshot**: çŠ¶æ€å¿«ç…§ï¼ŒæŸä¸ªæ—¶åˆ»çš„å®Œæ•´çŠ¶æ€
- **Thread**: çº¿ç¨‹ï¼Œç”¨äºæ ‡è¯†å’Œéš”ç¦»ä¼šè¯
- **Checkpoint ID**: æ£€æŸ¥ç‚¹æ ‡è¯†ç¬¦ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªçŠ¶æ€å¿«ç…§

### Streaming ç›¸å…³

- **Streaming**: æµå¼è¾“å‡ºï¼Œé€æ­¥è¿”å›ç»“æœè€Œéç­‰å¾…å®Œæˆ
- **Token Streaming**: Token çº§æµå¼è¾“å‡ºï¼Œé€ä¸ª Token æ˜¾ç¤º
- **astream_events**: å¼‚æ­¥äº‹ä»¶æµ API
- **stream_mode**: æµå¼æ¨¡å¼é€‰æ‹©å™¨ï¼ˆupdates/values/messagesï¼‰
- **SSE**: Server-Sent Eventsï¼ŒæœåŠ¡å™¨æ¨é€äº‹ä»¶åè®®

### Time Travel ç›¸å…³

- **Time Travel**: æ—¶é—´æ—…è¡Œï¼Œæµè§ˆã€å›æ”¾ã€åˆ†å‰å†å²çŠ¶æ€
- **Browsing**: æµè§ˆå†å²ï¼ŒæŸ¥çœ‹æ‰€æœ‰å†å²çŠ¶æ€
- **Replaying**: å›æ”¾ï¼Œä»å†å²çŠ¶æ€é‡æ–°æ‰§è¡Œ
- **Forking**: åˆ†å‰ï¼Œä»å†å²çŠ¶æ€åˆ›å»ºæ–°çš„æ‰§è¡Œåˆ†æ”¯
- **Message ID**: æ¶ˆæ¯æ ‡è¯†ç¬¦ï¼Œç”¨äºæ¶ˆæ¯è¦†ç›–å’Œå»é‡

### å¼‚æ­¥ç¼–ç¨‹ç›¸å…³

- **async/await**: Python å¼‚æ­¥ç¼–ç¨‹è¯­æ³•
- **async for**: å¼‚æ­¥è¿­ä»£å™¨è¯­æ³•
- **AsyncGenerator**: å¼‚æ­¥ç”Ÿæˆå™¨
- **Event Loop**: äº‹ä»¶å¾ªç¯ï¼Œå¼‚æ­¥ç¨‹åºçš„è¿è¡ŒåŸºç¡€

---

## ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œè¯·ç¡®è®¤ä½ èƒ½å¤Ÿï¼š

**Breakpointsï¼š**
- [ ] è§£é‡Š `interrupt_before` å’Œ `interrupt_after` çš„åŒºåˆ«
- [ ] ä½¿ç”¨ `stream(None, thread)` ä»æ–­ç‚¹æ¢å¤æ‰§è¡Œ
- [ ] ç†è§£ä¸ºä»€ä¹ˆ Checkpointer æ˜¯å¿…éœ€çš„
- [ ] å®ç°ç®€å•çš„å·¥å…·è°ƒç”¨å®¡æ‰¹æµç¨‹

**Dynamic Breakpointsï¼š**
- [ ] ä½¿ç”¨ `NodeInterrupt` è§¦å‘æ¡ä»¶æ€§ä¸­æ–­
- [ ] ä¼ é€’ç»“æ„åŒ–çš„ä¸­æ–­ä¿¡æ¯
- [ ] ä» `state.tasks` è·å–ä¸­æ–­è¯¦æƒ…
- [ ] åŒºåˆ†é™æ€æ–­ç‚¹å’ŒåŠ¨æ€æ–­ç‚¹çš„ä½¿ç”¨åœºæ™¯

**Edit Stateï¼š**
- [ ] ä½¿ç”¨ `update_state` ä¿®æ”¹çŠ¶æ€
- [ ] ç†è§£ `as_node` å‚æ•°çš„ä½œç”¨
- [ ] æŒæ¡æ¶ˆæ¯è¿½åŠ å’Œè¦†ç›–çš„åŒºåˆ«
- [ ] è®¾è®¡ä¸“é—¨çš„äººå·¥åé¦ˆèŠ‚ç‚¹

**Streamingï¼š**
- [ ] ä½¿ç”¨ `stream_mode="values"` è¿›è¡Œè°ƒè¯•
- [ ] å®ç° Token çº§åˆ«çš„æµå¼è¾“å‡º
- [ ] ç†è§£ `async/await` åŸºæœ¬è¯­æ³•
- [ ] åŒºåˆ†æœ¬åœ° Streaming å’Œ API Streaming

**Time Travelï¼š**
- [ ] ä½¿ç”¨ `get_state_history` æµè§ˆå†å²
- [ ] ä»å†å²çŠ¶æ€å›æ”¾æ‰§è¡Œ
- [ ] ä¿®æ”¹å†å²çŠ¶æ€åˆ›å»ºåˆ†å‰
- [ ] ç†è§£ Message ID çš„è¦†ç›–æœºåˆ¶

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œä½ å°†å…·å¤‡æ„å»º**ç”Ÿäº§çº§ Human-in-the-Loop AI ç³»ç»Ÿ**çš„èƒ½åŠ›ã€‚å»ºè®®ç»§ç»­å­¦ä¹ ï¼š

- **Module-5**: é«˜çº§å›¾æ¨¡å¼ï¼ˆå¹¶è¡Œã€å­å›¾ã€æ¡ä»¶è·¯ç”±ï¼‰
- **Module-6**: ç”Ÿäº§éƒ¨ç½²ï¼ˆç›‘æ§ã€æ€§èƒ½ä¼˜åŒ–ã€é”™è¯¯å¤„ç†ï¼‰
- **Module-7**: å®æˆ˜é¡¹ç›®ï¼ˆç»¼åˆåº”ç”¨æ‰€æœ‰æŠ€æœ¯ï¼‰

**æ¨èå®è·µé¡¹ç›®ï¼š**
1. **æ™ºèƒ½å®¢æœç³»ç»Ÿ**ï¼šç»“åˆ Breakpointsã€çŠ¶æ€ç¼–è¾‘ã€Streaming
2. **å†…å®¹å®¡æ ¸å¹³å°**ï¼šä½¿ç”¨åŠ¨æ€æ–­ç‚¹æ ¹æ®é£é™©è¯„åˆ†ä¸­æ–­
3. **AI å†³ç­–è°ƒè¯•å·¥å…·**ï¼šåˆ©ç”¨ Time Travel å›æ”¾å’Œåˆ†å‰

**è¿›é˜¶é˜…è¯»ï¼š**
- [LangGraph Human-in-the-Loop å®˜æ–¹æŒ‡å—](https://langchain-ai.github.io/langgraph/how-tos/#human-in-the-loop)
- [LangGraph Streaming å®Œæ•´æ–‡æ¡£](https://langchain-ai.github.io/langgraph/concepts/low_level/#streaming)
- [Python Async/Await æ·±å…¥æ•™ç¨‹](https://realpython.com/async-io-python/)

---

**æœ¬ç« æ ¸å¿ƒä»·å€¼ï¼š** å°† AI ä»"é»‘ç›’è‡ªä¸»ç³»ç»Ÿ"è½¬å˜ä¸º"é€æ˜å¯æ§çš„åä½œä¼™ä¼´"ï¼Œåœ¨è‡ªåŠ¨åŒ–æ•ˆç‡å’Œäººç±»ç›‘ç£ä¹‹é—´æ‰¾åˆ°å®Œç¾å¹³è¡¡ã€‚æŒæ¡ Human-in-the-Loopï¼Œä½ çš„ AI ç³»ç»Ÿå°†ä¸ä»…æ™ºèƒ½ï¼Œæ›´åŠ å¯ä¿¡ã€å¯é ã€å¯æ§ï¼

ğŸ¯ **å‡†å¤‡å¥½äº†å—ï¼Ÿ** è®©æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€èŠ‚è¯¾ï¼š**4.1 Breakpointsï¼ˆæ–­ç‚¹æœºåˆ¶ï¼‰** â€” å­¦ä¹ å¦‚ä½•è®© AI åœ¨å…³é”®æ—¶åˆ»ä¼˜é›…åœ°æš‚åœï¼Œç­‰å¾…ä½ çš„å†³ç­–ï¼
