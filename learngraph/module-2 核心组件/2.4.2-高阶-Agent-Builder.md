# 2.4.2 Agent Builder - æ— ä»£ç æ™ºèƒ½ä½“æ„å»ºå™¨

> **éš¾åº¦çº§åˆ«**: é«˜çº§
> **å‰ç½®çŸ¥è¯†**: Agent åŸºç¡€æ¦‚å¿µã€LangGraph çŠ¶æ€ç®¡ç†ã€å·¥å…·è°ƒç”¨
> **é¢„è®¡é˜…è¯»æ—¶é—´**: 45 åˆ†é’Ÿ

---

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
3. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
4. [å†…ç½®å·¥å…·](#å†…ç½®å·¥å…·)
5. [MCP æ¡†æ¶](#mcp-æ¡†æ¶)
6. [Slack åº”ç”¨é›†æˆ](#slack-åº”ç”¨é›†æˆ)
7. [Deep Agents åº•å±‚æ¡†æ¶](#deep-agents-åº•å±‚æ¡†æ¶)
8. [å®Œæ•´æ¡ˆä¾‹ä»£ç ](#å®Œæ•´æ¡ˆä¾‹ä»£ç )
9. [æ‰©å±•é˜…è¯»](#æ‰©å±•é˜…è¯»)

---

## æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ Agent Builder?

**Agent Builder** æ˜¯ LangSmith æä¾›çš„ä¸€ä¸ª **æ— ä»£ç æ™ºèƒ½ä½“æ„å»ºå¹³å°**ï¼ˆç›®å‰å¤„äº Beta é˜¶æ®µï¼‰ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°æ¥åˆ›å»ºç”Ÿäº§çº§çš„ AI æ™ºèƒ½ä½“ï¼Œæ— éœ€ç¼–å†™ä»£ç ã€‚

> **æ ¸å¿ƒç†å¿µ**: å°†è‡ªç„¶è¯­è¨€æ¦‚å¿µè½¬æ¢ä¸ºå¯è¿è¡Œçš„ç”Ÿäº§çº§æ™ºèƒ½ä½“

ä¸ä¼ ç»Ÿçš„å¯è§†åŒ–å·¥ä½œæµæ„å»ºå™¨ä¸åŒï¼ŒAgent Builder é‡‡ç”¨ **å¯¹è¯å¼æ„å»ºæ–¹å¼**ï¼š

```
ç”¨æˆ·æè¿°ä»»åŠ¡ â†’ ç³»ç»Ÿæé—®æ¾„æ¸… â†’ è‡ªåŠ¨ç”Ÿæˆæç¤ºè¯ â†’ è¿æ¥å·¥å…· â†’ è®¾ç½®è§¦å‘å™¨
```

### æ¶æ„æ¦‚è§ˆ

Agent Builder åŸºäºå¼€æºé¡¹ç›® [deep-agents](https://github.com/langchain-ai/deepagents) æ„å»ºï¼Œæ•´åˆäº† LangChain å’Œ LangGraph çš„æœ€ä½³å®è·µã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent Builder æ¶æ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Prompt     â”‚    â”‚    Tools     â”‚    â”‚   Triggers   â”‚      â”‚
â”‚  â”‚  (æ™ºèƒ½ä½“å¤§è„‘) â”‚    â”‚ (å·¥å…·è¿æ¥)   â”‚    â”‚ (è‡ªåŠ¨è§¦å‘)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚   Sub-agents    â”‚                          â”‚
â”‚                    â”‚  (å­æ™ºèƒ½ä½“)      â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                             â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚     Memory      â”‚                          â”‚
â”‚                    â”‚  (è®°å¿†ç³»ç»Ÿ)      â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Deep Agents å¼•æ“                      â”‚   â”‚
â”‚  â”‚  (Planning + Computer Access + Sub-agent Delegation)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ä¼ ç»Ÿæ–¹å¼çš„å¯¹æ¯”

| ç‰¹æ€§ | ä¼ ç»Ÿä»£ç å¼€å‘ | å¯è§†åŒ–å·¥ä½œæµ | Agent Builder |
|------|-------------|-------------|---------------|
| æŠ€æœ¯é—¨æ§› | é«˜ | ä¸­ | ä½ |
| çµæ´»æ€§ | é«˜ | ä¸­ | ä¸­é«˜ |
| æ„å»ºæ–¹å¼ | ç¼–å†™ä»£ç  | æ‹–æ‹½èŠ‚ç‚¹ | è‡ªç„¶è¯­è¨€å¯¹è¯ |
| é€‚åˆäººç¾¤ | å¼€å‘è€… | æŠ€æœ¯äº§å“ç»ç† | æ‰€æœ‰äºº |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä¸­ | ä½ |

---

## æ ¸å¿ƒæ¦‚å¿µ

Agent Builder çš„æ¯ä¸ªæ™ºèƒ½ä½“ç”± **å››ä¸ªæ ¸å¿ƒç»„ä»¶** æ„æˆï¼š

### 1. Promptï¼ˆæç¤ºè¯ï¼‰

æç¤ºè¯æ˜¯æ™ºèƒ½ä½“çš„"å¤§è„‘"ï¼ŒåŒ…å«æ™ºèƒ½ä½“åº”è¯¥åšä»€ä¹ˆçš„é€»è¾‘æè¿°ã€‚

**ç‰¹ç‚¹**ï¼š
- æ‰€æœ‰å¤æ‚é€»è¾‘éƒ½æ¨å…¥æç¤ºè¯ï¼Œè€Œéå¤æ‚çš„å¯è§†åŒ–å·¥ä½œæµ
- é€šè¿‡å¯¹è¯å¼å¼•å¯¼è‡ªåŠ¨ç”Ÿæˆ
- æ”¯æŒåç»­ä¿®æ”¹å’Œä¼˜åŒ–

```python
# ç¤ºä¾‹ï¼šæ™ºèƒ½ä½“æç¤ºè¯ç»“æ„
system_prompt = """
ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ä¼šè®®åŠ©æ‰‹ã€‚

èŒè´£ï¼š
1. æ£€æŸ¥ç”¨æˆ·çš„æ—¥å†
2. æå–ä¼šè®®å‚ä¸è€…ä¿¡æ¯
3. æŸ¥æ‰¾ç›¸å…³ä¸Šä¸‹æ–‡
4. åœ¨ Slack ä¸­å‘é€ä¼šè®®æ‘˜è¦

æ³¨æ„äº‹é¡¹ï¼š
- ç¡®ä¿ä¿¡æ¯å‡†ç¡®
- ä¿æŒæ‘˜è¦ç®€æ´
- æ ‡æ³¨é‡è¦è®®é¢˜
"""
```

### 2. Toolsï¼ˆå·¥å…·ï¼‰

å·¥å…·ä½¿ç”¨ **MCPï¼ˆModel Context Protocolï¼‰** åè®®è¿æ¥å¤–éƒ¨æœåŠ¡ã€‚

**ä¸¤ç§å·¥å…·æ¥æº**ï¼š
- **å†…ç½®å·¥å…·**ï¼šGmailã€Slackã€Google Calendarã€Linear ç­‰
- **è‡ªå®šä¹‰ MCP æœåŠ¡å™¨**ï¼šç”¨æˆ·è‡ªå·±éƒ¨ç½²çš„å·¥å…·æœåŠ¡

### 3. Triggersï¼ˆè§¦å‘å™¨ï¼‰

è§¦å‘å™¨ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿè‡ªåŠ¨å“åº”åå°äº‹ä»¶ï¼š

| è§¦å‘å™¨ç±»å‹ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|-----------|------|---------|
| **Slack** | ç‰¹å®šé¢‘é“çš„æ¶ˆæ¯è§¦å‘ | å®¢æœæœºå™¨äººã€å›¢é˜ŸåŠ©æ‰‹ |
| **Gmail** | é‚®ä»¶åˆ°è¾¾è§¦å‘ | é‚®ä»¶åˆ†ç±»ã€è‡ªåŠ¨å›å¤ |
| **Cron** | å®šæ—¶è§¦å‘ | æ—¥æŠ¥ç”Ÿæˆã€å®šæœŸæ£€æŸ¥ |

### 4. Sub-agentsï¼ˆå­æ™ºèƒ½ä½“ï¼‰

å­æ™ºèƒ½ä½“æ˜¯å¤„ç†ç‰¹å®šä»»åŠ¡çš„ä¸“é—¨åŒ–å°å‹æ™ºèƒ½ä½“ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ä¸»æ™ºèƒ½ä½“ (Orchestrator)       â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ•°æ®æ£€ç´¢ â”‚  â”‚ å†…å®¹ç”Ÿæˆ â”‚  â”‚ é€šçŸ¥å‘é€ â”‚ â”‚
â”‚  â”‚ å­æ™ºèƒ½ä½“ â”‚  â”‚ å­æ™ºèƒ½ä½“ â”‚  â”‚ å­æ™ºèƒ½ä½“ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚            â”‚            â”‚       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                    â–¼                    â”‚
â”‚              ç»“æœæ±‡æ€»å’Œåè°ƒ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å­æ™ºèƒ½ä½“çš„ä¼˜åŠ¿**ï¼š
- ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ï¼Œæé«˜æ•ˆç‡
- ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œé¿å…æ··ä¹±
- å¯å¹¶è¡Œæ‰§è¡Œï¼Œç¼©çŸ­æ€»ä½“æ—¶é—´
- ä¾¿äºç»´æŠ¤å’Œè°ƒè¯•

### 5. Memoryï¼ˆè®°å¿†ç³»ç»Ÿï¼‰

Agent Builder çš„æ™ºèƒ½ä½“å…·æœ‰å†…ç½®è®°å¿†åŠŸèƒ½ï¼š

**è®°å¿†ç‰¹æ€§**ï¼š
- **è·¨ä¼šè¯ä¿æŒ**ï¼šç›¸å…³ä¿¡æ¯åœ¨ä¼šè¯ä¹‹é—´æŒç»­å­˜å‚¨
- **è‡ªæˆ‘æ›´æ–°**ï¼šæ™ºèƒ½ä½“å¯ä»¥ä¿®æ”¹è‡ªå·±çš„å·¥å…·å’ŒæŒ‡ä»¤
- **çº é”™å­¦ä¹ **ï¼šå½“ç”¨æˆ·çº æ­£æ™ºèƒ½ä½“æ—¶ï¼Œä¼šè‡ªåŠ¨è®°ä½ä»¥é¿å…é‡å¤é”™è¯¯

**ä¸å¯ä¿®æ”¹é¡¹**ï¼š
- æ™ºèƒ½ä½“åç§°
- æ™ºèƒ½ä½“æè¿°
- å·²é™„åŠ çš„è§¦å‘å™¨

### 6. Human-in-the-Loopï¼ˆäººæœºåä½œï¼‰

æ™ºèƒ½ä½“åœ¨æ‰§è¡Œå…³é”®æ“ä½œå‰ä¼šæš‚åœï¼Œç­‰å¾…äººå·¥å®¡æ ¸ï¼š

```
æ™ºèƒ½ä½“æè®®æ“ä½œ â†’ äººå·¥å®¡æ ¸ â†’ [æ‰¹å‡†/ä¿®æ”¹/æ‹’ç»] â†’ ç»§ç»­æ‰§è¡Œ
```

**ä¸‰ç§å“åº”é€‰é¡¹**ï¼š
1. **æ‰¹å‡† (Approve)**ï¼šåŒæ„æè®®çš„æ“ä½œ
2. **ä¿®æ”¹ (Edit)**ï¼šè°ƒæ•´å‚æ•°åç»§ç»­
3. **åé¦ˆ (Feedback)**ï¼šæä¾›æ”¹è¿›å»ºè®®

---

## ç¯å¢ƒé…ç½®

### å·¥ä½œåŒºå¯†é’¥è®¾ç½®

Agent Builder éœ€è¦åœ¨ LangSmith å·¥ä½œåŒºä¸­é…ç½®å¯†é’¥æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

#### é…ç½®æ­¥éª¤

1. ç™»å½• LangSmithï¼Œç‚¹å‡» **Settingsï¼ˆè®¾ç½®ï¼‰** å›¾æ ‡
2. é€‰æ‹© **Secretsï¼ˆå¯†é’¥ï¼‰** æ ‡ç­¾é¡µ
3. ç‚¹å‡» **Add secretï¼ˆæ·»åŠ å¯†é’¥ï¼‰**
4. è¾“å…¥å¯†é’¥åç§°å’Œå¯¹åº”çš„å€¼
5. ç‚¹å‡» **Save secretï¼ˆä¿å­˜å¯†é’¥ï¼‰**

#### å¿…éœ€çš„å¯†é’¥

| å¯†é’¥åç§° | è¯´æ˜ | å¿…éœ€æ€§ |
|---------|------|--------|
| `ANTHROPIC_API_KEY` | Anthropic API å¯†é’¥ï¼Œç”¨äºæ¨¡å‹æ¨ç† | **å¿…éœ€** |

> **é‡è¦**: Agent Builder é»˜è®¤ä½¿ç”¨ Anthropic çš„ Claude æ¨¡å‹ï¼Œå› æ­¤ `ANTHROPIC_API_KEY` æ˜¯å¿…éœ€çš„ã€‚

#### å¯é€‰çš„å·¥å…·å¯†é’¥

| å¯†é’¥åç§° | åŠŸèƒ½ |
|---------|------|
| `EXA_API_KEY` | å¯ç”¨ Exa æœç´¢ï¼ˆç½‘ç»œæœç´¢ã€LinkedIn æ¡£æ¡ˆæœç´¢ï¼‰ |
| `TAVILY_API_KEY` | å¯ç”¨ Tavily ç½‘ç»œæœç´¢ |
| `TWITTER_API_KEY` | Twitter/X åªè¯»æ“ä½œ |
| `TWITTER_API_KEY_SECRET` | Twitter/X API å¯†é’¥å¯¹ |

> **æ³¨æ„**: æ·»åŠ å·¥ä½œåŒºå¯†é’¥æ—¶ï¼Œç¡®ä¿å¯†é’¥åç§°ä¸æ¨¡å‹æä¾›å•†æœŸæœ›çš„ç¯å¢ƒå˜é‡åç§°å®Œå…¨åŒ¹é…ã€‚

---

## å†…ç½®å·¥å…·

Agent Builder æä¾› **8 ç±»å†…ç½®å·¥å…·**ï¼š

### é€šè®¯ä¸æ¶ˆæ¯

#### Gmail

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| è¯»å–é‚®ä»¶ | æ”¯æŒæœç´¢è¿‡æ»¤ã€å¯é€‰åŒ…å«æ­£æ–‡ |
| å‘é€é‚®ä»¶ | æ’°å†™å¹¶å‘é€æ–°é‚®ä»¶ |
| åˆ›å»ºè‰ç¨¿ | ä¿å­˜é‚®ä»¶è‰ç¨¿ |
| ç®¡ç†æ ‡ç­¾ | æ·»åŠ /åˆ é™¤é‚®ä»¶æ ‡ç­¾ |

#### Slack

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| å‘é€ç§ä¿¡ | å‘ç”¨æˆ·å‘é€ç›´æ¥æ¶ˆæ¯ |
| é¢‘é“å‘å¸ƒ | åœ¨é¢‘é“ä¸­å‘å¸ƒæ¶ˆæ¯ |
| çº¿ç¨‹å›å¤ | å›å¤ç‰¹å®šæ¶ˆæ¯çº¿ç¨‹ |
| å†å²è®¿é—® | è¯»å–é¢‘é“å’Œçº¿ç¨‹å†å² |

### æ—¥å†ä¸é¡¹ç›®ç®¡ç†

#### Google Calendar

- åˆ—å‡ºæ—¥å†äº‹ä»¶
- è·å–äº‹ä»¶è¯¦æƒ…
- åˆ›å»ºæ–°çš„æ—¥å†æ¡ç›®

#### Linear

- ç®¡ç†é—®é¢˜ï¼ˆåˆ›å»ºã€è¿‡æ»¤ã€åˆ é™¤ï¼‰
- å›¢é˜Ÿç®¡ç†åŠŸèƒ½

### æœç´¢ä¸å‘ç°

| å·¥å…· | åŠŸèƒ½ |
|------|------|
| **Exa** | ç½‘ç»œæœç´¢ã€LinkedIn æ¡£æ¡ˆæœç´¢ |
| **Tavily** | é«˜è´¨é‡ç½‘ç»œæœç´¢ |

### ç¤¾äº¤åª’ä½“

#### LinkedIn
- å‘å¸ƒå¸–å­
- æ”¯æŒé™„åŠ å›¾ç‰‡æˆ–é“¾æ¥

#### Twitter/X
- è¯»å–å•æ¡æ¨æ–‡
- è·å–åˆ—è¡¨çš„æœ€æ–°å¸–å­
- **æ³¨æ„**ï¼šä»…æ”¯æŒåªè¯»æ“ä½œï¼Œä¸æ”¯æŒå‘å¸ƒ

### å®ç”¨å·¥å…·

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æå–ç½‘é¡µæ–‡æœ¬ | ä» URL è·å–é¡µé¢å†…å®¹ |
| è·å–å›¾ç‰‡ URL | æå–é¡µé¢ä¸­çš„å›¾ç‰‡é“¾æ¥ |
| æå–å…ƒæ•°æ® | è·å–é¡µé¢å…ƒä¿¡æ¯ |
| ç”¨æˆ·é€šçŸ¥ | å‘é€é€šçŸ¥ç»™ç”¨æˆ· |

### è®¤è¯æ–¹å¼

| æ–¹å¼ | é€‚ç”¨å·¥å…· |
|------|---------|
| **OAuth** | Googleã€Slackã€Linearã€LinkedIn |
| **å·¥ä½œåŒºå¯†é’¥** | Exaã€Tavilyã€Twitter/X |

---

## MCP æ¡†æ¶

### ä»€ä¹ˆæ˜¯ MCP?

**MCPï¼ˆModel Context Protocolï¼‰** æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–åè®®ï¼Œç”¨äºåˆ›å»ºã€éƒ¨ç½²å’Œç®¡ç†æ™ºèƒ½ä½“å·¥å…·ã€‚LangSmith Tool Server æ˜¯åŸºäº MCP çš„å·¥å…·æœåŠ¡å™¨æ¡†æ¶ã€‚

### å®‰è£…

```bash
# å®‰è£…å·¥å…·æœåŠ¡å™¨
pip install langsmith-tool-server

# å®‰è£… CLI å·¥å…·
pip install langchain-cli-v2
```

### åˆ›å»ºå·¥å…·åŒ…

```bash
# åˆ›å»ºæ–°çš„å·¥å…·åŒ…é¡¹ç›®
langchain tools new my-toolkit
cd my-toolkit
```

è¿™ä¼šåˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
my-toolkit/
â”œâ”€â”€ pyproject.toml      # é¡¹ç›®é…ç½®
â”œâ”€â”€ toolkit.toml        # å·¥å…·åŒ…é…ç½®
â””â”€â”€ my_toolkit/
    â”œâ”€â”€ __init__.py     # å·¥å…·å®šä¹‰
    â””â”€â”€ auth.py         # è®¤è¯å¤„ç†ï¼ˆå¯é€‰ï¼‰
```

### å®šä¹‰å·¥å…·

ä½¿ç”¨ `@tool` è£…é¥°å™¨å®šä¹‰å·¥å…·ï¼š

```python
# my_toolkit/__init__.py
from langsmith_tool_server import tool

@tool
def hello(name: str) -> str:
    """
    å‘æŸäººé—®å¥½ã€‚

    Args:
        name: è¦é—®å€™çš„äººçš„åå­—
    """
    return f"Hello, {name}!"

@tool
def add(x: int, y: int) -> int:
    """
    è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œã€‚

    Args:
        x: ç¬¬ä¸€ä¸ªæ•°
        y: ç¬¬äºŒä¸ªæ•°
    """
    return x + y

@tool
def search_database(query: str, limit: int = 10) -> str:
    """
    æœç´¢æ•°æ®åº“ã€‚

    Args:
        query: æœç´¢æŸ¥è¯¢
        limit: è¿”å›ç»“æœæ•°é‡é™åˆ¶
    """
    # å®é™…å®ç°ä¸­è¿æ¥æ•°æ®åº“
    return f"æ‰¾åˆ°å…³äº '{query}' çš„ {limit} æ¡ç»“æœ"

# å¯¼å‡ºå·¥å…·åˆ—è¡¨
TOOLS = [hello, add, search_database]
```

### è¿è¡ŒæœåŠ¡å™¨

```bash
# å¯åŠ¨ MCP æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 8000ï¼‰
langchain tools serve
```

æœåŠ¡å™¨è¿è¡Œåï¼Œå¯é€šè¿‡ `http://localhost:8000/mcp` è®¿é—® JSON-RPC ç«¯ç‚¹ã€‚

### å®¢æˆ·ç«¯è°ƒç”¨

```python
import asyncio
import aiohttp

async def mcp_request(url: str, method: str, params: dict = None):
    """å‘é€ MCP è¯·æ±‚"""
    async with aiohttp.ClientSession() as session:
        payload = {
            "jsonrpc": "2.0",
            "method": method,
            "params": params or {},
            "id": 1
        }
        async with session.post(f"{url}/mcp", json=payload) as response:
            return await response.json()

async def main():
    url = "http://localhost:8000"

    # åˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…·
    tools = await mcp_request(url, "tools/list")
    print(f"å¯ç”¨å·¥å…·: {tools}")

    # è°ƒç”¨ add å·¥å…·
    result = await mcp_request(
        url,
        "tools/call",
        {"name": "add", "arguments": {"x": 5, "y": 3}}
    )
    print(f"è®¡ç®—ç»“æœ: {result}")

    # è°ƒç”¨ hello å·¥å…·
    greeting = await mcp_request(
        url,
        "tools/call",
        {"name": "hello", "arguments": {"name": "LangGraph"}}
    )
    print(f"é—®å€™ç»“æœ: {greeting}")

if __name__ == "__main__":
    asyncio.run(main())
```

### OAuth è®¤è¯å·¥å…·

éœ€è¦ OAuth è®¤è¯çš„å·¥å…·ç¤ºä¾‹ï¼š

```python
from langsmith_tool_server import tool, Context
from google.oauth2.credentials import Credentials
from googleapiclient.discovery import build

@tool(
    auth_provider="google",
    scopes=["https://www.googleapis.com/auth/gmail.readonly"],
    integration="gmail"
)
async def read_emails(context: Context, max_results: int = 10) -> str:
    """
    è¯»å– Gmail ä¸­çš„æœ€è¿‘é‚®ä»¶ã€‚

    Args:
        context: è®¤è¯ä¸Šä¸‹æ–‡ï¼ˆè‡ªåŠ¨æ³¨å…¥ï¼‰
        max_results: è¿”å›çš„æœ€å¤§é‚®ä»¶æ•°é‡
    """
    # ä½¿ç”¨ OAuth token åˆ›å»ºå‡­è¯
    credentials = Credentials(token=context.token)
    service = build('gmail', 'v1', credentials=credentials)

    # è·å–é‚®ä»¶åˆ—è¡¨
    results = service.users().messages().list(
        userId='me',
        maxResults=max_results
    ).execute()

    messages = results.get('messages', [])
    return f"è·å–äº† {len(messages)} å°é‚®ä»¶"

@tool(
    auth_provider="slack",
    integration="slack"
)
async def send_slack_message(
    context: Context,
    channel: str,
    message: str
) -> str:
    """
    å‘é€ Slack æ¶ˆæ¯ã€‚

    Args:
        context: è®¤è¯ä¸Šä¸‹æ–‡
        channel: é¢‘é“ ID æˆ–åç§°
        message: æ¶ˆæ¯å†…å®¹
    """
    # ä½¿ç”¨ context.token è°ƒç”¨ Slack API
    # ...
    return f"æ¶ˆæ¯å·²å‘é€åˆ° {channel}"
```

### è‡ªå®šä¹‰è®¤è¯

```python
# my_toolkit/auth.py
from langsmith_tool_server import Auth

auth = Auth()

@auth.authenticate
async def authenticate(authorization: str = None) -> dict:
    """
    éªŒè¯è¯·æ±‚å¹¶è¿”å›ç”¨æˆ·èº«ä»½ã€‚

    Args:
        authorization: Authorization è¯·æ±‚å¤´
    """
    if not authorization or not authorization.startswith("Bearer "):
        raise auth.exceptions.HTTPException(
            status_code=401,
            detail="æœªæˆæƒï¼šéœ€è¦ Bearer token"
        )

    token = authorization.replace("Bearer ", "")

    # ä½¿ç”¨ä½ çš„èº«ä»½æä¾›å•†éªŒè¯ token
    user = await verify_token_with_idp(token)

    return {
        "identity": user.id,
        "permissions": user.permissions
    }

async def verify_token_with_idp(token: str):
    """éªŒè¯ tokenï¼ˆç¤ºä¾‹å®ç°ï¼‰"""
    # å®é™…å®ç°ä¸­è°ƒç”¨ IdP API
    class User:
        id = "user_123"
        permissions = ["read", "write"]
    return User()
```

### MCP ç½‘å…³é…ç½®

èšåˆå¤šä¸ª MCP æœåŠ¡å™¨çš„å·¥å…·ï¼š

```toml
# toolkit.toml
[toolkit]
name = "my-toolkit"
tools = "./my_toolkit/__init__.py:TOOLS"

# HTTP ä¼ è¾“çš„è¿œç¨‹æœåŠ¡å™¨
[[mcp_servers]]
name = "weather"
transport = "streamable_http"
url = "http://localhost:8001/mcp/"

# stdio ä¼ è¾“çš„æœ¬åœ°æœåŠ¡å™¨
[[mcp_servers]]
name = "math"
transport = "stdio"
command = "python"
args = ["-m", "mcp_server_math"]

# å¦ä¸€ä¸ªè¿œç¨‹æœåŠ¡å™¨
[[mcp_servers]]
name = "database"
transport = "streamable_http"
url = "https://db-tools.example.com/mcp/"
```

é…ç½®åï¼Œå·¥å…·ä¼šä»¥æœåŠ¡å™¨åç§°ä¸ºå‰ç¼€ï¼ˆå¦‚ `weather_get_forecast`ã€`math_calculate`ï¼‰ä»¥é¿å…å‘½åå†²çªã€‚

---

## Slack åº”ç”¨é›†æˆ

### å®‰è£…æ­¥éª¤

1. åœ¨ LangSmith ä¸­è®¿é—® Agent Builder
2. åˆ›å»ºæ–°æ™ºèƒ½ä½“æˆ–ç¼–è¾‘ç°æœ‰æ™ºèƒ½ä½“
3. æ·»åŠ  Slack ä½œä¸ºè§¦å‘å™¨æˆ–å¯ç”¨ Slack å·¥å…·
4. æŒ‰æç¤ºå®Œæˆæˆæƒ
5. å®Œæˆ OAuth æµç¨‹ï¼Œæˆäºˆ Slack å·¥ä½œåŒºæƒé™

åº”ç”¨ä¼šåœ¨æˆæƒå®Œæˆåè‡ªåŠ¨éƒ¨ç½²ã€‚

### æ ¸å¿ƒåŠŸèƒ½

é›†æˆåï¼Œæ™ºèƒ½ä½“è·å¾—ä»¥ä¸‹èƒ½åŠ›ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| å‘é€ç§ä¿¡ | å‘ Slack ç”¨æˆ·å‘é€ç›´æ¥æ¶ˆæ¯ |
| é¢‘é“å‘å¸ƒ | åœ¨é¢‘é“ä¸­å‘å¸ƒæ¶ˆæ¯ |
| çº¿ç¨‹é˜…è¯» | è¯»å–çº¿ç¨‹æ¶ˆæ¯å†å² |
| çº¿ç¨‹å›å¤ | å›å¤ç‰¹å®šæ¶ˆæ¯çº¿ç¨‹ |
| å†å²è®¿é—® | è®¿é—®å¯¹è¯å†å²è®°å½• |

### æƒé™è¦æ±‚

Slack é›†æˆéœ€è¦ä»¥ä¸‹æƒé™ï¼š

| æƒé™ç±»å‹ | è¯´æ˜ |
|---------|------|
| **æ¶ˆæ¯** | å‘é€ç§ä¿¡å’Œé¢‘é“æ¶ˆæ¯ |
| **é˜…è¯»** | è¯»å–é¢‘é“å†å²å’Œçº¿ç¨‹æ¶ˆæ¯ |
| **é¢‘é“è®¿é—®** | è·å–åŸºæœ¬é¢‘é“ä¿¡æ¯ |
| **ç”¨æˆ·æŸ¥æ‰¾** | æŸ¥æ‰¾ç”¨æˆ·ä¿¡æ¯ä»¥å‘é€æ¶ˆæ¯ |

### æ•°æ®ä¸éšç§

**å…³é”®ä¿éšœ**ï¼š
- Slack æ•°æ® **ä¸ä¼š** ç”¨äºè®­ç»ƒ LLM
- å·¥ä½œåŒºæ•°æ®ä¿æŒéš”ç¦»ï¼Œä»…ç”¨äºæ“ä½œç›®çš„
- æ•°æ®ä¿ç•™éµå¾ª LangSmith ç»„ç»‡ç­–ç•¥
- æ•°æ®å­˜å‚¨ä½ç½®ä¸ LangSmith é…ç½®ä¸€è‡´

### è´¹ç”¨è¯´æ˜

- Slack åº”ç”¨æœ¬èº« **å…è´¹**
- è´¹ç”¨æ¥è‡ªæ™ºèƒ½ä½“æ‰§è¡Œå’Œè·Ÿè¸ªï¼Œé€šè¿‡ LangSmith è®¢é˜…è®¡è´¹

---

## Deep Agents åº•å±‚æ¡†æ¶

Agent Builder åŸºäºå¼€æºçš„ **Deep Agents** æ¡†æ¶æ„å»ºã€‚

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

Deep Agents å— Claude Code ç­‰é¢†å…ˆ AI æ™ºèƒ½ä½“å¯å‘ï¼Œå®ç°ä¸‰ä¸ªåŸºç¡€åŸåˆ™ï¼š

1. **è§„åˆ’ (Planning)**: æ‰§è¡Œå‰çš„ç»“æ„åŒ–ä»»åŠ¡åˆ†è§£
2. **è®¡ç®—æœºè®¿é—® (Computer Access)**: Shell å’Œæ–‡ä»¶ç³»ç»Ÿé›†æˆ
3. **å­æ™ºèƒ½ä½“å§”æ‰˜ (Sub-agent Delegation)**: éš”ç¦»çš„æ‰§è¡Œä¸Šä¸‹æ–‡

### å†…ç½®å·¥å…·

Deep Agents ä¸ºæ‰€æœ‰æ™ºèƒ½ä½“æä¾› 9 ä¸ªæ ‡å‡†å·¥å…·ï¼š

| å·¥å…· | åŠŸèƒ½ | æ¥æºä¸­é—´ä»¶ |
|------|------|-----------|
| `write_todos` | å†™å…¥å¾…åŠäº‹é¡¹ | TodoListMiddleware |
| `read_todos` | è¯»å–å¾…åŠäº‹é¡¹ | TodoListMiddleware |
| `ls` | åˆ—å‡ºç›®å½• | FilesystemMiddleware |
| `read_file` | è¯»å–æ–‡ä»¶ | FilesystemMiddleware |
| `write_file` | å†™å…¥æ–‡ä»¶ | FilesystemMiddleware |
| `edit_file` | ç¼–è¾‘æ–‡ä»¶ | FilesystemMiddleware |
| `glob` | æ–‡ä»¶åŒ¹é… | FilesystemMiddleware |
| `grep` | å†…å®¹æœç´¢ | FilesystemMiddleware |
| `task` | åˆ›å»ºå­æ™ºèƒ½ä½“ | SubAgentMiddleware |

### ä¸­é—´ä»¶ç³»ç»Ÿ

Deep Agents ä½¿ç”¨å¯ç»„åˆçš„ä¸­é—´ä»¶æ‰©å±•åŠŸèƒ½ï¼š

| ä¸­é—´ä»¶ | åŠŸèƒ½ |
|--------|------|
| **TodoListMiddleware** | ä»»åŠ¡è§„åˆ’å’Œè¿›åº¦è·Ÿè¸ª |
| **FilesystemMiddleware** | æ–‡ä»¶æ“ä½œå’Œä¸Šä¸‹æ–‡ç®¡ç† |
| **SubAgentMiddleware** | å­æ™ºèƒ½ä½“å§”æ‰˜ |
| **SummarizationMiddleware** | 170k token æ—¶è‡ªåŠ¨ä¸Šä¸‹æ–‡å‹ç¼© |
| **AnthropicPromptCachingMiddleware** | Anthropic æ¨¡å‹æˆæœ¬ä¼˜åŒ– |
| **HumanInTheLoopMiddleware** | æ•æ„Ÿæ“ä½œçš„å®¡æ‰¹å·¥ä½œæµ |

### åç«¯å­˜å‚¨é€‰é¡¹

| åç«¯ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| **StateBackend** | ä¸´æ—¶ã€ä¼šè¯èŒƒå›´å­˜å‚¨ï¼ˆé»˜è®¤ï¼‰ | å¼€å‘ã€æµ‹è¯• |
| **FilesystemBackend** | ç›´æ¥ç£ç›˜è®¿é—® | éœ€è¦æŒä¹…åŒ–çš„æœ¬åœ°åº”ç”¨ |
| **StoreBackend** | é€šè¿‡ LangGraph Store æŒä¹…å­˜å‚¨ | ç”Ÿäº§ç¯å¢ƒã€è·¨ä¼šè¯ |
| **CompositeBackend** | è·¯ç”±ä¸åŒè·¯å¾„åˆ°ä¸åŒåç«¯ | å¤æ‚åœºæ™¯ |

---

## å®Œæ•´æ¡ˆä¾‹ä»£ç 

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Deep Agents æ¡†æ¶æ„å»ºæ™ºèƒ½ä½“ï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºå’Œè°ƒç”¨ MCP å·¥å…·æœåŠ¡å™¨ã€‚

```python
"""
Agent Builder å®Œæ•´ç¤ºä¾‹
æ¼”ç¤ºï¼šDeep Agents åˆ›å»ºã€MCP å·¥å…·æœåŠ¡å™¨ã€å­æ™ºèƒ½ä½“å§”æ‰˜

åœºæ™¯ï¼šæ™ºèƒ½ç ”ç©¶åŠ©æ‰‹
1. æ¥æ”¶ç”¨æˆ·ç ”ç©¶è¯·æ±‚
2. ä½¿ç”¨æœç´¢å·¥å…·è·å–ä¿¡æ¯
3. å§”æ‰˜ç»™ä¸“é—¨çš„å­æ™ºèƒ½ä½“å¤„ç†
4. æ”¯æŒä»»åŠ¡ç®¡ç†å’Œæ–‡ä»¶æ“ä½œ
"""

import os
import asyncio
from typing import List, Optional
from typing_extensions import TypedDict
from pydantic import BaseModel, Field

# ========== 1. æ•°æ®æ¨¡å‹å®šä¹‰ ==========

class SearchResult(BaseModel):
    """æœç´¢ç»“æœæ¨¡å‹"""
    title: str = Field(description="ç»“æœæ ‡é¢˜")
    snippet: str = Field(description="å†…å®¹æ‘˜è¦")
    url: str = Field(description="æ¥æºé“¾æ¥")

class ResearchTask(BaseModel):
    """ç ”ç©¶ä»»åŠ¡æ¨¡å‹"""
    topic: str = Field(description="ç ”ç©¶ä¸»é¢˜")
    questions: List[str] = Field(description="éœ€è¦å›ç­”çš„é—®é¢˜")
    deadline: Optional[str] = Field(default=None, description="æˆªæ­¢æ—¥æœŸ")

class TodoItem(BaseModel):
    """å¾…åŠäº‹é¡¹æ¨¡å‹"""
    task: str = Field(description="ä»»åŠ¡æè¿°")
    status: str = Field(default="pending", description="çŠ¶æ€: pending/in_progress/completed")
    priority: str = Field(default="medium", description="ä¼˜å…ˆçº§: low/medium/high")

# ========== 2. æ¨¡æ‹Ÿ MCP å·¥å…·å®šä¹‰ ==========

class MCPTool:
    """MCP å·¥å…·åŸºç±»"""
    def __init__(self, name: str, description: str):
        self.name = name
        self.description = description

    def invoke(self, **kwargs):
        raise NotImplementedError

class SearchWebTool(MCPTool):
    """ç½‘ç»œæœç´¢å·¥å…·"""
    def __init__(self):
        super().__init__(
            name="search_web",
            description="æœç´¢ç½‘ç»œä¿¡æ¯"
        )

    def invoke(self, query: str, max_results: int = 5) -> List[dict]:
        """æ‰§è¡Œæœç´¢"""
        # æ¨¡æ‹Ÿæœç´¢ç»“æœ
        results = [
            {
                "title": f"å…³äº {query} çš„æƒå¨æŒ‡å—",
                "snippet": f"è¿™æ˜¯å…³äº {query} çš„è¯¦ç»†ä»‹ç»ï¼Œæ¶µç›–æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µ...",
                "url": f"https://example.com/guide/{query.replace(' ', '-')}"
            },
            {
                "title": f"{query} å…¥é—¨æ•™ç¨‹",
                "snippet": f"ä»é›¶å¼€å§‹å­¦ä¹  {query}ï¼ŒåŒ…å«å®æˆ˜æ¡ˆä¾‹å’Œä»£ç ç¤ºä¾‹...",
                "url": f"https://tutorial.com/{query.replace(' ', '-')}"
            },
            {
                "title": f"{query} æœ€æ–°è¿›å±•",
                "snippet": f"2024-2025 å¹´ {query} é¢†åŸŸçš„æœ€æ–°å‘å±•å’Œè¶‹åŠ¿åˆ†æ...",
                "url": f"https://news.com/{query.replace(' ', '-')}"
            }
        ]
        print(f"ğŸ” æœç´¢å®Œæˆ: {query} (æ‰¾åˆ° {len(results)} æ¡ç»“æœ)")
        return results[:max_results]

class ReadFileTool(MCPTool):
    """æ–‡ä»¶è¯»å–å·¥å…·"""
    def __init__(self):
        super().__init__(
            name="read_file",
            description="è¯»å–æ–‡ä»¶å†…å®¹"
        )

    def invoke(self, path: str) -> str:
        """è¯»å–æ–‡ä»¶"""
        print(f"ğŸ“„ è¯»å–æ–‡ä»¶: {path}")
        # æ¨¡æ‹Ÿæ–‡ä»¶å†…å®¹
        return f"æ–‡ä»¶ {path} çš„å†…å®¹ï¼š\nè¿™æ˜¯ä¸€ä»½ç¤ºä¾‹æ–‡æ¡£..."

class WriteFileTool(MCPTool):
    """æ–‡ä»¶å†™å…¥å·¥å…·"""
    def __init__(self):
        super().__init__(
            name="write_file",
            description="å†™å…¥æ–‡ä»¶å†…å®¹"
        )

    def invoke(self, path: str, content: str) -> str:
        """å†™å…¥æ–‡ä»¶"""
        print(f"ğŸ“ å†™å…¥æ–‡ä»¶: {path}")
        return f"æ–‡ä»¶å·²ä¿å­˜åˆ° {path}"

class SendNotificationTool(MCPTool):
    """é€šçŸ¥å‘é€å·¥å…·"""
    def __init__(self):
        super().__init__(
            name="send_notification",
            description="å‘é€ç”¨æˆ·é€šçŸ¥"
        )

    def invoke(self, message: str, channel: str = "default") -> str:
        """å‘é€é€šçŸ¥"""
        print(f"ğŸ”” é€šçŸ¥ [{channel}]: {message}")
        return f"é€šçŸ¥å·²å‘é€åˆ° {channel}"

# ========== 3. ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ ==========

class TodoListManager:
    """ä»»åŠ¡åˆ—è¡¨ç®¡ç†å™¨ (æ¨¡æ‹Ÿ TodoListMiddleware)"""

    def __init__(self):
        self.todos: List[TodoItem] = []

    def add_todo(self, task: str, priority: str = "medium") -> TodoItem:
        """æ·»åŠ ä»»åŠ¡"""
        item = TodoItem(task=task, priority=priority)
        self.todos.append(item)
        print(f"ğŸ“‹ æ·»åŠ ä»»åŠ¡: {task} (ä¼˜å…ˆçº§: {priority})")
        return item

    def update_status(self, task: str, status: str):
        """æ›´æ–°ä»»åŠ¡çŠ¶æ€"""
        for todo in self.todos:
            if todo.task == task:
                todo.status = status
                print(f"âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°: {task} -> {status}")
                return
        print(f"âš ï¸ ä»»åŠ¡æœªæ‰¾åˆ°: {task}")

    def get_todos(self, status: str = None) -> List[TodoItem]:
        """è·å–ä»»åŠ¡åˆ—è¡¨"""
        if status:
            return [t for t in self.todos if t.status == status]
        return self.todos

    def display(self):
        """æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨"""
        print("\nğŸ“‹ ä»»åŠ¡åˆ—è¡¨:")
        for i, todo in enumerate(self.todos, 1):
            status_icon = {"pending": "â³", "in_progress": "ğŸ”„", "completed": "âœ…"}
            print(f"  {status_icon.get(todo.status, 'â“')} {i}. {todo.task}")

# ========== 4. å­æ™ºèƒ½ä½“å®šä¹‰ ==========

class SubAgent:
    """å­æ™ºèƒ½ä½“åŸºç±»"""

    def __init__(self, name: str, description: str, tools: List[MCPTool]):
        self.name = name
        self.description = description
        self.tools = {tool.name: tool for tool in tools}
        print(f"ğŸ¤– å­æ™ºèƒ½ä½“ [{name}] å·²åˆ›å»º")
        print(f"   å·¥å…·: {list(self.tools.keys())}")

    def invoke(self, task: str) -> str:
        raise NotImplementedError

class ResearchSubAgent(SubAgent):
    """ç ”ç©¶ä¸“ç”¨å­æ™ºèƒ½ä½“"""

    def __init__(self):
        super().__init__(
            name="research-agent",
            description="ä¸“é—¨è´Ÿè´£æœç´¢å’Œæ•´ç†ç ”ç©¶èµ„æ–™",
            tools=[SearchWebTool(), ReadFileTool()]
        )

    def invoke(self, task: str) -> str:
        """æ‰§è¡Œç ”ç©¶ä»»åŠ¡"""
        print(f"\nğŸ“š ç ”ç©¶å­æ™ºèƒ½ä½“å¼€å§‹å¤„ç†: {task[:50]}...")

        # ä½¿ç”¨æœç´¢å·¥å…·
        search_tool = self.tools["search_web"]
        results = search_tool.invoke(query=task)

        # æ•´ç†ç»“æœ
        summary = f"ç ”ç©¶ä¸»é¢˜: {task}\n\n"
        summary += "å‘ç°çš„èµ„æº:\n"
        for i, result in enumerate(results, 1):
            summary += f"\n{i}. {result['title']}\n"
            summary += f"   æ‘˜è¦: {result['snippet'][:100]}...\n"
            summary += f"   é“¾æ¥: {result['url']}\n"

        return summary

class WriterSubAgent(SubAgent):
    """å†™ä½œä¸“ç”¨å­æ™ºèƒ½ä½“"""

    def __init__(self):
        super().__init__(
            name="writer-agent",
            description="ä¸“é—¨è´Ÿè´£æ’°å†™å’Œæ•´ç†æ–‡æ¡£",
            tools=[WriteFileTool(), SendNotificationTool()]
        )

    def invoke(self, task: str) -> str:
        """æ‰§è¡Œå†™ä½œä»»åŠ¡"""
        print(f"\nâœï¸ å†™ä½œå­æ™ºèƒ½ä½“å¼€å§‹å¤„ç†: {task[:50]}...")

        # ç”Ÿæˆå†…å®¹
        content = f"""
# {task}

## æ¦‚è¿°

è¿™æ˜¯å…³äº {task} çš„ç ”ç©¶æŠ¥å‘Šã€‚

## ä¸»è¦å‘ç°

1. å‘ç°ä¸€ï¼šæ ¸å¿ƒæ¦‚å¿µè§£æ
2. å‘ç°äºŒï¼šæœ€ä½³å®è·µæ€»ç»“
3. å‘ç°ä¸‰ï¼šæœªæ¥è¶‹åŠ¿å±•æœ›

## ç»“è®º

ç»¼åˆä»¥ä¸Šåˆ†æï¼Œ{task} æ˜¯ä¸€ä¸ªé‡è¦ä¸”å€¼å¾—æ·±å…¥ç ”ç©¶çš„é¢†åŸŸã€‚

---
*ç”± AI ç ”ç©¶åŠ©æ‰‹è‡ªåŠ¨ç”Ÿæˆ*
"""

        # ä¿å­˜æ–‡ä»¶
        write_tool = self.tools["write_file"]
        filename = f"/reports/{task.replace(' ', '_')}.md"
        write_tool.invoke(path=filename, content=content)

        # å‘é€é€šçŸ¥
        notify_tool = self.tools["send_notification"]
        notify_tool.invoke(
            message=f"æŠ¥å‘Šå·²ç”Ÿæˆ: {filename}",
            channel="slack"
        )

        return content

# ========== 5. ä¸»æ™ºèƒ½ä½“ï¼ˆåè°ƒå™¨ï¼‰ ==========

class OrchestratorAgent:
    """
    åè°ƒå™¨æ™ºèƒ½ä½“
    æ¨¡æ‹Ÿ Agent Builder çš„ä¸»æ™ºèƒ½ä½“åŠŸèƒ½
    """

    def __init__(self):
        self.name = "orchestrator"
        self.todo_manager = TodoListManager()
        self.memory = {}  # ç®€å•çš„è®°å¿†å­˜å‚¨

        # æ³¨å†Œå­æ™ºèƒ½ä½“
        self.subagents = {
            "research": ResearchSubAgent(),
            "writer": WriterSubAgent()
        }

        # æ³¨å†Œå·¥å…·
        self.tools = {
            "search_web": SearchWebTool(),
            "read_file": ReadFileTool(),
            "write_file": WriteFileTool(),
            "send_notification": SendNotificationTool()
        }

        print(f"\nğŸ¯ åè°ƒå™¨æ™ºèƒ½ä½“å·²åˆå§‹åŒ–")
        print(f"   å­æ™ºèƒ½ä½“: {list(self.subagents.keys())}")
        print(f"   å·¥å…·: {list(self.tools.keys())}")

    def delegate_to_subagent(self, agent_name: str, task: str) -> str:
        """å§”æ‰˜ä»»åŠ¡ç»™å­æ™ºèƒ½ä½“"""
        if agent_name not in self.subagents:
            return f"âŒ æœªæ‰¾åˆ°å­æ™ºèƒ½ä½“: {agent_name}"

        print(f"\nğŸ“¤ å§”æ‰˜ä»»åŠ¡ç»™ [{agent_name}]")
        subagent = self.subagents[agent_name]
        result = subagent.invoke(task)
        return result

    def save_to_memory(self, key: str, value: str):
        """ä¿å­˜åˆ°è®°å¿†"""
        self.memory[key] = value
        print(f"ğŸ’¾ ä¿å­˜åˆ°è®°å¿†: {key}")

    def get_from_memory(self, key: str) -> Optional[str]:
        """ä»è®°å¿†ä¸­è·å–"""
        return self.memory.get(key)

    def process_request(self, request: str) -> str:
        """å¤„ç†ç”¨æˆ·è¯·æ±‚"""
        print(f"\n{'='*60}")
        print(f"ğŸ‘¤ ç”¨æˆ·è¯·æ±‚: {request}")
        print('='*60)

        # æ·»åŠ ä¸»ä»»åŠ¡
        self.todo_manager.add_todo(f"å¤„ç†è¯·æ±‚: {request[:30]}...", "high")
        self.todo_manager.update_status(f"å¤„ç†è¯·æ±‚: {request[:30]}...", "in_progress")

        # åˆ†æè¯·æ±‚å¹¶åˆ†é…ä»»åŠ¡
        if "ç ”ç©¶" in request or "æœç´¢" in request or "æŸ¥æ‰¾" in request:
            # å§”æ‰˜ç»™ç ”ç©¶å­æ™ºèƒ½ä½“
            self.todo_manager.add_todo("æ‰§è¡Œç ”ç©¶ä»»åŠ¡", "medium")
            research_result = self.delegate_to_subagent("research", request)
            self.todo_manager.update_status("æ‰§è¡Œç ”ç©¶ä»»åŠ¡", "completed")

            # ä¿å­˜ç ”ç©¶ç»“æœ
            self.save_to_memory(f"research_{request[:20]}", research_result)

            # å§”æ‰˜ç»™å†™ä½œå­æ™ºèƒ½ä½“ç”ŸæˆæŠ¥å‘Š
            self.todo_manager.add_todo("ç”Ÿæˆç ”ç©¶æŠ¥å‘Š", "medium")
            report = self.delegate_to_subagent("writer", request)
            self.todo_manager.update_status("ç”Ÿæˆç ”ç©¶æŠ¥å‘Š", "completed")

            result = f"ç ”ç©¶å®Œæˆï¼\n\n{report}"

        elif "å†™" in request or "ç”Ÿæˆ" in request or "åˆ›å»º" in request:
            # å§”æ‰˜ç»™å†™ä½œå­æ™ºèƒ½ä½“
            self.todo_manager.add_todo("æ‰§è¡Œå†™ä½œä»»åŠ¡", "medium")
            result = self.delegate_to_subagent("writer", request)
            self.todo_manager.update_status("æ‰§è¡Œå†™ä½œä»»åŠ¡", "completed")

        else:
            # ä½¿ç”¨å·¥å…·ç›´æ¥å¤„ç†
            self.todo_manager.add_todo("ç›´æ¥å¤„ç†è¯·æ±‚", "medium")
            search_tool = self.tools["search_web"]
            search_results = search_tool.invoke(query=request)

            result = f"æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯:\n\n"
            for i, r in enumerate(search_results, 1):
                result += f"{i}. {r['title']}\n   {r['snippet']}\n\n"

            self.todo_manager.update_status("ç›´æ¥å¤„ç†è¯·æ±‚", "completed")

        # æ›´æ–°ä¸»ä»»åŠ¡çŠ¶æ€
        self.todo_manager.update_status(f"å¤„ç†è¯·æ±‚: {request[:30]}...", "completed")

        return result

# ========== 6. MCP æœåŠ¡å™¨æ¨¡æ‹Ÿ ==========

class MCPServer:
    """
    æ¨¡æ‹Ÿ MCP æœåŠ¡å™¨
    å±•ç¤º langsmith-tool-server çš„æ ¸å¿ƒåŠŸèƒ½
    """

    def __init__(self, name: str, tools: List[MCPTool]):
        self.name = name
        self.tools = {tool.name: tool for tool in tools}
        print(f"\nğŸ–¥ï¸ MCP æœåŠ¡å™¨ [{name}] å·²å¯åŠ¨")
        print(f"   ç«¯ç‚¹: http://localhost:8000/mcp")
        print(f"   å·¥å…·: {list(self.tools.keys())}")

    def handle_request(self, method: str, params: dict) -> dict:
        """å¤„ç† JSON-RPC è¯·æ±‚"""
        if method == "tools/list":
            return {
                "jsonrpc": "2.0",
                "result": [
                    {"name": name, "description": tool.description}
                    for name, tool in self.tools.items()
                ],
                "id": 1
            }

        elif method == "tools/call":
            tool_name = params.get("name")
            arguments = params.get("arguments", {})

            if tool_name not in self.tools:
                return {
                    "jsonrpc": "2.0",
                    "error": {"code": -32601, "message": f"å·¥å…·ä¸å­˜åœ¨: {tool_name}"},
                    "id": 1
                }

            tool = self.tools[tool_name]
            result = tool.invoke(**arguments)

            return {
                "jsonrpc": "2.0",
                "result": result,
                "id": 1
            }

        return {
            "jsonrpc": "2.0",
            "error": {"code": -32601, "message": "æ–¹æ³•ä¸å­˜åœ¨"},
            "id": 1
        }

# ========== 7. Human-in-the-Loop æ¨¡æ‹Ÿ ==========

class HumanInTheLoop:
    """äººæœºåä½œæ§åˆ¶å™¨"""

    def __init__(self, auto_approve: bool = True):
        self.auto_approve = auto_approve
        self.pending_approvals = []

    def request_approval(self, action: str, details: dict) -> str:
        """è¯·æ±‚äººå·¥å®¡æ‰¹"""
        print(f"\nâ¸ï¸ ç­‰å¾…äººå·¥å®¡æ‰¹:")
        print(f"   æ“ä½œ: {action}")
        print(f"   è¯¦æƒ…: {details}")

        if self.auto_approve:
            print(f"   âœ… è‡ªåŠ¨æ‰¹å‡†ï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰")
            return "approved"

        # åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šç­‰å¾…ç”¨æˆ·è¾“å…¥
        self.pending_approvals.append({"action": action, "details": details})
        return "pending"

    def get_pending(self) -> List[dict]:
        """è·å–å¾…å®¡æ‰¹é¡¹"""
        return self.pending_approvals

# ========== 8. å®Œæ•´ç³»ç»Ÿé›†æˆ ==========

class AgentBuilderSystem:
    """
    å®Œæ•´çš„ Agent Builder ç³»ç»Ÿ
    æ•´åˆï¼šåè°ƒå™¨ã€MCP æœåŠ¡å™¨ã€äººæœºåä½œ
    """

    def __init__(self):
        # åˆå§‹åŒ– MCP æœåŠ¡å™¨
        self.mcp_server = MCPServer(
            name="research-toolkit",
            tools=[
                SearchWebTool(),
                ReadFileTool(),
                WriteFileTool(),
                SendNotificationTool()
            ]
        )

        # åˆå§‹åŒ–åè°ƒå™¨æ™ºèƒ½ä½“
        self.agent = OrchestratorAgent()

        # åˆå§‹åŒ–äººæœºåä½œæ§åˆ¶å™¨
        self.hitl = HumanInTheLoop(auto_approve=True)

        # å¯¹è¯å†å²
        self.conversation_history = []

        print("\n" + "="*60)
        print("ğŸš€ Agent Builder ç³»ç»Ÿå·²å°±ç»ª")
        print("="*60)

    def chat(self, user_input: str) -> str:
        """å¤„ç†ç”¨æˆ·å¯¹è¯"""
        # è®°å½•å¯¹è¯
        self.conversation_history.append({
            "role": "user",
            "content": user_input
        })

        # å¤„ç†è¯·æ±‚
        response = self.agent.process_request(user_input)

        # è®°å½•å“åº”
        self.conversation_history.append({
            "role": "assistant",
            "content": response
        })

        return response

    def show_status(self):
        """æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€"""
        print(f"\n{'='*60}")
        print("ğŸ“Š ç³»ç»ŸçŠ¶æ€")
        print('='*60)

        # æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨
        self.agent.todo_manager.display()

        # æ˜¾ç¤ºè®°å¿†
        print(f"\nğŸ’¾ è®°å¿†å­˜å‚¨ ({len(self.agent.memory)} é¡¹):")
        for key in self.agent.memory.keys():
            print(f"  - {key}")

        # æ˜¾ç¤ºå¯¹è¯å†å²
        print(f"\nğŸ’¬ å¯¹è¯å†å² ({len(self.conversation_history)} æ¡æ¶ˆæ¯)")

    def demo_mcp_calls(self):
        """æ¼”ç¤º MCP è°ƒç”¨"""
        print(f"\n{'='*60}")
        print("ğŸ”Œ MCP æœåŠ¡å™¨è°ƒç”¨æ¼”ç¤º")
        print('='*60)

        # åˆ—å‡ºå·¥å…·
        response = self.mcp_server.handle_request("tools/list", {})
        print(f"\nğŸ“‹ å¯ç”¨å·¥å…·:")
        for tool in response["result"]:
            print(f"  - {tool['name']}: {tool['description']}")

        # è°ƒç”¨æœç´¢å·¥å…·
        response = self.mcp_server.handle_request(
            "tools/call",
            {"name": "search_web", "arguments": {"query": "LangGraph æ•™ç¨‹"}}
        )
        print(f"\nğŸ” æœç´¢ç»“æœ:")
        for i, result in enumerate(response["result"], 1):
            print(f"  {i}. {result['title']}")

# ========== 9. ä¸»ç¨‹åº ==========

if __name__ == "__main__":
    print("="*60)
    print("ğŸ¯ Agent Builder å®Œæ•´ç¤ºä¾‹")
    print("="*60)

    # åˆ›å»ºç³»ç»Ÿ
    system = AgentBuilderSystem()

    # æ¼”ç¤º MCP è°ƒç”¨
    system.demo_mcp_calls()

    # å¯¹è¯æµ‹è¯•
    print(f"\n{'='*60}")
    print("ğŸ’¬ å¼€å§‹å¯¹è¯æµ‹è¯•")
    print('='*60)

    # æµ‹è¯• 1: ç ”ç©¶ä»»åŠ¡
    response1 = system.chat("ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ")
    print(f"\nğŸ¤– å“åº”:\n{response1[:500]}...")

    # æµ‹è¯• 2: å†™ä½œä»»åŠ¡
    response2 = system.chat("åˆ›å»ºä¸€ä»½å…³äº AI Agent çš„ç®€æŠ¥")
    print(f"\nğŸ¤– å“åº”:\n{response2[:500]}...")

    # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
    system.show_status()

    # æ¼”ç¤ºäººæœºåä½œ
    print(f"\n{'='*60}")
    print("ğŸ‘¥ Human-in-the-Loop æ¼”ç¤º")
    print('='*60)

    hitl = HumanInTheLoop(auto_approve=False)
    result = hitl.request_approval(
        action="å‘é€é‚®ä»¶",
        details={
            "to": "team@example.com",
            "subject": "ç ”ç©¶æŠ¥å‘Šå·²å®Œæˆ",
            "content": "è¯·æŸ¥æ”¶é™„ä»¶ä¸­çš„ç ”ç©¶æŠ¥å‘Š..."
        }
    )
    print(f"å®¡æ‰¹ç»“æœ: {result}")

    # æœ€ç»ˆè¾“å‡º
    print(f"\n{'='*60}")
    print("âœ… æ¼”ç¤ºå®Œæˆ")
    print('='*60)

    print("""
ğŸ“‹ æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾:

| æ¦‚å¿µ | è¯´æ˜ | ä»£ç ç¤ºä¾‹ |
|------|------|----------|
| **Agent Builder** | æ— ä»£ç æ™ºèƒ½ä½“æ„å»ºå¹³å° | LangSmith UI æ“ä½œ |
| **MCP åè®®** | å·¥å…·æœåŠ¡å™¨æ ‡å‡†åè®® | `langsmith-tool-server` |
| **@tool è£…é¥°å™¨** | å®šä¹‰ MCP å·¥å…· | `@tool def func()` |
| **å­æ™ºèƒ½ä½“** | ä¸“é—¨åŒ–ä»»åŠ¡å¤„ç† | `SubAgent.invoke(task)` |
| **ä»»åŠ¡ç®¡ç†** | å¾…åŠäº‹é¡¹è¿½è¸ª | `TodoListManager` |
| **Human-in-the-Loop** | äººå·¥å®¡æ‰¹å·¥ä½œæµ | `request_approval()` |
| **OAuth è®¤è¯** | å·¥å…·æˆæƒ | `auth_provider="google"` |
| **MCP ç½‘å…³** | èšåˆå¤šä¸ªå·¥å…·æœåŠ¡å™¨ | `toolkit.toml` é…ç½® |

ğŸ’¡ æç¤ºï¼š
1. Agent Builder ç›®å‰å¤„äº Beta é˜¶æ®µ
2. å¿…é¡»é…ç½® ANTHROPIC_API_KEY æ‰èƒ½ä½¿ç”¨
3. Slack é›†æˆå…è´¹ï¼Œè´¹ç”¨æ¥è‡ªæ™ºèƒ½ä½“æ‰§è¡Œ
4. å¯é€šè¿‡è‡ªå®šä¹‰ MCP æœåŠ¡å™¨æ‰©å±•åŠŸèƒ½
""")
```

### è¿è¡Œç»“æœç¤ºä¾‹

```
============================================================
ğŸ¯ Agent Builder å®Œæ•´ç¤ºä¾‹
============================================================

ğŸ–¥ï¸ MCP æœåŠ¡å™¨ [research-toolkit] å·²å¯åŠ¨
   ç«¯ç‚¹: http://localhost:8000/mcp
   å·¥å…·: ['search_web', 'read_file', 'write_file', 'send_notification']
ğŸ¤– å­æ™ºèƒ½ä½“ [research-agent] å·²åˆ›å»º
   å·¥å…·: ['search_web', 'read_file']
ğŸ¤– å­æ™ºèƒ½ä½“ [writer-agent] å·²åˆ›å»º
   å·¥å…·: ['write_file', 'send_notification']

ğŸ¯ åè°ƒå™¨æ™ºèƒ½ä½“å·²åˆå§‹åŒ–
   å­æ™ºèƒ½ä½“: ['research', 'writer']
   å·¥å…·: ['search_web', 'read_file', 'write_file', 'send_notification']

============================================================
ğŸš€ Agent Builder ç³»ç»Ÿå·²å°±ç»ª
============================================================

============================================================
ğŸ”Œ MCP æœåŠ¡å™¨è°ƒç”¨æ¼”ç¤º
============================================================

ğŸ“‹ å¯ç”¨å·¥å…·:
  - search_web: æœç´¢ç½‘ç»œä¿¡æ¯
  - read_file: è¯»å–æ–‡ä»¶å†…å®¹
  - write_file: å†™å…¥æ–‡ä»¶å†…å®¹
  - send_notification: å‘é€ç”¨æˆ·é€šçŸ¥

ğŸ” æœç´¢å®Œæˆ: LangGraph æ•™ç¨‹ (æ‰¾åˆ° 3 æ¡ç»“æœ)

ğŸ” æœç´¢ç»“æœ:
  1. å…³äº LangGraph æ•™ç¨‹ çš„æƒå¨æŒ‡å—
  2. LangGraph æ•™ç¨‹ å…¥é—¨æ•™ç¨‹
  3. LangGraph æ•™ç¨‹ æœ€æ–°è¿›å±•

============================================================
ğŸ’¬ å¼€å§‹å¯¹è¯æµ‹è¯•
============================================================

============================================================
ğŸ‘¤ ç”¨æˆ·è¯·æ±‚: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ
============================================================
ğŸ“‹ æ·»åŠ ä»»åŠ¡: å¤„ç†è¯·æ±‚: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ... (ä¼˜å…ˆçº§: high)
âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°: å¤„ç†è¯·æ±‚: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ... -> in_progress
ğŸ“‹ æ·»åŠ ä»»åŠ¡: æ‰§è¡Œç ”ç©¶ä»»åŠ¡ (ä¼˜å…ˆçº§: medium)

ğŸ“¤ å§”æ‰˜ä»»åŠ¡ç»™ [research]

ğŸ“š ç ”ç©¶å­æ™ºèƒ½ä½“å¼€å§‹å¤„ç†: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ...
ğŸ” æœç´¢å®Œæˆ: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ (æ‰¾åˆ° 3 æ¡ç»“æœ)
âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°: æ‰§è¡Œç ”ç©¶ä»»åŠ¡ -> completed
ğŸ’¾ ä¿å­˜åˆ°è®°å¿†: research_ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§
ğŸ“‹ æ·»åŠ ä»»åŠ¡: ç”Ÿæˆç ”ç©¶æŠ¥å‘Š (ä¼˜å…ˆçº§: medium)

ğŸ“¤ å§”æ‰˜ä»»åŠ¡ç»™ [writer]

âœï¸ å†™ä½œå­æ™ºèƒ½ä½“å¼€å§‹å¤„ç†: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ...
ğŸ“ å†™å…¥æ–‡ä»¶: /reports/ç ”ç©¶_LangGraph_çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ.md
ğŸ”” é€šçŸ¥ [slack]: æŠ¥å‘Šå·²ç”Ÿæˆ: /reports/ç ”ç©¶_LangGraph_çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ.md
âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°: ç”Ÿæˆç ”ç©¶æŠ¥å‘Š -> completed
âœ… ä»»åŠ¡çŠ¶æ€æ›´æ–°: å¤„ç†è¯·æ±‚: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ... -> completed

============================================================
ğŸ“Š ç³»ç»ŸçŠ¶æ€
============================================================

ğŸ“‹ ä»»åŠ¡åˆ—è¡¨:
  âœ… 1. å¤„ç†è¯·æ±‚: ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§å’Œæœ€ä½³å®è·µ...
  âœ… 2. æ‰§è¡Œç ”ç©¶ä»»åŠ¡
  âœ… 3. ç”Ÿæˆç ”ç©¶æŠ¥å‘Š
  âœ… 4. å¤„ç†è¯·æ±‚: åˆ›å»ºä¸€ä»½å…³äº AI Agent çš„ç®€æŠ¥...
  âœ… 5. æ‰§è¡Œå†™ä½œä»»åŠ¡

ğŸ’¾ è®°å¿†å­˜å‚¨ (1 é¡¹):
  - research_ç ”ç©¶ LangGraph çš„æ ¸å¿ƒç‰¹æ€§

ğŸ’¬ å¯¹è¯å†å² (4 æ¡æ¶ˆæ¯)

============================================================
ğŸ‘¥ Human-in-the-Loop æ¼”ç¤º
============================================================

â¸ï¸ ç­‰å¾…äººå·¥å®¡æ‰¹:
   æ“ä½œ: å‘é€é‚®ä»¶
   è¯¦æƒ…: {'to': 'team@example.com', 'subject': 'ç ”ç©¶æŠ¥å‘Šå·²å®Œæˆ', ...}
å®¡æ‰¹ç»“æœ: pending

============================================================
âœ… æ¼”ç¤ºå®Œæˆ
============================================================
```

---

## æ‰©å±•é˜…è¯»

- [Agent Builder å®˜æ–¹æ–‡æ¡£](https://docs.langchain.com/langsmith/agent-builder)
- [Agent Builder è®¾ç½®æŒ‡å—](https://docs.langchain.com/langsmith/agent-builder-setup)
- [Agent Builder å·¥å…·æ–‡æ¡£](https://docs.langchain.com/langsmith/agent-builder-tools)
- [MCP æ¡†æ¶æ–‡æ¡£](https://docs.langchain.com/langsmith/agent-builder-mcp-framework)
- [Slack åº”ç”¨é›†æˆ](https://docs.langchain.com/langsmith/agent-builder-slack-app)
- [Deep Agents GitHub](https://github.com/langchain-ai/deepagents)
- [LangSmith Agent Builder åšå®¢](https://blog.langchain.com/langsmith-agent-builder/)

---

**æ€»ç»“**ï¼šAgent Builder æ˜¯ LangSmith æä¾›çš„é©å‘½æ€§æ— ä»£ç æ™ºèƒ½ä½“æ„å»ºå¹³å°ï¼Œå®ƒå°†å¤æ‚çš„ AI æ™ºèƒ½ä½“å¼€å‘ç®€åŒ–ä¸ºè‡ªç„¶è¯­è¨€å¯¹è¯ã€‚é€šè¿‡ MCP åè®®ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾é›†æˆå†…ç½®å·¥å…·æˆ–è‡ªå®šä¹‰å·¥å…·æœåŠ¡å™¨ã€‚æ— è®ºæ˜¯é‚®ä»¶è‡ªåŠ¨åŒ–ã€Slack æœºå™¨äººè¿˜æ˜¯ç ”ç©¶åŠ©æ‰‹ï¼ŒAgent Builder éƒ½èƒ½å¸®åŠ©ä½ å¿«é€Ÿæ„å»ºç”Ÿäº§çº§çš„ AI åº”ç”¨ã€‚
