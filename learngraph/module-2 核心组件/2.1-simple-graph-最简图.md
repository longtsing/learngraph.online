# LangGraph æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰è¯¦ç»†è§£è¯»

>  ç½‘ç«™ä½¿ç”¨è¯´æ˜
> - æœ¬ç½‘ç«™å¯ä»¥å…ç™»é™†è¿è¡Œ Python ä»£ç 
> - Python ä»£ç å¯ä»¥ç¼–è¾‘å¹¶ä¸´æ—¶ä¿å­˜ï¼Œä½†ä¸ä¼šæ°¸ä¹…ä¿å­˜ï¼Œç½‘é¡µåˆ·æ–°åä¼šè‡ªåŠ¨è¿˜åŸ
> - å¯¹ç½‘ç«™çš„ä½¿ç”¨æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åˆ° [é—®é¢˜åé¦ˆ](http://localhost:5173/feedback.html) ï¼ˆæŒ‰é’®åœ¨æ¯ä¸ªé¡µé¢çš„å³ä¸‹è§’ï¼‰å…ç™»å½•è¿›è¡Œè¯„è®º
> - è¿è¡Œ `LangGraph/LangChain`ä»£ç ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥è‡ªå·±çš„ [API Key](http://localhost:5173/python-run.html)
> - é‡è¦å£°æ˜ï¼šæœ¬ç½‘ç«™ä¸ä¼šä¿å­˜ç”¨æˆ·çš„ API Key æ•°æ®ï¼Œè¯·æ”¾å¿ƒè¾“å…¥

## ğŸ“š æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è§£è¯» LangGraph çš„ **æœ€ç®€å›¾ï¼ˆSimple Graphï¼‰** æ•™ç¨‹ã€‚è¿™æ˜¯ LangGraph å…¥é—¨çš„ç¬¬ä¸€è¯¾ï¼Œé€šè¿‡æ„å»ºä¸€ä¸ªåŒ…å« 3 ä¸ªèŠ‚ç‚¹å’Œ 1 ä¸ªæ¡ä»¶è¾¹çš„ç®€å•å›¾ï¼Œå¸®åŠ©æ‚¨æŒæ¡ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŸºç¡€æ¶æ„ã€‚

**å­¦ä¹ ç›®æ ‡ï¼š**
- ç†è§£ LangGraph çš„æ ¸å¿ƒç»„ä»¶ï¼ˆStateã€Nodeã€Edgeï¼‰
- æŒæ¡å›¾çš„æ„å»ºå’Œæ‰§è¡Œæµç¨‹
- å­¦ä¹ æ¡ä»¶è¾¹çš„ä½¿ç”¨æ–¹æ³•
- ç†Ÿæ‚‰ Python ç±»å‹æç¤ºå’Œ TypedDict

---

## ğŸ“š æœ¯è¯­è¡¨

| æœ¯è¯­åç§° | LangGraph å®šä¹‰å’Œè§£è¯» | Python å®šä¹‰å’Œè¯´æ˜ | é‡è¦ç¨‹åº¦ |
|---------|---------------------|------------------|---------|
| **StateGraph** | LangGraph çš„å›¾æ„å»ºå™¨ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†æœ‰çŠ¶æ€çš„å·¥ä½œæµ | æ³›å‹ç±»ï¼Œæ¥å—çŠ¶æ€ç±»å‹ä½œä¸ºå‚æ•°ï¼Œæä¾› add_node/add_edge ç­‰æ–¹æ³• | â­â­â­â­â­ |
| **TypedDict** | å®šä¹‰å›¾çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼Œæä¾›ç±»å‹å®‰å…¨çš„å­—å…¸å®šä¹‰ | Python 3.8+ çš„ç±»å‹æç¤ºå·¥å…·ï¼Œç”¨äºå£°æ˜å­—å…¸çš„é”®å€¼ç±»å‹ | â­â­â­â­â­ |
| **Nodeï¼ˆèŠ‚ç‚¹ï¼‰** | æ‰§è¡Œå…·ä½“æ“ä½œçš„å‡½æ•°å•å…ƒï¼Œæ¥æ”¶çŠ¶æ€å¹¶è¿”å›çŠ¶æ€æ›´æ–° | Python å‡½æ•°ï¼Œå¿…é¡»æ¥æ”¶ state å‚æ•°ï¼Œè¿”å›å­—å…¸ç”¨äºæ›´æ–°çŠ¶æ€ | â­â­â­â­â­ |
| **Edgeï¼ˆè¾¹ï¼‰** | è¿æ¥èŠ‚ç‚¹çš„è·¯å¾„ï¼Œå®šä¹‰å·¥ä½œæµçš„æ‰§è¡Œé¡ºåº | ä½¿ç”¨ add_edge æ–¹æ³•æ·»åŠ ï¼ŒæŒ‡å®šæºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹ | â­â­â­â­â­ |
| **Conditional Edge** | æ ¹æ®çŠ¶æ€åŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶è¾¹ | ä½¿ç”¨ add_conditional_edges æ–¹æ³•ï¼Œéœ€æä¾›æ¡ä»¶å‡½æ•°è¿”å›ç›®æ ‡èŠ‚ç‚¹å | â­â­â­â­â­ |
| **START** | LangGraph å›¾çš„ç‰¹æ®Šå…¥å£èŠ‚ç‚¹ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥ | å†…ç½®å¸¸é‡ï¼Œæ ‡è®°å·¥ä½œæµå¼€å§‹ä½ç½®ï¼Œä¸æ˜¯å­—ç¬¦ä¸² | â­â­â­â­â­ |
| **END** | LangGraph å›¾çš„ç‰¹æ®Šå‡ºå£èŠ‚ç‚¹ï¼Œæ ‡è®°æ‰§è¡Œç»“æŸ | å†…ç½®å¸¸é‡ï¼Œæ ‡è®°å·¥ä½œæµç»“æŸä½ç½®ï¼Œè¿”å›æœ€ç»ˆçŠ¶æ€ | â­â­â­â­â­ |
| **Literal** | é™å®šå‡½æ•°è¿”å›å€¼çš„å¯èƒ½å–å€¼èŒƒå›´ | Python typing æ¨¡å—çš„ç±»å‹ï¼Œç”¨äºæ¡ä»¶å‡½æ•°çš„è¿”å›ç±»å‹æ³¨è§£ | â­â­â­â­ |
| **invoke()** | åŒæ­¥æ‰§è¡Œå›¾å¹¶è¿”å›æœ€ç»ˆç»“æœçš„æ–¹æ³• | é˜»å¡è°ƒç”¨ï¼Œç­‰å¾…å›¾æ‰§è¡Œå®Œæˆåè¿”å›å®Œæ•´çŠ¶æ€å­—å…¸ | â­â­â­â­â­ |
| **compile()** | å°†å›¾æ„å»ºå™¨è½¬æ¢ä¸ºå¯æ‰§è¡Œå›¾çš„æ–¹æ³• | éªŒè¯å›¾ç»“æ„åˆæ³•æ€§ï¼Œè¿”å› CompiledGraph å¯¹è±¡ | â­â­â­â­â­ |
| **State** | åœ¨èŠ‚ç‚¹é—´ä¼ é€’å’Œå…±äº«çš„æ•°æ®å®¹å™¨ | TypedDict å®šä¹‰çš„å­—å…¸ç»“æ„ï¼Œå­˜å‚¨å·¥ä½œæµçš„æ‰€æœ‰æ•°æ® | â­â­â­â­â­ |
| **Reducer** | æ§åˆ¶çŠ¶æ€æ›´æ–°æ–¹å¼çš„å‡½æ•°ï¼ˆé«˜çº§æ¦‚å¿µï¼Œåç»­è¯¾ç¨‹è¯¦è§£ï¼‰ | æ¥æ”¶æ—§å€¼å’Œæ–°å€¼ï¼Œè¿”å›åˆå¹¶åçš„å€¼ï¼Œç”¨äºéè¦†ç›–å¼æ›´æ–° | â­â­â­ |

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ

LangGraph æ˜¯ä¸€ä¸ªç”¨äºæ„å»º**æœ‰çŠ¶æ€çš„å¤šæ­¥éª¤åº”ç”¨**çš„æ¡†æ¶ã€‚å®ƒå°†åº”ç”¨ç¨‹åºå»ºæ¨¡ä¸ºä¸€ä¸ª**å›¾ï¼ˆGraphï¼‰**ï¼Œå…¶ä¸­ï¼š

- **èŠ‚ç‚¹ï¼ˆNodeï¼‰**ï¼šæ‰§è¡Œå…·ä½“æ“ä½œçš„å‡½æ•°
- **è¾¹ï¼ˆEdgeï¼‰**ï¼šå®šä¹‰æ‰§è¡Œæµç¨‹çš„è·¯å¾„
- **çŠ¶æ€ï¼ˆStateï¼‰**ï¼šåœ¨èŠ‚ç‚¹é—´ä¼ é€’çš„æ•°æ®

### å›¾çš„åŸºæœ¬ç»“æ„

```
START â†’ Node 1 â†’ [æ¡ä»¶åˆ¤æ–­] â†’ Node 2 æˆ– Node 3 â†’ END
```

**ç‰¹ç‚¹ï¼š**
- **æµç¨‹æ§åˆ¶**ï¼šé€šè¿‡è¾¹æ§åˆ¶èŠ‚ç‚¹çš„æ‰§è¡Œé¡ºåº
- **çŠ¶æ€ç®¡ç†**ï¼šæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¯»å–å’Œæ›´æ–°çŠ¶æ€
- **åŠ¨æ€è·¯ç”±**ï¼šæ¡ä»¶è¾¹æ ¹æ®çŠ¶æ€åŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹

---

## ğŸ­ å®æˆ˜æ¡ˆä¾‹ï¼šæƒ…ç»ªç”Ÿæˆå™¨

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„æƒ…ç»ªç”Ÿæˆå™¨ï¼Œæ¼”ç¤º LangGraph çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼š

**éœ€æ±‚ï¼š**
1. æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼ˆå¦‚ "Hi, this is Lance."ï¼‰
2. æ·»åŠ  "I am" åˆ°æ–‡æœ¬
3. éšæœºé€‰æ‹©æ·»åŠ  "happy!" æˆ– "sad!"

### ç³»ç»Ÿæ¶æ„å›¾

```
ç”¨æˆ·è¾“å…¥: "Hi, this is Lance."
        â†“
    [START]
        â†“
    [Node 1] æ·»åŠ  "I am"
        â†“
  [æ¡ä»¶è¾¹: decide_mood]
        â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â†“            â†“
[Node 2]     [Node 3]
æ·»åŠ  "happy!"  æ·»åŠ  "sad!"
   â†“            â†“
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â†“
      [END]
        â†“
è¾“å‡º: "Hi, this is Lance. I am happy!"
     æˆ– "Hi, this is Lance. I am sad!"
```

---

## ğŸ”§ ä»£ç å®ç°è¯¦è§£

### 1. ç¯å¢ƒå‡†å¤‡

```python
%%capture --no-stderr
%pip install --quiet -U langgraph
```

**è¯´æ˜ï¼š**
- `%%capture --no-stderr`ï¼šJupyter é­”æ³•å‘½ä»¤ï¼Œéšè—å®‰è£…è¾“å‡º
- `--quiet`ï¼šé™é»˜å®‰è£…æ¨¡å¼
- `-U`ï¼šå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

---

### 2. å®šä¹‰çŠ¶æ€ï¼ˆStateï¼‰

çŠ¶æ€æ˜¯ LangGraph çš„**æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼Œè´¯ç©¿æ•´ä¸ªå›¾çš„æ‰§è¡Œè¿‡ç¨‹ã€‚

```python
from typing_extensions import TypedDict

class State(TypedDict):
    graph_state: str
```

#### Python çŸ¥è¯†ç‚¹ï¼šTypedDict

`TypedDict` æ˜¯ Python 3.8+ å¼•å…¥çš„ç±»å‹æç¤ºå·¥å…·ï¼Œç”¨äºå®šä¹‰å­—å…¸çš„ç»“æ„ï¼š

```python
# ä¼ ç»Ÿå­—å…¸ - æ— ç±»å‹æç¤º
state = {"graph_state": "Hello"}

# TypedDict - æœ‰ç±»å‹æç¤º
class State(TypedDict):
    graph_state: str  # æ˜ç¡®æŒ‡å®šå­—æ®µç±»å‹

state: State = {"graph_state": "Hello"}
```

**ä¼˜åŠ¿ï¼š**
1. **IDE æ”¯æŒ**ï¼šè‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥
2. **æ–‡æ¡£ä½œç”¨**ï¼šæ¸…æ™°å±•ç¤ºæ•°æ®ç»“æ„
3. **é”™è¯¯é¢„é˜²**ï¼šé™æ€ç±»å‹æ£€æŸ¥å‘ç°æ½œåœ¨é”™è¯¯

**LangGraph ä¸­çš„ä½œç”¨ï¼š**
- `State` å®šä¹‰äº†å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹å…±äº«çš„æ•°æ®ç»“æ„
- æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è®¿é—®å’Œä¿®æ”¹ `State` ä¸­çš„å­—æ®µ
- æä¾›äº†ç±»å‹å®‰å…¨çš„çŠ¶æ€ç®¡ç†

---

### 3. å®šä¹‰èŠ‚ç‚¹ï¼ˆNodesï¼‰

èŠ‚ç‚¹æ˜¯æ‰§è¡Œå…·ä½“æ“ä½œçš„ **Python å‡½æ•°**ã€‚

```python
def node_1(state):
    print("---Node 1---")
    return {"graph_state": state['graph_state'] + " I am"}

def node_2(state):
    print("---Node 2---")
    return {"graph_state": state['graph_state'] + " happy!"}

def node_3(state):
    print("---Node 3---")
    return {"graph_state": state['graph_state'] + " sad!"}
```

#### èŠ‚ç‚¹çš„æ ¸å¿ƒç‰¹æ€§

**1. è¾“å…¥å‚æ•°**
```python
def node_1(state):
    #         ^^^^^
    #         å¿…é¡»æ¥æ”¶ state å‚æ•°
```
- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰çŠ¶æ€ï¼ˆ`State` ç±»å‹ï¼‰
- å¯ä»¥é€šè¿‡ `state['graph_state']` è®¿é—®çŠ¶æ€å­—æ®µ

**2. è¿”å›å€¼**
```python
return {"graph_state": state['graph_state'] + " I am"}
#      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#      è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œæ›´æ–°çŠ¶æ€ä¸­çš„å­—æ®µ
```
- è¿”å›çš„å­—å…¸ä¼š**æ›´æ–°**çŠ¶æ€
- é»˜è®¤è¡Œä¸ºï¼š**è¦†ç›–**åŸæœ‰å€¼ï¼ˆéåˆå¹¶ï¼‰

**3. çŠ¶æ€æ›´æ–°æœºåˆ¶**

```python
# æ‰§è¡Œå‰ï¼šstate = {"graph_state": "Hi, this is Lance."}
node_1(state)
# æ‰§è¡Œåï¼šstate = {"graph_state": "Hi, this is Lance. I am"}
```

**é‡è¦**ï¼šè¿”å›çš„å€¼ä¼š**å®Œå…¨æ›¿æ¢**å¯¹åº”å­—æ®µçš„åŸå€¼ï¼Œé™¤éä½¿ç”¨äº† Reducerï¼ˆåç»­è¯¾ç¨‹è®²è§£ï¼‰ã€‚

---

### 4. å®šä¹‰è¾¹ï¼ˆEdgesï¼‰

è¾¹å®šä¹‰äº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š

#### æ™®é€šè¾¹ï¼ˆNormal Edgeï¼‰

```python
builder.add_edge(START, "node_1")
```
- **å›ºå®šè·¯ç”±**ï¼šæ€»æ˜¯ä»èµ·ç‚¹æµå‘ç»ˆç‚¹
- **æ— æ¡ä»¶æ‰§è¡Œ**ï¼šæ¯æ¬¡éƒ½ä¼šèµ°è¿™æ¡è·¯å¾„

#### æ¡ä»¶è¾¹ï¼ˆConditional Edgeï¼‰

```python
import random
from typing import Literal

def decide_mood(state) -> Literal["node_2", "node_3"]:
    # ä»çŠ¶æ€ä¸­è·å–æ•°æ®ï¼ˆè¿™é‡Œæœªä½¿ç”¨ï¼Œä»…ä½œç¤ºä¾‹ï¼‰
    user_input = state['graph_state']

    # 50/50 éšæœºé€‰æ‹©
    if random.random() < 0.5:
        return "node_2"  # 50% æ¦‚ç‡è¿”å› Node 2

    return "node_3"      # 50% æ¦‚ç‡è¿”å› Node 3
```

#### Python çŸ¥è¯†ç‚¹ï¼šLiteral ç±»å‹

`Literal` æ˜¯ Python 3.8+ çš„é«˜çº§ç±»å‹æç¤ºï¼Œç”¨äºé™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼ï¼š

```python
from typing import Literal

def decide_mood(state) -> Literal["node_2", "node_3"]:
    #                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    #                     è¿”å›å€¼åªèƒ½æ˜¯ "node_2" æˆ– "node_3"
    return "node_2"  # âœ… åˆæ³•
    # return "node_4"  # âŒ ç±»å‹æ£€æŸ¥ä¼šæŠ¥é”™
```

**ä¼˜åŠ¿ï¼š**
1. **ç±»å‹å®‰å…¨**ï¼šIDE ä¼šæ£€æŸ¥è¿”å›å€¼æ˜¯å¦åˆæ³•
2. **è‡ªåŠ¨è¡¥å…¨**ï¼šç¼–è¾‘å™¨ä¼šæç¤ºå¯ç”¨é€‰é¡¹
3. **æ–‡æ¡£ä½œç”¨**ï¼šæ¸…æ™°å±•ç¤ºæ‰€æœ‰å¯èƒ½çš„è·¯å¾„

#### æ¡ä»¶è¾¹çš„å·¥ä½œåŸç†

```python
# æ¡ä»¶å‡½æ•°çš„èŒè´£
def decide_mood(state) -> Literal["node_2", "node_3"]:
    # 1. è¯»å–çŠ¶æ€
    user_input = state['graph_state']

    # 2. æ‰§è¡Œé€»è¾‘åˆ¤æ–­
    if some_condition:
        return "node_2"  # è·¯ç”±åˆ°èŠ‚ç‚¹ 2
    else:
        return "node_3"  # è·¯ç”±åˆ°èŠ‚ç‚¹ 3
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. èŠ‚ç‚¹ 1 æ‰§è¡Œå®Œæ¯•
2. LangGraph è°ƒç”¨ `decide_mood(state)`
3. æ ¹æ®è¿”å›å€¼ï¼ˆ"node_2" æˆ– "node_3"ï¼‰é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
4. æ‰§è¡Œè¢«é€‰ä¸­çš„èŠ‚ç‚¹

---

### 5. æ„å»ºå›¾ï¼ˆGraph Constructionï¼‰

ç°åœ¨å°†æ‰€æœ‰ç»„ä»¶ç»„è£…æˆå®Œæ•´çš„å›¾ã€‚

```python
from IPython.display import Image, display
from langgraph.graph import StateGraph, START, END

# 1. åˆå§‹åŒ–å›¾æ„å»ºå™¨
builder = StateGraph(State)

# 2. æ·»åŠ èŠ‚ç‚¹
builder.add_node("node_1", node_1)
builder.add_node("node_2", node_2)
builder.add_node("node_3", node_3)

# 3. æ·»åŠ è¾¹
builder.add_edge(START, "node_1")                    # å¼€å§‹ â†’ èŠ‚ç‚¹1
builder.add_conditional_edges("node_1", decide_mood) # èŠ‚ç‚¹1 â†’ æ¡ä»¶åˆ¤æ–­
builder.add_edge("node_2", END)                      # èŠ‚ç‚¹2 â†’ ç»“æŸ
builder.add_edge("node_3", END)                      # èŠ‚ç‚¹3 â†’ ç»“æŸ

# 4. ç¼–è¯‘å›¾
graph = builder.compile()

# 5. å¯è§†åŒ–
display(Image(graph.get_graph().draw_mermaid_png()))
```

#### LangGraph æ ¸å¿ƒ API è¯¦è§£

**1. StateGraph**
```python
builder = StateGraph(State)
#                    ^^^^^
#                    ä¼ å…¥çŠ¶æ€ç±»å‹
```
- å›¾çš„æ„å»ºå™¨ï¼Œç”¨äºæ·»åŠ èŠ‚ç‚¹å’Œè¾¹
- æ³›å‹ç±»ï¼Œæ¥å— `State` ç±»å‹å‚æ•°
- ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨ç›¸åŒçš„çŠ¶æ€ç»“æ„

**2. add_node**
```python
builder.add_node("node_1", node_1)
#                ^^^^^^^^  ^^^^^^
#                èŠ‚ç‚¹åç§°   èŠ‚ç‚¹å‡½æ•°
```
- æ³¨å†ŒèŠ‚ç‚¹åˆ°å›¾ä¸­
- èŠ‚ç‚¹åç§°ç”¨äºè¾¹çš„è¿æ¥ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰
- èŠ‚ç‚¹å‡½æ•°æ˜¯å®é™…æ‰§è¡Œçš„é€»è¾‘

**3. add_edge**
```python
builder.add_edge(START, "node_1")
#                ^^^^^  ^^^^^^^^
#                èµ·ç‚¹    ç»ˆç‚¹
```
- æ·»åŠ å›ºå®šè·¯ç”±çš„è¾¹
- `START` å’Œ `END` æ˜¯ç‰¹æ®ŠèŠ‚ç‚¹ï¼ˆåç»­è¯´æ˜ï¼‰

**4. add_conditional_edges**
```python
builder.add_conditional_edges("node_1", decide_mood)
#                             ^^^^^^^^  ^^^^^^^^^^^
#                             èµ·ç‚¹èŠ‚ç‚¹   æ¡ä»¶å‡½æ•°
```
- æ·»åŠ æ¡ä»¶è·¯ç”±çš„è¾¹
- æ¡ä»¶å‡½æ•°è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°
- è‡ªåŠ¨æ ¹æ®è¿”å›å€¼è·¯ç”±åˆ°å¯¹åº”èŠ‚ç‚¹

**5. compile**
```python
graph = builder.compile()
```
- å°†æ„å»ºå™¨è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„å›¾
- æ‰§è¡ŒåŸºæœ¬éªŒè¯ï¼ˆå¦‚æ£€æŸ¥è¾¹çš„è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼‰
- è¿”å› `CompiledGraph` å¯¹è±¡ï¼Œå¯ä»¥è°ƒç”¨ `invoke` ç­‰æ–¹æ³•

#### ç‰¹æ®ŠèŠ‚ç‚¹ï¼šSTART å’Œ END

**START èŠ‚ç‚¹**
- å›¾çš„å…¥å£ç‚¹
- æ¥æ”¶ç”¨æˆ·è¾“å…¥
- å°†è¾“å…¥ä¼ é€’ç»™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹

```python
builder.add_edge(START, "node_1")
# ç”¨æˆ·è¾“å…¥ â†’ node_1
```

**END èŠ‚ç‚¹**
- å›¾çš„å‡ºå£ç‚¹
- æ ‡è®°æ‰§è¡Œç»“æŸ
- è¿”å›æœ€ç»ˆçŠ¶æ€

```python
builder.add_edge("node_2", END)
# node_2 â†’ ç»“æŸå¹¶è¿”å›ç»“æœ
```

#### å¯è§†åŒ–å›¾ç»“æ„

```python
display(Image(graph.get_graph().draw_mermaid_png()))
```

ç”Ÿæˆ Mermaid å›¾ï¼Œæ˜¾ç¤ºå›¾çš„ç»“æ„ï¼š
- èŠ‚ç‚¹ï¼šçŸ©å½¢æ¡†
- è¾¹ï¼šç®­å¤´è¿æ¥
- æ¡ä»¶è¾¹ï¼šè±å½¢åˆ¤æ–­æ¡†

---

### 6. æ‰§è¡Œå›¾ï¼ˆGraph Invocationï¼‰

å›¾å®ç°äº† LangChain çš„ **Runnable åè®®**ï¼Œæä¾›ç»Ÿä¸€çš„æ‰§è¡Œæ¥å£ã€‚

```python
graph.invoke({"graph_state": "Hi, this is Lance."})
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
---Node 1---
---Node 3---
{'graph_state': 'Hi, this is Lance. I am sad!'}
```

#### invoke æ–¹æ³•è¯¦è§£

**1. è¾“å…¥å‚æ•°**
```python
graph.invoke({"graph_state": "Hi, this is Lance."})
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#            åˆå§‹çŠ¶æ€ï¼ˆå­—å…¸å½¢å¼ï¼‰
```
- è¾“å…¥å¿…é¡»æ˜¯å­—å…¸
- å­—æ®µå¿…é¡»ä¸ `State` å®šä¹‰åŒ¹é…
- è®¾ç½®å›¾çš„åˆå§‹çŠ¶æ€

**2. æ‰§è¡Œæµç¨‹**

```python
# 1. åˆå§‹çŠ¶æ€
state = {"graph_state": "Hi, this is Lance."}

# 2. START â†’ node_1
state = node_1(state)
# {"graph_state": "Hi, this is Lance. I am"}

# 3. æ¡ä»¶è¾¹åˆ¤æ–­
next_node = decide_mood(state)  # è¿”å› "node_3"

# 4. node_3 æ‰§è¡Œ
state = node_3(state)
# {"graph_state": "Hi, this is Lance. I am sad!"}

# 5. END èŠ‚ç‚¹
return state
```

**3. è¿”å›å€¼**
```python
result = graph.invoke({"graph_state": "Hi, this is Lance."})
print(result)
# {'graph_state': 'Hi, this is Lance. I am sad!'}
```
- è¿”å›æœ€ç»ˆçŠ¶æ€ï¼ˆå­—å…¸å½¢å¼ï¼‰
- åŒ…å«æ‰€æœ‰çŠ¶æ€å­—æ®µçš„æœ€æ–°å€¼

#### åŒæ­¥æ‰§è¡Œç‰¹æ€§

```python
invoke() # åŒæ­¥æ–¹æ³•
```
- **é˜»å¡æ‰§è¡Œ**ï¼šç­‰å¾…æ¯ä¸ªèŠ‚ç‚¹å®Œæˆåæ‰ç»§ç»­
- **é¡ºåºæ‰§è¡Œ**ï¼šæŒ‰è¾¹çš„å®šä¹‰ä¾æ¬¡æ‰§è¡Œ
- **æœ€ç»ˆè¿”å›**ï¼šæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åè¿”å›æœ€ç»ˆçŠ¶æ€

**å¯¹æ¯”å¼‚æ­¥æ–¹æ³•ï¼ˆåç»­è¯¾ç¨‹ï¼‰ï¼š**
- `invoke()`ï¼šåŒæ­¥ï¼Œç­‰å¾…å®Œæˆ
- `ainvoke()`ï¼šå¼‚æ­¥ï¼Œéé˜»å¡
- `stream()`ï¼šæµå¼ï¼Œé€æ­¥è¿”å›

---

## ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“

### LangGraph ç‰¹æœ‰æ¦‚å¿µ

#### 1. çŠ¶æ€ï¼ˆStateï¼‰

**å®šä¹‰æ–¹å¼ï¼š**
```python
from typing_extensions import TypedDict

class State(TypedDict):
    graph_state: str
```

**ä½œç”¨ï¼š**
- å®šä¹‰å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹å…±äº«çš„æ•°æ®ç»“æ„
- æä¾›ç±»å‹å®‰å…¨çš„çŠ¶æ€ç®¡ç†
- æ”¯æŒçŠ¶æ€çš„è¯»å–å’Œæ›´æ–°

**å…³é”®ç‚¹ï¼š**
- å¿…é¡»ä½¿ç”¨ `TypedDict` æˆ–ç±»ä¼¼ç±»å‹
- æ‰€æœ‰èŠ‚ç‚¹éƒ½ä½¿ç”¨ç›¸åŒçš„çŠ¶æ€ç»“æ„
- çŠ¶æ€å­—æ®µå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆstr, list, dict, è‡ªå®šä¹‰ç±»ç­‰ï¼‰

#### 2. èŠ‚ç‚¹ï¼ˆNodeï¼‰

**å®šä¹‰æ–¹å¼ï¼š**
```python
def node_name(state):
    # è¯»å–çŠ¶æ€
    value = state['field_name']

    # æ‰§è¡Œé€»è¾‘
    new_value = process(value)

    # æ›´æ–°çŠ¶æ€
    return {"field_name": new_value}
```

**ç‰¹æ€§ï¼š**
- å¿…é¡»æ¥æ”¶ `state` å‚æ•°
- è¿”å›å­—å…¸æ›´æ–°çŠ¶æ€
- å¯ä»¥è¯»å–å’Œä¿®æ”¹ä»»æ„çŠ¶æ€å­—æ®µ

#### 3. è¾¹ï¼ˆEdgeï¼‰

**æ™®é€šè¾¹ï¼š**
```python
builder.add_edge("node_a", "node_b")
# node_a æ€»æ˜¯æµå‘ node_b
```

**æ¡ä»¶è¾¹ï¼š**
```python
def condition(state) -> Literal["node_b", "node_c"]:
    if some_logic:
        return "node_b"
    return "node_c"

builder.add_conditional_edges("node_a", condition)
# node_a æ ¹æ® condition è¿”å›å€¼é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
```

#### 4. ç‰¹æ®ŠèŠ‚ç‚¹

| èŠ‚ç‚¹ | ä½œç”¨ | ç”¨æ³• |
|------|------|------|
| **START** | å›¾çš„å…¥å£ | `builder.add_edge(START, "first_node")` |
| **END** | å›¾çš„å‡ºå£ | `builder.add_edge("last_node", END)` |

#### 5. å›¾çš„æ„å»ºæµç¨‹

```python
# 1. åˆ›å»ºæ„å»ºå™¨
builder = StateGraph(State)

# 2. æ·»åŠ èŠ‚ç‚¹
builder.add_node("name", function)

# 3. æ·»åŠ è¾¹
builder.add_edge(source, target)
builder.add_conditional_edges(source, condition_function)

# 4. ç¼–è¯‘
graph = builder.compile()

# 5. æ‰§è¡Œ
result = graph.invoke(initial_state)
```

---

### Python ç‰¹æœ‰çŸ¥è¯†ç‚¹

#### 1. TypedDict

```python
from typing_extensions import TypedDict

class State(TypedDict):
    field1: str
    field2: int
    field3: list[str]
```

**ç‰¹ç‚¹ï¼š**
- å®šä¹‰å­—å…¸çš„é”®å’Œå€¼ç±»å‹
- é™æ€ç±»å‹æ£€æŸ¥ï¼ˆIDE æ”¯æŒï¼‰
- è¿è¡Œæ—¶ä¸å¼ºåˆ¶éªŒè¯ï¼ˆä¸ Pydantic ä¸åŒï¼‰

#### 2. Literal ç±»å‹

```python
from typing import Literal

def function() -> Literal["option1", "option2"]:
    return "option1"  # åªèƒ½è¿”å›è¿™ä¸¤ä¸ªå€¼ä¹‹ä¸€
```

**ä½œç”¨ï¼š**
- é™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼
- æä¾›æ›´ç²¾ç¡®çš„ç±»å‹æç¤º
- ç”¨äºæ¡ä»¶è¾¹çš„è¿”å›ç±»å‹

#### 3. ç±»å‹æç¤ºï¼ˆType Hintsï¼‰

```python
# å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç±»å‹
def node_1(state: State) -> dict[str, str]:
    return {"graph_state": "..."}

# å˜é‡ç±»å‹
graph_state: str = "Hello"
```

**ä¼˜åŠ¿ï¼š**
- ä»£ç å¯è¯»æ€§æ›´å¥½
- IDE è‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æ£€æŸ¥
- æ–‡æ¡£ä½œç”¨

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä½•æ—¶ä½¿ç”¨ç®€å•å›¾ï¼Ÿ

âœ… **é€‚ç”¨åœºæ™¯ï¼š**
- å­¦ä¹  LangGraph åŸºç¡€æ¦‚å¿µ
- ç®€å•çš„æµç¨‹æ§åˆ¶ï¼ˆ3-5 ä¸ªèŠ‚ç‚¹ï¼‰
- éœ€è¦æ¡ä»¶è·¯ç”±çš„ç®€å•ä»»åŠ¡
- åŸå‹å¼€å‘å’Œæ¦‚å¿µéªŒè¯

âŒ **ä¸é€‚ç”¨åœºæ™¯ï¼š**
- å¤æ‚çš„å¤šæ­¥éª¤æµç¨‹ï¼ˆè€ƒè™‘å­å›¾ï¼‰
- éœ€è¦å¹¶è¡Œæ‰§è¡Œï¼ˆè€ƒè™‘ Map-Reduceï¼‰
- éœ€è¦å¾ªç¯å’Œé‡è¯•ï¼ˆè€ƒè™‘å¾ªç¯å›¾ï¼‰
- å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼ˆè€ƒè™‘å¤šçŠ¶æ€è®¾è®¡ï¼‰

### 2. çŠ¶æ€è®¾è®¡åŸåˆ™

#### åŸåˆ™ 1ï¼šä¿æŒçŠ¶æ€ç®€æ´

```python
# âœ… å¥½çš„è®¾è®¡ - åªåŒ…å«å¿…éœ€å­—æ®µ
class State(TypedDict):
    user_input: str
    result: str

# âŒ ä¸å¥½çš„è®¾è®¡ - è¿‡å¤šå­—æ®µ
class State(TypedDict):
    user_input: str
    intermediate_1: str
    intermediate_2: str
    intermediate_3: str
    temp_value: str
    result: str
```

#### åŸåˆ™ 2ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µå

```python
# âœ… æ¸…æ™°çš„å‘½å
class State(TypedDict):
    user_query: str
    search_results: list[str]
    final_answer: str

# âŒ æ¨¡ç³Šçš„å‘½å
class State(TypedDict):
    data: str
    result: list
    output: str
```

#### åŸåˆ™ 3ï¼šé€‚å½“çš„å­—æ®µç±»å‹

```python
class State(TypedDict):
    # ç®€å•ç±»å‹
    message: str
    count: int
    is_done: bool

    # å¤æ‚ç±»å‹
    items: list[str]
    metadata: dict[str, Any]

    # è‡ªå®šä¹‰ç±»å‹ï¼ˆåç»­è¯¾ç¨‹ï¼‰
    # response: ChatMessage
```

### 3. èŠ‚ç‚¹è®¾è®¡æŠ€å·§

#### æŠ€å·§ 1ï¼šå•ä¸€èŒè´£

```python
# âœ… æ¯ä¸ªèŠ‚ç‚¹åšä¸€ä»¶äº‹
def fetch_data(state):
    data = api.fetch()
    return {"data": data}

def process_data(state):
    result = process(state["data"])
    return {"result": result}

# âŒ èŠ‚ç‚¹åšå¤ªå¤šäº‹æƒ…
def do_everything(state):
    data = api.fetch()
    result = process(data)
    final = format(result)
    return {"final": final}
```

#### æŠ€å·§ 2ï¼šæ·»åŠ æ—¥å¿—

```python
def node_1(state):
    print(f"---Node 1 æ‰§è¡Œ---")
    print(f"è¾“å…¥çŠ¶æ€: {state}")

    result = process(state)

    print(f"è¾“å‡ºçŠ¶æ€: {result}")
    return result
```

#### æŠ€å·§ 3ï¼šé”™è¯¯å¤„ç†

```python
def safe_node(state):
    try:
        result = risky_operation(state)
        return {"result": result, "error": None}
    except Exception as e:
        return {"result": None, "error": str(e)}
```

### 4. æ¡ä»¶è¾¹çš„è®¾è®¡

#### æŠ€å·§ 1ï¼šåŸºäºçŠ¶æ€çš„è·¯ç”±

```python
def route_by_state(state) -> Literal["node_a", "node_b"]:
    # åŸºäºçŠ¶æ€å­—æ®µåšå†³ç­–
    if state["score"] > 0.8:
        return "node_a"
    return "node_b"
```

#### æŠ€å·§ 2ï¼šå¤šæ¡ä»¶åˆ¤æ–­

```python
def complex_routing(state) -> Literal["node_a", "node_b", "node_c"]:
    value = state["value"]

    if value < 10:
        return "node_a"
    elif value < 50:
        return "node_b"
    else:
        return "node_c"
```

#### æŠ€å·§ 3ï¼šæ·»åŠ é»˜è®¤è·¯ç”±

```python
def safe_routing(state) -> Literal["node_a", "node_b", "error_node"]:
    try:
        if state["condition"]:
            return "node_a"
        return "node_b"
    except:
        return "error_node"  # å¼‚å¸¸æƒ…å†µçš„é»˜è®¤è·¯ç”±
```

---

## ğŸš€ è¿›é˜¶æ‰©å±•

### 1. å¤šå­—æ®µçŠ¶æ€

```python
class State(TypedDict):
    user_input: str
    processing_step: int
    results: list[str]
    metadata: dict

def node(state):
    # å¯ä»¥æ›´æ–°å¤šä¸ªå­—æ®µ
    return {
        "processing_step": state["processing_step"] + 1,
        "results": state["results"] + ["new_item"]
    }
```

### 2. åµŒå¥—çŠ¶æ€ç»“æ„

```python
from typing import Any

class State(TypedDict):
    config: dict[str, Any]
    data: dict[str, list[str]]

def node(state):
    # è®¿é—®åµŒå¥—ç»“æ„
    threshold = state["config"]["threshold"]
    items = state["data"]["items"]

    return {"data": {"items": processed_items}}
```

### 3. å¯é€‰å­—æ®µï¼ˆPython 3.11+ï¼‰

```python
from typing import NotRequired

class State(TypedDict):
    required_field: str
    optional_field: NotRequired[str]  # å¯é€‰å­—æ®µ
```

---

## ğŸ¯ å®é™…åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šç®€å•çš„èŠå¤©æœºå™¨äºº

```python
class ChatState(TypedDict):
    user_message: str
    bot_response: str
    sentiment: str

def analyze_sentiment(state):
    # åˆ†æç”¨æˆ·æ¶ˆæ¯çš„æƒ…æ„Ÿ
    sentiment = sentiment_analyzer(state["user_message"])
    return {"sentiment": sentiment}

def generate_response(state):
    # æ ¹æ®æƒ…æ„Ÿç”Ÿæˆå›å¤
    if state["sentiment"] == "positive":
        response = "å¾ˆé«˜å…´å¬åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼"
    else:
        response = "æˆ‘ç†è§£ä½ çš„æ„Ÿå—ã€‚"
    return {"bot_response": response}

def route_by_sentiment(state) -> Literal["positive_response", "negative_response"]:
    return "positive_response" if state["sentiment"] == "positive" else "negative_response"
```

### æ¡ˆä¾‹ 2ï¼šå†…å®¹å®¡æ ¸æµç¨‹

```python
class ModerationState(TypedDict):
    content: str
    is_safe: bool
    action: str

def check_content(state):
    # æ£€æŸ¥å†…å®¹æ˜¯å¦å®‰å…¨
    is_safe = content_filter(state["content"])
    return {"is_safe": is_safe}

def approve_content(state):
    return {"action": "approved"}

def reject_content(state):
    return {"action": "rejected"}

def route_content(state) -> Literal["approve", "reject"]:
    return "approve" if state["is_safe"] else "reject"
```

### æ¡ˆä¾‹ 3ï¼šæ•°æ®å¤„ç†ç®¡é“

```python
class DataState(TypedDict):
    raw_data: str
    cleaned_data: str
    processed_data: dict
    quality_score: float

def clean_data(state):
    cleaned = remove_noise(state["raw_data"])
    return {"cleaned_data": cleaned}

def process_data(state):
    processed = transform(state["cleaned_data"])
    return {"processed_data": processed}

def check_quality(state):
    score = calculate_quality(state["processed_data"])
    return {"quality_score": score}

def route_quality(state) -> Literal["save_result", "retry_processing"]:
    return "save_result" if state["quality_score"] > 0.7 else "retry_processing"
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆèŠ‚ç‚¹è¿”å›å­—å…¸è€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼ï¼Ÿ

å› ä¸º LangGraph éœ€è¦çŸ¥é“æ›´æ–°å“ªä¸ªçŠ¶æ€å­—æ®µï¼š

```python
# âœ… æ­£ç¡® - æ˜ç¡®æŒ‡å®šæ›´æ–°çš„å­—æ®µ
def node(state):
    return {"graph_state": "new_value"}

# âŒ é”™è¯¯ - LangGraph ä¸çŸ¥é“å¦‚ä½•æ›´æ–°çŠ¶æ€
def node(state):
    return "new_value"
```

### Q2: èŠ‚ç‚¹å¯ä»¥ä¸è¿”å›ä»»ä½•å€¼å—ï¼Ÿ

å¯ä»¥ï¼Œä½†çŠ¶æ€ä¸ä¼šæ›´æ–°ï¼š

```python
def node(state):
    print("This node only prints")
    # ä¸è¿”å›ä»»ä½•å€¼ï¼ŒçŠ¶æ€ä¿æŒä¸å˜
```

é€‚ç”¨äºåªæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚æ—¥å¿—ã€é€šçŸ¥ï¼‰çš„èŠ‚ç‚¹ã€‚

### Q3: æ¡ä»¶è¾¹çš„è¿”å›å€¼å¿…é¡»æ˜¯ Literal ç±»å‹å—ï¼Ÿ

ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¼ºçƒˆæ¨èï¼š

```python
# æ¨è âœ… - ç±»å‹å®‰å…¨
def decide(state) -> Literal["node_a", "node_b"]:
    return "node_a"

# å¯è¡Œä½†ä¸æ¨è - æ— ç±»å‹æ£€æŸ¥
def decide(state):
    return "node_a"  # å¯èƒ½æ‹¼å†™é”™è¯¯å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
```

### Q4: å¯ä»¥åœ¨èŠ‚ç‚¹ä¹‹é—´å…±äº«å˜é‡å—ï¼Ÿ

ä¸å»ºè®®ã€‚åº”è¯¥é€šè¿‡çŠ¶æ€ä¼ é€’æ•°æ®ï¼š

```python
# âŒ ä¸å¥½çš„åšæ³• - å…¨å±€å˜é‡
shared_data = []

def node_1(state):
    shared_data.append("data")
    return {}

# âœ… å¥½çš„åšæ³• - é€šè¿‡çŠ¶æ€
class State(TypedDict):
    shared_data: list[str]

def node_1(state):
    return {"shared_data": state["shared_data"] + ["data"]}
```

### Q5: START å’Œ END èŠ‚ç‚¹å¯ä»¥çœç•¥å—ï¼Ÿ

ä¸å¯ä»¥ã€‚å®ƒä»¬æ˜¯å¿…éœ€çš„ç‰¹æ®ŠèŠ‚ç‚¹ï¼š

```python
# âŒ é”™è¯¯ - ç¼ºå°‘ START
builder.add_edge("node_1", "node_2")

# âœ… æ­£ç¡®
builder.add_edge(START, "node_1")
builder.add_edge("node_2", END)
```

---

## ğŸ“Š å›¾çš„æ‰§è¡Œæ¨¡å¼

### invoke - åŒæ­¥æ‰§è¡Œ

```python
result = graph.invoke({"graph_state": "input"})
# é˜»å¡ç›´åˆ°å›¾æ‰§è¡Œå®Œæˆ
print(result)
```

**ç‰¹ç‚¹ï¼š**
- åŒæ­¥é˜»å¡
- è¿”å›æœ€ç»ˆçŠ¶æ€
- é€‚åˆç®€å•åœºæ™¯

### stream - æµå¼æ‰§è¡Œï¼ˆé¢„å‘Šï¼‰

```python
for step in graph.stream({"graph_state": "input"}):
    print(step)  # é€æ­¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡º
```

**ç‰¹ç‚¹ï¼š**
- é€æ­¥è¿”å›ç»“æœ
- å¯ä»¥è§‚å¯Ÿæ‰§è¡Œè¿‡ç¨‹
- é€‚åˆé•¿æ—¶é—´è¿è¡Œçš„å›¾

---

## ğŸ“– æ‰©å±•é˜…è¯»

- [LangGraph å®˜æ–¹æ–‡æ¡£ - æ ¸å¿ƒæ¦‚å¿µ](https://langchain-ai.github.io/langgraph/concepts/low_level/)
- [LangGraph å®˜æ–¹æ–‡æ¡£ - State](https://langchain-ai.github.io/langgraph/concepts/low_level/#state)
- [LangGraph å®˜æ–¹æ–‡æ¡£ - Nodes](https://langchain-ai.github.io/langgraph/concepts/low_level/#nodes)
- [LangGraph å®˜æ–¹æ–‡æ¡£ - Edges](https://langchain-ai.github.io/langgraph/concepts/low_level/#edges)
- [Python TypedDict æ–‡æ¡£](https://docs.python.org/3/library/typing.html#typing.TypedDict)
- [Python Literal æ–‡æ¡£](https://docs.python.org/3/library/typing.html#typing.Literal)

---

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™ä¸ªç®€å•å›¾æ•™ç¨‹ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š

### LangGraph æ ¸å¿ƒæ¦‚å¿µ
1. **State**ï¼šå®šä¹‰å›¾çš„æ•°æ®ç»“æ„
2. **Node**ï¼šæ‰§è¡Œå…·ä½“æ“ä½œçš„å‡½æ•°
3. **Edge**ï¼šæ§åˆ¶æ‰§è¡Œæµç¨‹çš„è¿æ¥
4. **START/END**ï¼šå›¾çš„å…¥å£å’Œå‡ºå£

### Python æŠ€æœ¯è¦ç‚¹
1. **TypedDict**ï¼šç±»å‹å®‰å…¨çš„å­—å…¸å®šä¹‰
2. **Literal**ï¼šé™å®šè¿”å›å€¼çš„å¯èƒ½å–å€¼
3. **ç±»å‹æç¤º**ï¼šæå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§

### å…³é”®æŠ€èƒ½
1. æ„å»ºç®€å•çš„çŠ¶æ€æœº
2. ä½¿ç”¨æ¡ä»¶è¾¹å®ç°åŠ¨æ€è·¯ç”±
3. ç†è§£å›¾çš„æ‰§è¡Œæµç¨‹

**ä¸‹ä¸€æ­¥ï¼š** å­¦ä¹ æ›´å¤æ‚çš„å›¾ç»“æ„ï¼Œå¦‚é“¾å¼å›¾ã€å¹¶è¡Œå›¾ã€å¾ªç¯å›¾ç­‰ï¼Œæ„å»ºæ›´å¼ºå¤§çš„ AI åº”ç”¨ï¼
